var gadgetui={};gadgetui.model=function(){"use strict";function a(a,b){this.data=a,this.elements=[],void 0!==b&&this.bind(b)}var b={};return a.prototype.handleEvent=function(a){var b,c=this;switch(a.type){case"change":for(b=0;b<this.elements.length;b++)c.change(this.elements[b].elem[0].value)}},a.prototype.change=function(a,b){var c,d;for(void 0===b?this.data=a:this.data[b]=a,d=0;d<this.elements.length;d++)c=this.elements[d],c.elem.value=0===c.prop.length?a:void 0!==b?a[b.prop]:a[c.elem.prop],d++},a.prototype.bind=function(a,b){var c;void 0===b?(a.value=this.data,c={elem:a,prop:""}):(a.value=this.data[b],c={elem:a,prop:b}),a[0].addEventListener("change",this,!1),this.elements.push(c)},{BindableObject:a,create:function(c,d,e){b[c]=void 0!==e?new a(d,e):new a(d)},destroy:function(a){delete b[a]},bind:function(a,c){var d=a.split(".");1===d.length?b[a].bind(c):b[d[0]].bind(c,d[1])},exists:function(a){return b.hasOwnProperty(a)?!0:!1},get:function(a){var c=a.split(".");return 1===c.length?b[a].data:b[c[0]].data[c[1]]},set:function(a,c){var d=a.split(".");if(this.exists(d[0])===!1){if(1!==d.length)throw"Object "+d[0]+"is not yet initialized.";this.create(a,c)}else 1===d.length?b[a].change(c):b[d[0]].change(c,d[1])}}}(),gadgetui.input=function(a){function b(b){function c(b,c,d,e){var f={};a("span",a(b)).on("mouseenter",function(){a(a(this)).hide(),a(a(this).parent()).on("mouseleave",function(){a("input",a(this)).is(":focus")===!1&&(a("span",a(this)).css("display","inline"),a("input",a(this)).hide(),a("img",a(this)).hide())}),a("input",a(this).parent()).css("min-width","10em").css("width",Math.round(.66*a("input",a(this).parent()).val().length)+"em").css("display","inline").on("blur",function(){var b,g=this;setTimeout(function(){b=a(g).val(),f.isDirty===!0&&(0===b.length&&void 0!==a(g).attr("placeholder")&&(b=a(g).attr("placeholder")),f[g.name]=a(g).val(),a("span",a(g).parent()).text(b),void 0!==d&&d.set(g.name,f[g.name]),f.isDirty=!1,c===!0&&a(g).trigger("gadget-ui-input-change",[f]),void 0!==e&&e(f)),a("span",a(g).parent()).css("display","inline"),a("img",a(g).parent()).hide(),a(g).hide()},200)}).on("change",function(){f.isDirty=!0}).on("keyup",function(b){13===parseInt(b.keyCode,10)&&a(this).blur(),a(this).css("width",Math.round(.66*a("input",a(this).parent()).val().length)+"em")}),a("img",a(this).parent()).css("display","inline")})}var d,e,f=this;f.emitEvents=!0,f.model,f.func,el=void 0===b.el?a(".gadget-ui-input",document):b.el,void 0!==b.config&&f.config(b.config),a.each(el,function(b,g){d=a(g).val(),e=a(g).attr("placeholder"),0===d.length&&(d=void 0!==e&&e.length>0?e:" ... "),a(g).wrap("<div class='gadget-ui-input-div'></div>"),a(g).parent().prepend("<span>"+d+"</span>"),a(g).hide(),c(a(g).parent(),f.emitEvents,f.model,f.func)})}return b.prototype.config=function(a){var b=this;b.model=void 0===a.model?b.model:a.model,b.func=void 0===a.func?void 0:a.func,b.emitEvents=void 0===a.emitEvents?!0:a.emitEvents},{Input:b}}(jQuery);