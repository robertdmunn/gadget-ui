"use strict";var gadgetui={keyCode:{BACKSPACE:8,COMMA:188,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,LEFT:37,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SPACE:32,TAB:9,UP:38}};document.addEventListener("mousemove",function(a){a=a||window.event,gadgetui.mousePosition=gadgetui.util.mouseCoords(a)}),gadgetui.model=function(){function a(a,b){this.data=a,this.elements=[],void 0!==b&&this.bind(b)}var b={};return a.prototype.handleEvent=function(a){var b,c;switch(a.type){case"change":for(b=0;b<this.elements.length;b++)c=this.elements[b],void 0===a.originalSource&&(a.originalSource="BindableObject.handleEvent['change']"),a.target.name===c.prop&&"BindableObject.updateDomElement"!==a.originalSource&&(a.target.type.match(/select/)?this.change({id:a.target.value,text:a.target.options[a.target.selectedIndex].innerHTML},a,c.prop):this.change(a.target.value,a,c.prop))}},a.prototype.change=function(a,b,c){var d,e;if(void 0===b.originalSource&&(b.originalSource="BindableObject.change"),console.log("change : Source: "+b.originalSource),void 0===c)this.data=a;else{if("object"!=typeof this.data)throw"Attempt to treat a simple value as an object with properties. Change fails.";if(void 0===this.data[c])throw"Property '"+c+"' of object is undefined.";this.data[c]=a}for(d=0;d<this.elements.length;d++)e=this.elements[d],void 0!==c&&c!==e.prop||void 0===b.target||e.elem==b.target||this.updateDomElement(b,e.elem,a)},a.prototype.updateDom=function(a,b,c){var d,e,f;for(void 0===a.originalSource&&(a.originalSource="BindableObject.updateDom"),d=0;d<this.elements.length;d++)if(e=this.elements[d],void 0===c)if("object"==typeof b)for(f in b)this.elements[d].prop===f&&this.updateDomElement(a,e.elem,b[f]);else this.updateDomElement(a,e.elem,b);else e.prop===c&&this.updateDomElement(a,e.elem,b)},a.prototype.updateDomElement=function(a,b,c){if(void 0===a.originalSource&&(a.originalSource="BindableObject.updateDomElement"),"object"==typeof c?"DIV"===b.tagName||"SPAN"===b.tagName?b.innerText=c.text:b.value=c.id:"DIV"===b.tagName||"SPAN"===b.tagName?b.innerText=c:b.value=c,"model.set"!==a.originalSource){var d=new Event("change");d.originalSource="model.updateDomElement",b.dispatchEvent(d)}},a.prototype.bind=function(a,b){var c,d=this;void 0===b?(a.value=this.data,c={elem:a,prop:""}):(a.value=this.data[b],c={elem:a,prop:b}),a.addEventListener?a.addEventListener("change",this,!1):a.attachEvent("onpropertychange",function(a){if("value"===a.propertyName){var b=a.srcElement,c="SELECT"===b.nodeName?{id:b.value,text:b.options[b.selectedIndex].innerHTML}:b.value;d.change(c,{target:b},b.name)}}),this.elements.push(c)},{BindableObject:a,create:function(c,d,e){b[c]=void 0!==e?new a(d,e):new a(d)},destroy:function(a){delete b[a]},bind:function(a,c){var d=a.split(".");1===d.length?b[a].bind(c):b[d[0]].bind(c,d[1])},exists:function(a){return b.hasOwnProperty(a)?!0:!1},get:function(a){if(null===a||void 0===a)return void console.log("Expected parameter [name] is not defined.");var c=a.split(".");try{if(1===c.length){if(void 0===b[a])throw"Key '"+a+"' does not exist in the model.";return b[a].data}if(void 0===b[c[0]])throw"Key '"+c[0]+"' does not exist in the model.";return b[c[0]].data[c[1]]}catch(d){return void console.log(d)}},set:function(a,c){if(null===a||void 0===a)return void console.log("Expected parameter [name] is not defined.");var d=a.split("."),e={originalSource:"model.set"};if(this.exists(d[0])===!1){if(1!==d.length)throw"Object "+d[0]+"is not yet initialized.";this.create(a,c)}else 1===d.length?(b[a].change(c,e),b[a].updateDom(e,c)):(b[d[0]].change(c,e,d[1]),b[d[0]].updateDom(e,c,d[1]))}}}(),String.prototype.trim||(String.prototype.trim=function(){return this.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")}),Array.prototype.forEach||(Array.prototype.forEach=function(a,b){var c,d,e,f,g,h=Object(this),i=h.length,j=i>>>0;if("function"!=typeof a)throw new TypeError;for(c=b?b:void 0,d=0;j>d;)e=d.toString(),f=h.hasOwnProperty(e),f&&(g=h[e],a.call(c,g,d,h)),d+=1;return void 0}),gadgetui.display=function(){function a(a,b,c){this.selector=a,this.message=b,this.config(c),this.render(),this.setStyles(),this.setBehaviors(),this.show()}function b(a,b){this.selector=a,this.config(b),this.addControl(),this.addCSS(),this.addHeader(),this.icon=this.wrapper.querySelector("div.oi"),this.addBindings(),this.height=this.wrapper.offsetHeight,this.headerHeight=this.header.offsetHeight,this.selectorHeight=this.selector.offsetHeight,this.toggle()}function c(a,b){this.selector=a,void 0!==b&&this.config(b),this.addControl(),this.addHeader(),this.maxmin=this.wrapper.querySelector("div.oi"),this.minWidth=this.title.length>0?gadgetui.util.textWidth(this.title,this.header.style)+50:100;var c=2*parseInt(gadgetui.util.getNumberValue(this.padding),10),d=gadgetui.util.getNumberValue(gadgetui.util.getStyle(this.header,"height"))+6;gadgetui.util.setStyle(this.selector,"width",this.width-c),this.height=void 0===b.height?gadgetui.util.getNumberValue(gadgetui.util.getStyle(this.selector,"height"))+c+d+10:b.height,this.addCSS(),this.height=gadgetui.util.getStyle(this.wrapper,"height"),this.relativeOffsetLeft=gadgetui.util.getRelativeParentOffset(this.selector).left,this.addBindings()}return a.prototype.render=function(){var a,b,c,d=document.createElement("div");gadgetui.util.addClass(d,"gadgetui-bubble"),gadgetui.util.addClass(d,"gadgetui-bubble-"+this.bubbleType),d.setAttribute("id",this.id),d.innerHTML=this.message,this.closable&&(a=document.createElement("span"),gadgetui.util.addClass(a,"oi"),a.setAttribute("data-glyph","circle-x")),b=document.createElement("div"),gadgetui.util.addClass(b,"gadgetui-bubble-arrow-outside"),this.selector.parentNode.insertBefore(d,this.selector.nextSibling),this.bubbleSelector=document.getElementById(this.id),this.closable&&this.bubbleSelector.appendChild(a),this.bubbleSelector.appendChild(b),c=document.createElement("div"),gadgetui.util.addClass(c,"gadgetui-bubble-arrow-inside"),this.bubbleSelector.appendChild(c)},a.prototype.show=function(){this.bubbleSelector.style.display="block"},a.prototype.setStyles=function(){this.setBubbleStyles(),this.calculateArrowPosition(),this.calculateArrowStyle(),this.setBeforeRules(),this.setAfterRules(),this.calculatePosition(),this.bubbleSelector.style.top=this.top+"px",this.bubbleSelector.style.left=this.left+"px",this.spanElement=this.bubbleSelector.getElementsByTagName("span");var a=this.bubbleWidth-6-this.closeIconSize-2*this.borderWidth,b=gadgetui.util.setStyle;b(this.spanElement[0],"left",a+"px"),b(this.spanElement[0],"position","absolute"),b(this.spanElement[0],"cursor","pointer"),b(this.spanElement[0],"top","6px"),b(this.spanElement[0],"color",this.borderColor)},a.prototype.setBubbleStyles=function(){var a=gadgetui.util.setStyle;a(this.bubbleSelector,"margin",0),a(this.bubbleSelector,"padding",this.padding+"px"),a(this.bubbleSelector,"width",this.width+"px"),a(this.bubbleSelector,"height",this.height+"px"),a(this.bubbleSelector,"line-height",this.lineHeight+"px"),a(this.bubbleSelector,"border-radius",this.borderRadius+"px"),a(this.bubbleSelector,"-moz-border-radius",this.borderRadius+"px"),a(this.bubbleSelector,"-webkit-border-radius",this.borderRadius+"px"),a(this.bubbleSelector,"-webkit-box-shadow",this.shadowSize+"px "+this.shadowSize+"px 4px "+this.boxShadowColor),a(this.bubbleSelector,"-moz-box-shadow",this.shadowSize+"px "+this.shadowSize+"px 4px "+this.boxShadowColor),a(this.bubbleSelector,"box-shadow",this.shadowSize+"px "+this.shadowSize+"px 4px "+this.boxShadowColor),a(this.bubbleSelector,"border",this.borderWidth+"px solid "+this.borderColor),a(this.bubbleSelector,"background-color",this.backgroundColor),a(this.bubbleSelector,"position","absolute"),a(this.bubbleSelector,"text-align","left"),a(this.bubbleSelector,"opacity",this.opacity),a(this.bubbleSelector,"font",this.font),a(this.bubbleSelector,"z-index",this.zIndex)},a.prototype.setBeforeRules=function(){var a=gadgetui.util.setStyle,b=this.bubbleSelector.getElementsByClassName("gadgetui-bubble-arrow-outside");a(b[0],"content"," "),a(b[0],"position","absolute"),a(b[0],"width",0),a(b[0],"height",0),a(b[0],"left",this.beforeArrowLeft+"px"),a(b[0],"top",this.arrowTop+"px"),a(b[0],"border",this.arrowSize+"px solid"),a(b[0],"border-color",this.beforeBorderColor)},a.prototype.setAfterRules=function(){var a=gadgetui.util.setStyle,b=this.bubbleSelector.getElementsByClassName("gadgetui-bubble-arrow-inside");a(b[0],"content"," "),a(b[0],"position","absolute"),a(b[0],"width",0),a(b[0],"height",0),a(b[0],"left",this.afterArrowLeft+"px"),a(b[0],"top",this.afterArrowTop+"px"),a(b[0],"border",this.afterArrowSize+"px solid"),a(b[0],"border-color",this.afterBorderColor)},a.prototype.calculatePosition=function(){var a=this;this.relativeOffset=gadgetui.util.getRelativeParentOffset(this.selector),this.position.split(" ").forEach(function(b){switch(b){case"top":a.top=a.top-a.relativeOffset.top;break;case"bottom":a.top=a.top+a.selector.offsetHeight-a.relativeOffset.top;break;case"left":break;case"right":a.left=a.left+a.selector.offsetWidth-a.relativeOffset.left;break;case"center":a.left=a.left+a.selector.offsetWidth/2-a.relativeOffset.left}})},a.prototype.calculateArrowPosition=function(){var a,b=2*this.arrowSize,c=2*this.padding,d=this.borderWidth+this.borderRadius+this.arrowSize,e=Math.floor(Math.sqrt(Math.pow(this.borderWidth,2)+Math.pow(this.borderWidth,2)))-1;switch(this.afterArrowSize=this.arrowSize-e,a=(b-2*this.afterArrowSize)/2,this.arrowPositionArray[0]){case"left":this.beforeArrowLeft=-b,this.afterArrowLeft=2*-this.afterArrowSize,this.left=this.left+this.arrowSize-this.borderWidth;break;case"right":this.beforeArrowLeft=this.width+c,this.afterArrowLeft=this.beforeArrowLeft,this.left=this.left-this.bubbleWidth-this.arrowSize+this.borderWidth;break;case"top":this.arrowTop=-b,this.afterArrowTop=-(2*this.afterArrowSize),this.top=this.top+this.arrowSize-this.borderWidth;break;case"bottom":this.arrowTop=this.height+c,this.afterArrowTop=this.arrowTop,this.top=this.top-this.bubbleHeight-this.arrowSize+this.borderWidth}switch(this.arrowPositionArray[1]){case"top":this.arrowTop=this.borderRadius,this.afterArrowTop=this.arrowTop+a,this.top=this.top-d;break;case"bottom":this.arrowTop=this.bubbleHeight-2*this.borderWidth-b-this.borderRadius,this.afterArrowTop=this.arrowTop+a,this.top=this.top-this.bubbleHeight+d;break;case"right":this.beforeArrowLeft=this.bubbleWidth-2*this.borderWidth-b-this.borderRadius,this.afterArrowLeft=this.beforeArrowLeft+e,this.left=this.left-this.bubbleWidth+d;break;case"left":this.beforeArrowLeft=this.borderRadius,this.afterArrowLeft=this.beforeArrowLeft+e,this.left=this.left-d}},a.prototype.calculateArrowStyle=function(){var a=[],b=this.arrowPositionArray[0],c=this.arrowPositionArray[1]+" "+this.arrowDirection;if("middle"===this.arrowDirection)switch(this.arrowPositionArray[0]){case"top":this.beforeBorderColor="transparent transparent "+this.borderColor+" transparent",this.afterBorderColor="transparent transparent #fff transparent";break;case"bottom":this.beforeBorderColor=this.borderColor+" transparent transparent transparent",this.afterBorderColor="#fff transparent transparent transparent";break;case"right":this.beforeBorderColor="transparent transparent transparent "+this.borderColor,this.afterBorderColor="transparent transparent transparent #fff";break;case"left":this.beforeBorderColor="transparent "+this.borderColor+" transparent transparent",this.afterBorderColor="transparent #fff transparent transparent"}else"top"===b||"bottom corner"===c||"top center"===c?(a[0]="transparent",a[2]=this.borderColor):("bottom"===b||"bottom center"===c||"top corner"===c)&&(a[0]=this.borderColor,a[2]="transparent"),"right"===b||"left corner"===c||"right center"===c?(a[1]="transparent",a[3]=this.borderColor):("left"===b||"left center"===c||"right corner"===c)&&(a[1]=this.borderColor,a[3]="transparent"),this.beforeBorderColor=a.toString().replace(/\),/gi,") ").replace(/,transparent/gi," transparent").replace(/transparent,/gi,"transparent "),this.afterBorderColor=this.beforeBorderColor.replace(this.borderColor,"#fff","g")},a.prototype.setBehaviors=function(){var a=this,b=gadgetui.util.setStyle;this.spanElement[0].addEventListener("click",function(){b(a.bubbleSelector,"display","none"),a.bubbleSelector.parentNode.removeChild(a.bubbleSelector)}),this.autoClose&&(closeBubble=function(){b(a.bubbleSelector,"display","none"),a.bubbleSelector.parentNode.removeChild(a.bubbleSelector)},setTimeout(closeBubble,this.autoCloseDelay))},a.prototype.config=function(a){a=void 0===a?{}:a;var b="silver";this.bubbleType=void 0===a.bubbleType?"speech":a.bubbleType,this.id="gadgetui-bubble-"+gadgetui.util.Id(),this.height=void 0===a.height?100:a.height,this.position=void 0===a.position?"top right":a.position,this.width=void 0===a.width?200:a.width,this.padding=void 0===a.padding?20:a.padding,this.opacity=void 0===a.opacity?1:a.opacity,this.top=gadgetui.util.getOffset(this.selector).top,this.left=gadgetui.util.getOffset(this.selector).left,this.shadowColor=void 0===a.shadowColor?b:a.shadowColor,this.shadowSize=2,this.borderColor=void 0===a.borderColor?b:a.borderColor,this.borderWidth=void 0===a.borderWidth?8:a.borderWidth,this.arrowPosition=void 0===a.arrowPosition?"bottom left":a.arrowPosition,this.arrowDirection=void 0===a.arrowDirection?"middle":a.arrowDirection,this.arrowPositionArray=this.arrowPosition.split(" "),this.bubbleWidth=this.width+2*this.padding+2*this.borderWidth,this.bubbleHeight=this.height+2*this.padding+2*this.borderWidth,this.closeIconSize=13,this.arrowSize=void 0===a.arrowSize?25:a.arrowSize,this.backgroundColor=void 0===a.backgroundColor?"#FFFFFF":a.backgroundColor,this.lineHeight=void 0===a.lineHeight?"1.2em":a.lineHeight,this.borderRadius=void 0===a.borderRadius?30:a.borderRadius,this.boxShadowColor=void 0===a.boxShadowColor?b:a.boxShadowColor,this.font=void 0===a.font?"1em Arial sans":a.font,this.zIndex=void 0===a.zIndex?gadgetui.util.getMaxZIndex()+1:a.zIndex,this.closable=void 0===a.closable?!1:a.closable,this.autoClose=void 0===a.autoClose?!1:a.autoClose,this.autoCloseDelay=void 0===a.autoCloseDelay?5e3:a.autoCloseDelay,this.relativeOffset={left:0,top:0}},b.prototype.addControl=function(){var a=document.createElement("div");gadgetui.util.addClass(a,"gadget-ui-collapsiblePane"),this.selector.parentNode.insertBefore(a,this.selector),this.wrapper=this.selector.previousSibling,this.selector.parentNode.removeChild(this.selector),a.appendChild(this.selector)},b.prototype.addHeader=function(){var a,b=gadgetui.util.setStyle,c=document.createElement("div");b(c,"padding","2px 0px 2px .5em"),b(c,"text-align","left"),b(c,"border-radius",this.borderRadius+"px"),b(c,"border","1px solid "+this.borderColor),b(c,"background",this.headerBackgroundColor),b(c,"color",this.headerColor),b(c,"font-weight","bold"),b(c,"font",this.font),gadgetui.util.addClass(c,"gadget-ui-collapsiblePane-header"),c.innerHTML=this.title,this.wrapper.insertBefore(c,this.selector),this.header=this.wrapper.querySelector("div.gadget-ui-collapsiblePane-header"),a=document.createElement("div"),gadgetui.util.addClass(a,"oi"),this.header.appendChild(a)},b.prototype.addCSS=function(){var a=this.width,b=gadgetui.util.setStyle;b(this.wrapper,"width",a),b(this.wrapper,"border","1px solid "+this.borderColor),b(this.wrapper,"border-radius",this.borderRadius+"px"),b(this.wrapper,"overflow","hidden"),this.selector.style||b(this.selector,"padding",this.padding+"px")},b.prototype.addBindings=function(){var a=this,b=this.wrapper.querySelector("div.gadget-ui-collapsiblePane-header");b.addEventListener("click",function(){a.toggle()})},b.prototype.toggle=function(){var a,b,c,d,e,f=gadgetui.util.setStyle,g="",h="";this.collapsed===!0?(a=h,c="block",b=this.height,e=this.selectorHeight,d="1px solid "+this.borderColor,this.collapsed=!1):(a=g,c="none",b=this.headerHeight,e=0,d="1px solid transparent",this.collapsed=!0),this.eventName=this.collapsed?"collapse":"expand",f(this.selector,"padding",this.padding+"px"),f(this.selector,"padding-top",this.paddingTop+"px");var i=new Event(this.eventName);this.selector.dispatchEvent(i),"undefined"!=typeof Velocity&&this.animate?("block"===c&&f(this.wrapper,"border",d),Velocity(this.wrapper,{height:b},{queue:!1,duration:300,complete:function(){}}),Velocity(this.selector,{height:e},{queue:!1,duration:300,complete:function(){}})):f(this.selector,"display",c)},b.prototype.config=function(a){a=void 0===a?{}:a,this.animate=void 0===a.animate?!0:a.animate,this.title=void 0===a.title?"":a.title,this.path=void 0===a.path?"/bower_components/gadget-ui/dist/":a.path,this.padding=void 0===a.padding?".5em":a.padding,this.paddingTop=void 0===a.paddingTop?".3em":a.paddingTop,this.width=void 0===a.width?gadgetui.util.getStyle(this.selector,"width"):a.width,this.interiorWidth=void 0===a.interiorWidth?"":a.interiorWidth,this.collapse=void 0===a.collapse?!1:a.collapse,this.collapsed=void 0===a.collapse?!0:!a.collapse,this.borderColor=void 0===a.borderColor?"silver":a.borderColor,this.headerColor=void 0===a.headerColor?"black":a.headerColor,this.headerBackgroundColor=void 0===a.headerBackgroundColor?"silver":a.headerBackgroundColor,this.borderRadius=void 0===a.borderRadius?6:a.borderRadius},c.prototype.addBindings=function(){{var a=this;gadgetui.util.draggable(this.wrapper)}this.wrapper.addEventListener("drag_end",function(b){a.top=b.detail.top,a.left=b.detail.left,a.relativeOffsetLeft=gadgetui.util.getRelativeParentOffset(a.selector).left,console.log(a)}),this.maxmin.addEventListener("click",function(){a.minimized?a.expand():a.minimize()})},c.prototype.addHeader=function(){var a=gadgetui.util.setStyle;this.header=document.createElement("div"),this.header.innerHTML=this.title,gadgetui.util.addClass(this.header,"gadget-ui-floatingPane-header"),a(this.header,"padding","2px 0px 2px .5em"),a(this.header,"text-align","left"),a(this.header,"border-radius",this.borderRadius),a(this.header,"border","1px solid "+this.borderColor),a(this.header,"background",this.headerBackgroundColor),a(this.header,"color",this.headerColor),a(this.header,"font-weight","bold"),a(this.header,"font",this.font),this.icon=document.createElement("div"),gadgetui.util.addClass(this.icon,"oi"),this.header.insertBefore(this.icon,void 0),this.wrapper.insertBefore(this.header,this.selector),this.icon.setAttribute("data-glyph","fullscreen-exit"),this.header.appendChild(this.icon)},c.prototype.addCSS=function(){var a=gadgetui.util.setStyle;a(this.wrapper,"width",this.width),a(this.wrapper,"border","1px solid "+this.borderColor),a(this.wrapper,"border-radius",this.borderRadius),a(this.wrapper,"min-width",this.minWidth),a(this.wrapper,"opacity",this.opacity),a(this.wrapper,"z-index",this.zIndex),a(this.wrapper,"position",this.position),void 0!==this.top&&a(this.wrapper,"top",this.top),void 0!==this.left&&a(this.wrapper,"left",this.left),void 0!==this.bottom&&a(this.wrapper,"bottom",this.bottom),void 0!==this.right&&a(this.wrapper,"right",this.right),a(this.selector,"width",this.interiorWidth),a(this.selector,"padding",this.padding),a(this.selector,"height",this.height),a(this.selector,"overflow","scroll"),a(this.maxmin,"float","right"),a(this.maxmin,"display","inline")},c.prototype.addControl=function(){var a=document.createElement("div");gadgetui.util.addClass(a,"gadget-ui-floatingPane"),a.draggable=!0,this.selector.parentNode.insertBefore(a,this.selector),this.wrapper=this.selector.previousSibling,this.selector.parentNode.removeChild(this.selector),a.appendChild(this.selector)},c.prototype.expand=function(){var a=this,b=gadgetui.util.setStyle,c=gadgetui.util.getOffset(this.wrapper),d=parseInt(gadgetui.util.getNumberValue(gadgetui.util.getStyle(this.wrapper.parentElement,"padding-left")),10),e=parseInt(new Number(c.left),10)-this.relativeOffsetLeft-d,f=parseInt(gadgetui.util.getNumberValue(this.width),10);"undefined"!=typeof Velocity&&this.animate?(Velocity(this.wrapper,{left:e-f+a.minWidth},{queue:!1,duration:500},function(){}),Velocity(this.wrapper,{width:this.width},{queue:!1,duration:500},function(){}),Velocity(this.selector,{height:this.height},{queue:!1,duration:500,complete:function(){a.icon.setAttribute("data-glyph","fullscreen-exit"),b(a.selector,"overflow","scroll")}})):(b(this.wrapper,"left",e-f+this.minWidth),b(this.wrapper,"width",this.width),b(this.selector,"height",this.height),this.icon.setAttribute("data-glyph","fullscreen-exit"),b(this.selector,"overflow","scroll")),this.minimized=!1},c.prototype.minimize=function(){var a=this,b=gadgetui.util.setStyle,c=gadgetui.util.getOffset(this.wrapper),d=parseInt(gadgetui.util.getNumberValue(gadgetui.util.getStyle(this.wrapper.parentElement,"padding-left")),10),e=parseInt(new Number(c.left),10)-this.relativeOffsetLeft-d,f=parseInt(gadgetui.util.getNumberValue(this.width),10);b(this.selector,"overflow","hidden"),"undefined"!=typeof Velocity&&this.animate?(Velocity(this.wrapper,{left:e+f-a.minWidth},{queue:!1,duration:500},function(){}),Velocity(this.wrapper,{width:a.minWidth},{queue:!1,duration:500,complete:function(){a.icon.setAttribute("data-glyph","fullscreen-enter")}}),Velocity(this.selector,{height:"50px"},{queue:!1,duration:500},function(){})):(b(this.wrapper,"left",e+f-this.minWidth),b(this.wrapper,"width",this.minWidth),b(this.selector,"height","50px"),this.icon.setAttribute("data-glyph","fullscreen-enter")),this.minimized=!0},c.prototype.config=function(a){gadgetui.util.setStyle;a=void 0===a?{}:a,this.animate=void 0===a.animate?!0:a.animate,this.title=void 0===a.title?"":a.title,this.path=void 0===a.path?"/bower_components/gadget-ui/dist/":a.path,this.position=void 0===a.position?"absolute":a.position,this.padding=void 0===a.padding?15:a.padding,this.paddingTop=void 0===a.paddingTop?".3em":a.paddingTop,this.width=void 0===a.width?gadgetui.util.getStyle(this.selector,"width"):a.width,this.top=void 0===a.top?void 0:a.top,this.left=void 0===a.left?void 0:a.left,this.bottom=void 0===a.bottom?void 0:a.bottom,this.right=void 0===a.right?void 0:a.right,this.interiorWidth=void 0===a.interiorWidth?"":a.interiorWidth,this.opacity=void 0===a.opacity?1:a.opacity,this.zIndex=void 0===a.zIndex?gadgetui.util.getMaxZIndex()+1:a.zIndex,this.minimized=!1,this.relativeOffsetLeft=0,this.borderColor=void 0===a.borderColor?"silver":a.borderColor,this.headerColor=void 0===a.headerColor?"black":a.headerColor,this.headerBackgroundColor=void 0===a.headerBackgroundColor?"silver":a.headerBackgroundColor,this.borderRadius=void 0===a.borderRadius?6:a.borderRadius},{Bubble:a,CollapsiblePane:b,FloatingPane:c}}(),gadgetui.input=function(){function a(a,b){this.emitEvents=!0,this.model=gadgetui.model,this.func,this.selector=a,this.config(b),this.setSaveFunc(),this.setDataProviderRefresh(),this.addControl(),this.setCSS(),gadgetui.util.bind(this.selector,this.model),gadgetui.util.bind(this.label,this.model),this.addBehaviors(),this.setStartingValues()}function b(a,b){this.selector=a,this.items=[],this.config(b),this.setIsMultiLine(),this.addControl(),this.initSource(),this.addMenu(),this.addBindings()}function c(a,b){this.selector=a,this.config(b),this.setInitialValue(),this.addControl(),this.addCSS(),this.selector.style.display="none",gadgetui.util.bind(this.selector,this.model),gadgetui.util.bind(this.label,this.model),this.addBindings()}function d(a,b){this.emitEvents=!0,this.model=gadgetui.model,this.func,this.selector=a,this.config(b),this.setInitialValue(),this.addControl(),this.setLineHeight(),this.setFont(),this.setMaxWidth(),this.setWidth(),this.addCSS(),gadgetui.util.bind(this.selector,this.model),gadgetui.util.bind(this.label,this.model),this.addBindings()}return a.prototype.addControl=function(){var a=gadgetui.util.setStyle;this.comboBox=gadgetui.util.createElement("div"),this.input=gadgetui.util.createElement("input"),this.label=gadgetui.util.createElement("div"),this.inputWrapper=gadgetui.util.createElement("div"),this.selectWrapper=gadgetui.util.createElement("div"),gadgetui.util.addClass(this.comboBox,"gadgetui-combobox"),gadgetui.util.addClass(this.input,"gadgetui-combobox-input"),gadgetui.util.addClass(this.label,"gadgetui-combobox-label"),gadgetui.util.addClass(this.inputWrapper,"gadgetui-combobox-inputwrapper"),gadgetui.util.addClass(this.selectWrapper,"gadgetui-combobox-selectwrapper"),this.selector.parentNode.insertBefore(this.comboBox,this.selector),this.selector.parentNode.removeChild(this.selector),this.comboBox.appendChild(this.label),this.selectWrapper.appendChild(this.selector),this.comboBox.appendChild(this.selectWrapper),this.inputWrapper.appendChild(this.input),this.comboBox.appendChild(this.inputWrapper),this.label.setAttribute("data-id",this.id),this.label.setAttribute("gadgetui-bind",this.selector.getAttribute("gadgetui-bind")),this.label.innerHTML=this.text,this.input.setAttribute("placeholder",this.newOption.text),this.input.setAttribute("type","text"),this.input.setAttribute("name","custom"),a(this.comboBox,"opacity",".0")},a.prototype.setCSS=function(){var a=this,b=new Promise(function(b,c){a.getArrowWidth(b,c)});b.then(function(){a.addCSS()}),b["catch"](function(b){a.arrowWidth=22,console.log(b),a.addCSS()})},a.prototype.getArrowWidth=function(a,b){var c=this,d=new Image;d.onload=function(){c.arrowWidth=this.width,a()},d.onerror=function(){b("Icon was not loaded.")},d.src=this.arrowIcon},a.prototype.addCSS=function(){var a=gadgetui.util.setStyle;gadgetui.util.addClass(this.selector,"gadgetui-combobox-select"),a(this.selector,"width",this.width),a(this.selector,"border",0),a(this.selector,"display","inline"),a(this.comboBox,"position","relative");var b,c,d,e=gadgetui.util.getStyle(this.selector),f=this.selector.clientWidth,g=0,h=0,i=0,j=0,k=this.borderWidth;d=this.borderWidth+4,this.borderRadius>5&&(i=this.borderRadius-5,d+=i),c=d,b=f-this.arrowWidth-this.borderRadius-4,console.log(navigator.userAgent),navigator.userAgent.match(/(Safari)/)&&!navigator.userAgent.match(/(Chrome)/)?(k=this.borderWidth-2,i=4>i?4:this.borderRadius-1,h=1):navigator.userAgent.match(/Edge/)?(i=1>i?1:this.borderRadius-4,c--):navigator.userAgent.match(/MSIE/)?i=1>i?1:this.borderRadius-4:navigator.userAgent.match(/Trident/)?i=2>i?2:this.borderRadius-3:navigator.userAgent.match(/Chrome/)&&(i=4>i?4:this.borderRadius-1,h=1),a(this.selector,"margin-top",h),a(this.selector,"padding-left",i),a(this.inputWrapper,"position","absolute"),a(this.inputWrapper,"top",k),a(this.inputWrapper,"left",j),a(this.input,"display","inline"),a(this.input,"padding-left",g),a(this.input,"margin-left",c),a(this.input,"width",b),a(this.label,"position","absolute"),a(this.label,"left",d),a(this.label,"top",this.borderWidth+1),a(this.label,"margin-left",0),a(this.selectWrapper,"display","inline"),a(this.selectWrapper,"position","absolute"),a(this.selectWrapper,"padding-bottom","1px"),a(this.selectWrapper,"left",0),a(this.comboBox,"font-size",e.fontSize),a(this.selectWrapper,"background-color",this.backgroundColor),a(this.selectWrapper,"border-color",this.borderColor),a(this.selectWrapper,"border-style",this.borderStyle),a(this.selectWrapper,"border-width",this.borderWidth),a(this.selectWrapper,"border-radius",this.borderRadius),a(this.input,"border",0),a(this.input,"font-size",e.fontSize),a(this.input,"background-color",this.inputBackground),a(this.label,"font-family",e.fontFamily),a(this.label,"font-size",e.fontSize),a(this.label,"font-weight",e.fontWeight),navigator.userAgent.match(/Firefox/)&&(a(this.selectWrapper,"background-image","url('"+this.arrowIcon+"')"),a(this.selectWrapper,"background-repeat","no-repeat"),a(this.selectWrapper,"background-position","right center"),this.scaleIconHeight===!0&&a(this.selectWrapper,"background-size",this.arrowWidth+"px "+inputHeight+"px")),a(this.selector,"-webkit-appearance","none"),a(this.selector,"-moz-appearance","window"),a(this.selector,"background-image","url('"+this.arrowIcon+"')"),a(this.selector,"background-repeat","no-repeat"),a(this.selector,"background-position","right center"),this.scaleIconHeight===!0&&a(this.selector,"background-size",this.arrowWidth+"px "+inputHeight+"px"),a(this.inputWrapper,"display","none"),a(this.selectWrapper,"display","none"),a(this.comboBox,"opacity",1)},a.prototype.setSelectOptions=function(){for(var a,b,c,d=this;d.selector.options.length>0;)d.selector.remove(0);c=gadgetui.util.createElement("option"),c.value=d.newOption.id,c.text=d.newOption.text,d.selector.add(c),this.dataProvider.data.forEach(function(e){a=e.id,b=e.text,void 0===b&&(b=a),c=gadgetui.util.createElement("option"),c.value=a,c.text=b,d.selector.add(c)})},a.prototype.find=function(a){var b;for(b=0;b<this.dataProvider.data.length;b++)if(this.dataProvider.data[b].text===a)return this.dataProvider.data[b].id},a.prototype.getText=function(a){var b,c=parseInt(a,10);for(isNaN(c)===!0&&(c=a),b=0;b<this.dataProvider.data.length;b++)if(this.dataProvider.data[b].id===c)return this.dataProvider.data[b].text},a.prototype.showLabel=function(){var a=gadgetui.util.setStyle;a(this.label,"display","inline-block"),a(this.selectWrapper,"display","none"),a(this.inputWrapper,"display","none")},a.prototype.addBehaviors=function(){var a=this;this.comboBox.addEventListener(this.activate,function(){setTimeout(function(){"none"!=a.label.style.display&&(console.log("combo mouseenter "),a.selectWrapper.style.display="inline",a.label.style.display="none",a.selector.selectedIndex<=0&&(a.inputWrapper.style.display="inline"))},a.delay)}),this.comboBox.addEventListener("mouseleave",function(){console.log("combo mouseleave "),a.selector!=document.activeElement&&a.input!=document.activeElement&&a.showLabel()}),a.input.addEventListener("click",function(){console.log("input click ")}),a.input.addEventListener("keyup",function(b){if(console.log("input keyup"),13===b.which){var c=gadgetui.util.encode(a.input.value);a.handleInput(c)}}),a.input.addEventListener("blur",function(){console.log("input blur"),gadgetui.util.mouseWithin(a.selector,gadgetui.mousePosition)===!0?(a.inputWrapper.style.display="none",a.selector.focus()):a.showLabel()}),this.selector.addEventListener("mouseenter",function(){a.selector.style.display="inline"}),this.selector.addEventListener("click",function(a){console.log("select click"),a.stopPropagation()}),this.selector.addEventListener("change",function(b){var c=b.target.selectedIndex>=0?b.target.selectedIndex:0;parseInt(b.target[c].value,10)!==parseInt(a.id,10)&&(console.log("select change"),b.target.selectedIndex>0?(a.inputWrapper.style.display="none",a.setValue(b.target[b.target.selectedIndex].value)):(a.inputWrapper.style.display="block",a.setValue(a.newOption.value),a.input.focus()),gadgetui.util.trigger(a.selector,"gadgetui-combobox-change",{id:b.target[b.target.selectedIndex].value,text:b.target[b.target.selectedIndex].innerHTML}))}),this.selector.addEventListener("blur",function(b){console.log("select blur "),b.stopPropagation(),setTimeout(function(){a.input!==document.activeElement&&a.showLabel()},200)})},a.prototype.handleInput=function(a){var b=this.find(a),c=gadgetui.util.setStyle;void 0!==b?(this.selector.value=b,this.label.innerText=a,this.selector.focus(),this.input.value="",c(this.inputWrapper,"display","none")):void 0===b&&a.length>0&&this.save(a)},a.prototype.triggerSelectChange=function(){console.log("select change");var a=new Event("change",{view:window,bubbles:!0,cancelable:!0});this.selector.dispatchEvent(a)},a.prototype.setSaveFunc=function(){if(void 0!==this.save){var a=this.save;this.save=function(b){var c,d,e=this,f=[b],g=this.find(b);return void 0===g&&(console.log("save: "+b),d=new Promise(function(b,d){f.push(b),f.push(d),c=a.apply(e,f),console.log(c)}),d.then(function(a){function c(){gadgetui.util.trigger(e.selector,"gadgetui-combobox-save",{id:a,text:b}),e.input.value="",e.inputWrapper.style.display="none",e.id=a,e.dataProvider.refresh()}e.animate===!0&&"undefined"!=typeof Velocity?(Velocity(e.selectWrapper,{boxShadow:"0 0 5px "+e.glowColor,borderColor:e.glowColor},e.animateDelay/2,function(){e.selectWrapper.style.borderColor=e.glowColor}),Velocity(e.selectWrapper,{boxShadow:0,borderColor:e.borderColor},e.animateDelay/2,c)):c()
}),d["catch"](function(a){e.input.value="",e.inputWrapper.hide(),console.log(a),e.dataProvider.refresh()})),c}}},a.prototype.setStartingValues=function(){void 0===this.dataProvider.data?this.dataProvider.refresh():this.setControls()},a.prototype.setControls=function(){console.log(this),this.setSelectOptions(),this.setValue(this.id),this.triggerSelectChange()},a.prototype.setValue=function(a){var b=this.getText(a);console.log("setting id:"+a),this.id=void 0===b?this.newOption.id:a,b=void 0===b?this.newOption.text:b,this.text=b,this.label.innerText=this.text,this.selector.value=this.id},a.prototype.setDataProviderRefresh=function(){var a,b,c=this,d=this.dataProvider.refresh;this.dataProvider.refresh=function(){var e=this;return void 0!==d&&(a=new Promise(function(a,c){var f=[e,a,c];b=d.apply(this,f)}),a.then(function(){gadgetui.util.trigger(c.selector,"gadgetui-combobox-refresh"),c.setControls()}),a["catch"](function(){console.log("message"),c.setControls()})),b}},a.prototype.config=function(a){a=void 0===a?{}:a,this.model=void 0===a.model?this.model:a.model,this.emitEvents=void 0===a.emitEvents?!0:a.emitEvents,this.dataProvider=void 0===a.dataProvider?void 0:a.dataProvider,this.save=void 0===a.save?void 0:a.save,this.activate=void 0===a.activate?"mouseenter":a.activate,this.delay=void 0===a.delay?10:a.delay,this.inputBackground=void 0===a.inputBackground?"#ffffff":a.inputBackground,this.borderWidth=void 0===a.borderWidth?1:a.borderWidth,this.borderColor=void 0===a.borderColor?"#d0d0d0":a.borderColor,this.borderStyle=void 0===a.borderStyle?"solid":a.borderStyle,this.borderRadius=void 0===a.borderRadius?5:a.borderRadius,this.width=void 0===a.width?150:a.width,this.newOption=void 0===a.newOption?{text:"...",id:0}:a.newOption,this.id=void 0===a.id?this.newOption.id:a.id,this.arrowIcon=void 0===a.arrowIcon?"/bower_components/gadget-ui/dist/img/arrow.png":a.arrowIcon,this.scaleIconHeight=void 0===a.scaleIconHeight?!1:a.scaleIconHeight,this.animate=void 0===a.animate?!0:a.animate,this.glowColor=void 0===a.glowColor?"rgb(82, 168, 236)":a.glowColor,this.animateDelay=void 0===a.animateDelay?500:a.animateDelay,this.border=this.borderWidth+"px "+this.borderStyle+" "+this.borderColor,this.saveBorder=this.borderWidth+"px "+this.borderStyle+" "+this.glowColor},b.prototype.addControl=function(){this.wrapper=document.createElement("div"),void 0!==this.width&&gadgetui.util.setStyle(this.wrapper,"width",this.width),gadgetui.util.addClass(this.wrapper,"gadgetui-lookuplist-input"),this.selector.parentNode.insertBefore(this.wrapper,this.selector),this.selector.parentNode.removeChild(this.selector),this.wrapper.appendChild(this.selector)},b.prototype.addMenu=function(){var a=document.createElement("div");gadgetui.util.addClass(a,"gadgetui-lookuplist-menu"),gadgetui.util.setStyle(a,"display","none"),this.menu={element:a},this.wrapper.appendChild(this.menu.element)},b.prototype.initSource=function(){var a,b,c=this;this.datasource.constructor===Array?(a=this.datasource,this.source=function(b,d){var e=c.filter(a,b.term);d(e)}):"string"==typeof this.datasource?(b=this.datasource,this.source=function(a,d){c.xhr&&c.xhr.abort(),c.xhr=fetch({url:b,data:a,dataType:"json",success:function(a){d(a)},error:function(){d([])}})}):this.source=this.datasource},b.prototype.escapeRegex=function(a){return a.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")},b.prototype._filter=function(a,b){var c=new RegExp(this.escapeRegex(b),"i");return gadgetui.util.grep(a,function(a){return c.test(a.label||a.value||a)})},b.prototype.checkForDuplicate=function(a){var b,c=!1;for(b=0;b<this.items.length;b++)if(this.items[b].value===a.value){c=!0;break}return c},b.prototype.makeUnique=function(a){var b,c=[];for(b=0;b<a.length;b++)this.checkForDuplicate(a[b])||c.push(a[b]);return c},b.prototype.setIsMultiLine=function(){var a=this.selector.nodeName.toLowerCase(),b="textarea"===a,c="input"===a;this.isMultiLine=b?!0:c?!1:this.selector.getAttribute("isContentEditable")},b.prototype.addBindings=function(){var a,b,c,d=this,e=this.selector.nodeName.toLowerCase();this.isTextarea="textarea"===e,this.isInput="input"===e,this.wrapper.addEventListener("click",function(){d.selector.focus()}),this.valueMethod=this.selector[this.isTextarea||this.isInput?"value":"innerText"],this.isNewMenu=!0,this.selector.setAttribute("autocomplete","off"),this.selector.addEventListener("keydown",function(e){if(this.getAttribute("readOnly"))return a=!0,c=!0,void(b=!0);a=!1,c=!1,b=!1;var f=gadgetui.keyCode;switch(e.keyCode){case f.PAGE_UP:a=!0,this._move("previousPage",e);break;case f.PAGE_DOWN:a=!0,this._move("nextPage",e);break;case f.UP:a=!0,this._keyEvent("previous",e);break;case f.DOWN:a=!0,this._keyEvent("next",e);break;case f.ENTER:d.menu.active&&(a=!0,e.preventDefault(),d.menu.select(e));break;case f.BACKSPACE:if(!this.value.length&&d.items.length){var g=this.previousSibling;d.remove(g)}break;case f.TAB:d.menu.active&&d.menu.select(e);break;case f.ESCAPE:"none"!==d.menu.element.style.display&&(this.isMultiLine||this._value(this.term),this.close(e),e.preventDefault());break;default:b=!0,d._searchTimeout(e)}}),this.selector.addEventListener("keypress",function(c){if(a)return a=!1,void(this.isMultiLine&&"none"===d.menu.element.style.display||c.preventDefault());if(!b){var e=gadgetui.keyCode;switch(c.keyCode){case e.PAGE_UP:this._move("previousPage",c);break;case e.PAGE_DOWN:this._move("nextPage",c);break;case e.UP:this._keyEvent("previous",c);break;case e.DOWN:this._keyEvent("next",c)}}}),this.selector.addEventListener("input",function(a){return c?(c=!1,void a.preventDefault()):void d._searchTimeout(a)}),this.selector.addEventListener("focus",function(){this.selectedItem=null,this.previous=this.value}),this.selector.addEventListener("blur",function(a){return this.cancelBlur?void delete this.cancelBlur:(clearTimeout(this.searching),d.close(a),void d._change(a))}),this.menu.element.addEventListener("mousedown",function(a){a.preventDefault(),this.cancelBlur=!0,gadgetui.util.delay(function(){delete this.cancelBlur});var b=d.menu.element;a.target.classList.contains("gadgetui-lookuplist-item")||gadgetui.util.delay(function(){this.document.one("mousedown",function(a){a.target===d.menu.element||a.target===b||gadgetui.util.contains(b,a.target)||d.close()})})}),this.menu.element.addEventListener("menuselect",function(a){var b=a.detail,c=d.previous;d.menu.element!==document.activeElement&&(d.menu.element.focus(),d.previous=c,gadgetui.util.delay(function(){d.previous=c,d.selectedItem=b})),d._value(b.value),d.term=d._value(),d.close(a),d.selectedItem=b,d.checkForDuplicate(b)||d.add(b)})},b.prototype._renderItem=function(a){var b,c=document.createElement("div");return gadgetui.util.addClass(c,"gadgetui-lookuplist-input-item-wrapper"),b=document.createElement("div"),gadgetui.util.addClass(b,"gadgetui-lookuplist-input-item"),b.innerHTML=this.labelRenderer(a),c.appendChild(b),c},b.prototype._renderItemCancel=function(a,b){var c=gadgetui.util.setStyle,d=document.createElement("span"),e=gadgetui.util.getNumberValue(gadgetui.util.getStyle(b,"width"))+6;return gadgetui.util.addClass(d,"oi"),d.setAttribute("data-glyph","circle-x"),c(d,"font-size",12),c(d,"opacity",".5"),c(d,"left",e),c(d,"position","absolute"),c(d,"cursor","pointer"),c(d,"top",3),d},b.prototype.add=function(a){var b,c,d,e,f=this;d=this.itemRenderer(a),d.setAttribute("data-value",a.value),this.wrapper.insertBefore(d,this.selector),e=this.itemCancelRenderer(a,d),void 0!==e&&(d.appendChild(e),e.addEventListener("click",function(){f.remove(this.parentNode)})),this.selector.value="",this.items.push(a),this.emitEvents===!0&&gadgetui.util.trigger(this.selector,"gadgetui-lookuplist-input-add",a),void 0!==this.func&&this.func(a,"add"),void 0!==this.model&&(b=this.selector.getAttribute("gadgetui-bind"),null!==b&&void 0!==b&&(c=this.model.get(b),typeof c===Array&&(c=[]),c.push(a),this.model.set(b,c)))},b.prototype.remove=function(a){var b,c,d,e,f=this,g=a.getAttribute("data-value");for(a.parentNode.removeChild(a),c=0;c<this.items.length;c++)this.items[c].value===g&&(b=this.items.splice(c,1));void 0!==this.model&&(d=this.selector.getAttribute("gadgetui-bind"),null!==d&&void 0!==d&&(e=this.model.get(d),e.forEach(function(a,b){return a.value===g?(e.splice(b,1),void 0!==f.func&&f.func(a,"remove"),f.emitEvents===!0&&gadgetui.util.trigger(f.selector,"gadgetui-lookuplist-input-remove",a),f.model.set(d,e),!1):void 0})))},b.prototype.reset=function(){for(;this.wrapper.firstChild&&this.wrapper.firstChild!==this.selector;)this.wrapper.removeChild(this.wrapper.firstChild);this.items=[],void 0!==this.model&&(prop=this.el.getAttribute("gadget-ui-bind"),list=this.model.set(prop,[]))},b.prototype.destroy=function(){clearTimeout(this.searching),this.menu.element.remove(),this.liveRegion.remove()},b.prototype._setOption=function(a,b){this._super(a,b),"source"===a&&this._initSource(),"appendTo"===a&&this.menu.element.appendTo(this._appendTo()),"disabled"===a&&b&&this.xhr&&this.xhr.abort()},b.prototype._appendTo=function(){var a=this.options.appendTo;return a&&(a=a.jquery||a.nodeType?$(a):this.document.find(a).eq(0)),a&&a[0]||(a=this.element.closest(".ui-front")),a.length||(a=this.document[0].body),a},b.prototype._searchTimeout=function(a){var b=this;clearTimeout(this.searching),this.searching=gadgetui.util.delay(function(){var c=this.term===b.selector.value,d="none"!==b.menu.element.style.display,e=a.altKey||a.ctrlKey||a.metaKey||a.shiftKey;(!c||c&&!d&&!e)&&(b.selectedItem=null,b.search(null,a))},this.delay)},b.prototype.search=function(a,b){var c=this;return a=null!=a?a:c.selector.value,this.term=this._value(),a.length<this.minLength?this.close(b):this._search(a)},b.prototype._search=function(a){this.pending++,this.cancelSearch=!1,this.source({term:a},this._response())},b.prototype._response=function(){var a=this,b=(++this.requestIndex,function(b){a.__response(b),a.pending--}),c=function(){return b.apply(a,arguments)};return c},b.prototype.__response=function(a){a=this.makeUnique(a),a&&a.length&&(a=this._normalize(a)),this.selector.dispatchEvent(new CustomEvent("response",{content:a})),!this.disabled&&a&&a.length&&!this.cancelSearch?(this._suggest(a),this.selector.dispatchEvent(new Event("open"))):this._close()},b.prototype.close=function(a){this.cancelSearch=!0,this._close(a)},b.prototype._close=function(){"none"!==this.menu.element.style.display&&(this.menu.element.style.display="none",this.menu.element.blur(),this.isNewMenu=!0)},b.prototype._change=function(){},b.prototype._normalize=function(a){return a.length&&a[0].label&&a[0].value?a:a.map(function(a){return"string"==typeof a?{label:a,value:a}:(a.label=a.label||a.value,a.value=a.value||a.label,a)})},b.prototype._suggest=function(a){for(var b=this.menu.element;b.firstChild;)b.removeChild(b.firstChild);this._renderMenu(a),this.isNewMenu=!0,b.style.display="block",this._resizeMenu(),this.position.of=this.element},b.prototype._resizeMenu=function(){this.menu.element},b.prototype._renderMenu=function(a){var b,c=this,d=Math.min(this.maxSuggestions,a.length);for(b=0;d>b;b++)c._renderItemData(a[b])},b.prototype._renderItemData=function(a){var b=this,c=this.menuItemRenderer(a);c.addEventListener("click",function(){var c=new CustomEvent("menuselect",{detail:a});b.menu.element.dispatchEvent(c)}),this.menu.element.appendChild(c)},b.prototype._renderMenuItem=function(a){var b=document.createElement("div");return gadgetui.util.addClass(b,"gadgetui-lookuplist-item"),b.setAttribute("value",a.value),b.innerText=this.labelRenderer(a),b},b.prototype._renderLabel=function(a){return a.label},b.prototype._move=function(a,b){return"none"!==!this.menu.element.style.display?void this.search(null,b):this.menu.element.isFirstItem()&&/^previous/.test(a)||this.menu.element.isLastItem()&&/^next/.test(a)?(this.isMultiLine||this._value(this.term),void this.menu.blur()):void this.menu[a](b)},b.prototype.widget=function(){return this.menu.element},b.prototype._value=function(){return this.isInput?this.selector.value:this.selector.innerText},b.prototype._keyEvent=function(a,b){this.isMultiLine&&"none"===this.menu.element.style.display||(this._move(a,b),b.preventDefault())},b.prototype.config=function(a){a=void 0===a?{}:a,void 0!==this.selector.getAttribute("gadgetui-bind")&&(this.model=void 0===a.model?gadgetui.model:a.model),this.width=void 0===a.width?void 0:a.width,this.func=void 0===a.func?void 0:a.func,this.filter=void 0===a.filter?this._filter:a.filter,this.labelRenderer=void 0===a.labelRenderer?this._renderLabel:a.labelRenderer,this.itemRenderer=void 0===a.itemRenderer?this._renderItem:a.itemRenderer,this.menuItemRenderer=void 0===a.menuItemRenderer?this._renderMenuItem:a.menuItemRenderer,this.itemCancelRenderer=void 0===a.itemCancelRenderer?this._renderItemCancel:a.itemCancelRenderer,this.emitEvents=void 0===a.emitEvents?!0:a.emitEvents,this.datasource=void 0===a.datasource?void 0!==a.lookupList?a.lookupList:!0:a.datasource,this.minLength=void 0===a.minLength?0:a.minLength,this.disabled=void 0===a.disabled?!1:a.disabled,this.maxSuggestions=void 0===a.maxSuggestions?20:a.maxSuggestions,this.position=void 0===a.position?{my:"left top",at:"left bottom",collision:"none"}:a.position,this.autoFocus=void 0===a.autoFocus?!1:a.autoFocus,this.requestIndex=0},c.prototype.setInitialValue=function(){this.selector.value=this.value.id},c.prototype.addControl=function(){this.wrapper=document.createElement("div"),this.label=document.createElement("div"),gadgetui.util.addClass(this.wrapper,"gadgetui-selectinput-div"),gadgetui.util.addClass(this.label,"gadgetui-selectinput-label"),this.label.setAttribute("gadgetui-bind",this.selector.getAttribute("gadgetui-bind")),this.label.innerHTML=this.value.text,this.selector.parentNode.insertBefore(this.wrapper,this.selector),this.wrapper=this.selector.previousSibling,this.selector.parentNode.removeChild(this.selector),this.wrapper.appendChild(this.selector),this.selector.parentNode.insertBefore(this.label,this.selector)},c.prototype.addCSS=function(){var a,b,c=gadgetui.util.setStyle,d=gadgetui.util.getStyle(this.selector);c(this.selector,"min-width","100px"),c(this.selector,"font-size",d.fontSize),b=gadgetui.util.getStyle(this.selector.parentNode),a=gadgetui.util.getNumberValue(b.height)-2,this.label.setAttribute("style",""),c(this.label,"padding-top","2px"),c(this.label,"height",a+"px"),c(this.label,"margin-left","9px"),navigator.userAgent.match(/Edge/)?c(this.selector,"margin-left","5px"):navigator.userAgent.match(/MSIE/)&&(c(this.selector,"margin-top","0px"),c(this.selector,"margin-left","5px"))},c.prototype.addBindings=function(){var a=this,b=gadgetui.util.setStyle;this.label.addEventListener(this.activate,function(c){b(a.label,"display","none"),b(a.selector,"display","inline-block"),c.preventDefault()}),this.selector.addEventListener("blur",function(){b(a.label,"display","inline-block"),b(a.selector,"display","none")}),this.selector.addEventListener("change",function(b){setTimeout(function(){var c=b.target.value,d=b.target[b.target.selectedIndex].innerHTML;0===c.trim().length&&(c=0),a.label.innerText=d,void 0!==a.model&&void 0===a.selector.getAttribute("gadgetui-bind")&&a.model.set(this.name,{id:c,text:d}),a.emitEvents===!0&&gadgetui.util.trigger(a.selector,"gadgetui-input-change",{id:c,text:d}),void 0!==a.func&&a.func({id:c,text:d}),a.value={id:c,text:d}},100)}),this.selector.addEventListener("mouseleave",function(){a.selector!==document.activeElement&&(b(a.label,"display","inline-block"),b(a.selector,"display","none"))})},c.prototype.config=function(a){a=void 0===a?{}:a,this.model=void 0===a.model?void 0:a.model,this.func=void 0===a.func?void 0:a.func,this.emitEvents=void 0===a.emitEvents?!0:a.emitEvents,this.activate=void 0===a.activate?"mouseenter":a.activate,this.value=void 0===a.value?{id:this.selector[this.selector.selectedIndex].value,text:this.selector[this.selector.selectedIndex].innerHTML}:a.value},d.prototype.addControl=function(){this.wrapper=document.createElement("div"),this.labelDiv=document.createElement("div"),this.inputDiv=document.createElement("div"),this.label=document.createElement("input"),this.label.setAttribute("type","text"),this.label.setAttribute("data-active","false"),this.label.setAttribute("readonly","true"),this.label.setAttribute("value",this.value),this.label.setAttribute("gadgetui-bind",this.selector.getAttribute("gadgetui-bind")),this.labelDiv.appendChild(this.label),this.selector.parentNode.insertBefore(this.wrapper,this.selector),this.selector.parentNode.removeChild(this.selector),this.inputDiv.appendChild(this.selector),this.wrapper.appendChild(this.inputDiv),this.selector.parentNode.parentNode.insertBefore(this.labelDiv,this.inputDiv),this.wrapper=this.selector.parentNode.parentNode,this.labelDiv=this.wrapper.childNodes[0],this.label=this.labelDiv.childNodes[0],this.inputDiv=this.wrapper.childNodes[1]},d.prototype.setInitialValue=function(){var a=this.selector.value,b=this.selector.getAttribute("placeholder");0===a.length&&(a=null!==b&&void 0!==b&&b.length>0?b:" ... "),this.value=a},d.prototype.setLineHeight=function(){var a=this.selector.offsetHeight;this.lineHeight=a},d.prototype.setFont=function(){var a=gadgetui.util.getStyle(this.selector),b=a.fontFamily+" "+a.fontSize+" "+a.fontWeight+" "+a.fontVariant;this.font=b},d.prototype.setWidth=function(){this.width=gadgetui.util.textWidth(this.selector.value,this.font)+10,10===this.width&&(this.width=this.maxWidth)},d.prototype.setMaxWidth=function(){var a=gadgetui.util.getStyle(this.selector.parentNode.parentNode);this.maxWidth=gadgetui.util.getNumberValue(a.width)},d.prototype.addCSS=function(){var a=gadgetui.util.getStyle(this.selector),b=gadgetui.util.setStyle;gadgetui.util.addClass(this.selector,"gadgetui-textinput"),gadgetui.util.addClass(this.wrapper,"gadgetui-textinput-div"),gadgetui.util.addClass(this.labelDiv,"gadgetui-inputlabel"),gadgetui.util.addClass(this.label,"gadgetui-inputlabelinput"),gadgetui.util.addClass(this.inputDiv,"gadgetui-inputdiv"),b(this.label,"background","none"),b(this.label,"padding-left","4px"),b(this.label,"border"," 1px solid transparent"),b(this.label,"width",this.width+"px"),b(this.label,"font-family",a.fontFamily),b(this.label,"font-size",a.fontSize),b(this.label,"font-weight",a.fontWeight),b(this.label,"font-variant",a.fontVariant),b(this.label,"max-width",""),b(this.label,"min-width",this.minWidth+"px"),this.lineHeight>20&&(b(this.wrapper,"min-height",this.lineHeight+"px"),b(this.labelDiv,"min-height",this.lineHeight+"px"),b(this.inputDiv,"min-height",this.lineHeight+"px")),b(this.labelDiv,"height",this.lineHeight+"px"),b(this.labelDiv,"font-size",a.fontSize),b(this.labelDiv,"display","block"),b(this.inputDiv,"height",this.lineHeight+"px"),b(this.inputDiv,"font-size",a.fontSize),b(this.inputDiv,"display","block"),b(this.selector,"padding-left","4px"),b(this.selector,"border","1px solid "+this.borderColor),b(this.selector,"font-family",a.fontFamily),b(this.selector,"font-size",a.fontSize),b(this.selector,"font-weight",a.fontWeight),b(this.selector,"font-variant",a.fontVariant),b(this.selector,"width",this.width+"px"),b(this.selector,"min-width",this.minWidth+"px"),this.selector.setAttribute("placeholder",this.value),b(this.inputDiv,"display","none"),this.maxWidth>10&&this.enforceMaxWidth===!0&&(b(this.label,"max-width",this.maxWidth),b(this.selector,"max-width",this.maxWidth),this.maxWidth<this.width&&(this.label.value=gadgetui.util.fitText(this.value,this.font,this.maxWidth)))},d.prototype.setControlWidth=function(a){var b=parseInt(gadgetui.util.textWidth(a,this.font),10),c=gadgetui.util.setStyle;b<this.minWidth&&(b=this.minWidth),c(this.selector,"width",b+30+"px"),c(this.label,"width",b+30+"px")},d.prototype.addBindings=function(){var a=this;this.label.addEventListener(a.activate,function(){!a.useActive||"false"!==a.label.getAttribute("data-active")&&void 0!==a.label.getAttribute("data-active")?setTimeout(function(){var b,c=gadgetui.util.setStyle;gadgetui.util.mouseWithin(a.label,gadgetui.mousePosition)===!0&&(c(a.labelDiv,"display","none"),c(a.inputDiv,"display","block"),a.setControlWidth(a.selector.value),"click"===a.activate&&a.selector.focus(),a.emitEvents===!0&&(b=new Event("gadgetui-input-show"),a.selector.dispatchEvent(b)))},a.delay):a.label.setAttribute("data-active","true")}),this.selector.addEventListener("focus",function(a){a.preventDefault()}),this.selector.addEventListener("keyup",function(b){13===parseInt(b.keyCode,10)&&this.blur(),a.setControlWidth(this.value)}),this.selector.addEventListener("change",function(b){setTimeout(function(){var c,d=b.target.value;0===d.length&&void 0!==a.selector.getAttribute("placeholder")&&(d=a.selector.getAttribute("placeholder")),c=gadgetui.util.textWidth(d,a.font),a.maxWidth<c&&(d=gadgetui.util.fitText(d,a.font,a.maxWidth)),a.label.value=d,void 0!==a.model&&void 0===a.selector.getAttribute("gadgetui-bind")&&a.model.set(a.selector.name,b.target.value),a.emitEvents===!0&&gadgetui.util.trigger(a.selector,"gadgetui-input-change",{text:b.target.value}),void 0!==a.func&&a.func({text:b.target.value})},200)}),this.selector.addEventListener("mouseleave",function(){var b=gadgetui.util.setStyle;this!==document.activeElement&&(b(a.labelDiv,"display","block"),b(a.inputDiv,"display","none"),b(a.label,"maxWidth",a.maxWidth))}),this.selector.addEventListener("blur",function(){var b=gadgetui.util.setStyle;b(a.inputDiv,"display","none"),b(a.labelDiv,"display","block"),a.label.setAttribute("data-active","false"),b(a.selector,"maxWidth",a.maxWidth),b(a.label,"maxWidth",a.maxWidth)})},d.prototype.config=function(a){a=void 0===a?{}:a,this.borderColor=void 0===a.borderColor?"#d0d0d0":a.borderColor,this.useActive=void 0===a.useActive?!1:a.useActive,this.model=void 0===a.model?this.model:a.model,this.func=void 0===a.func?void 0:a.func,this.emitEvents=void 0===a.emitEvents?!0:a.emitEvents,this.activate=void 0===a.activate?"mouseenter":a.activate,this.delay=void 0===a.delay?10:a.delay,this.minWidth=void 0===a.minWidth?100:a.minWidth,this.enforceMaxWidth=void 0===a.enforceMaxWidth?!1:a.enforceMaxWidth},{TextInput:d,SelectInput:c,ComboBox:a,LookupListInput:b}}(),gadgetui.util=function(){return{split:function(a){return a.split(/,\s*/)},extractLast:function(a){return this.split(a).pop()},getNumberValue:function(a){return isNaN(Number(a))?Number(a.substring(0,a.length-2)):a},addClass:function(a,b){a.classList?a.classList.add(b):a.className+=" "+b},getOffset:function(a){var b=a.getBoundingClientRect();return{top:b.top+document.body.scrollTop,left:b.left+document.body.scrollLeft}},getParentsUntil:function(a,b,c){var d=[];if(b)var e=b.charAt(0);if(c)var f=c.charAt(0);for(;a&&a!==document;a=a.parentNode){if(b){if("."===e&&a.classList.contains(b.substr(1)))break;if("#"===e&&a.id===b.substr(1))break;if("["===e&&a.hasAttribute(b.substr(1,b.length-1)))break;if(a.tagName.toLowerCase()===b)break}c?("."===f&&a.classList.contains(c.substr(1))&&d.push(a),"#"===f&&a.id===c.substr(1)&&d.push(a),"["===f&&a.hasAttribute(c.substr(1,c.length-1))&&d.push(a),a.tagName.toLowerCase()===c&&d.push(a)):d.push(a)}return 0===d.length?null:d},getRelativeParentOffset:function(a){var b,c,d=gadgetui.util.getParentsUntil(a,"body"),e=0,f=0;for(b=0;b<d.length;b++)"relative"===d[b].style.position&&(c=gadgetui.util.getOffset(d[b]),c.left>e&&(e=c.left),c.top>f&&(f=c.top));return{left:e,top:f}},Id:function(){return(100*Math.random()).toString().replace(/\./g,"")},bind:function(a,b){var c=a.getAttribute("gadgetui-bind");void 0!==c&&void 0!==b&&b.bind(c,a)},mouseCoords:function(a){return a.pageX||a.pageY?{x:a.pageX,y:a.pageY}:{x:a.clientX+document.body.scrollLeft-document.body.clientLeft,y:a.clientY+document.body.scrollTop-document.body.clientTop}},mouseWithin:function(a,b){var c=a.getBoundingClientRect();return b.x>=c.left&&b.x<=c.right&&b.y>=c.top&&b.y<=c.bottom?!0:!1},getStyle:function(a,b){return void 0!==window.getComputedStyle?void 0!==b?window.getComputedStyle(a,null).getPropertyValue(b):window.getComputedStyle(a,null):void 0!==b?a.currentStyle[b]:a.currentStyle},draggable:function(a){function b(a){e=a,h=f-e.offsetLeft,i=g-e.offsetTop}function c(a){f=document.all?window.event.clientX:a.pageX,g=document.all?window.event.clientY:a.pageY,null!==e&&(e.style.left=f-h+"px",e.style.top=g-i+"px")}function d(b){console.log(b);var c=new CustomEvent("drag_end",{detail:{top:gadgetui.util.getStyle(a,"top"),left:gadgetui.util.getStyle(a,"left")}});a.dispatchEvent(c),e=null}var e=null,f=0,g=0,h=0,i=0;a.onmousedown=function(){return b(this),!1},document.onmousemove=c,document.onmouseup=d},textWidth:function(a,b){gadgetui.util.textWidthEl||(gadgetui.util.textWidthEl=document.createElement("div"),gadgetui.util.textWidthEl.setAttribute("id","gadgetui-textWidth"),gadgetui.util.textWidthEl.setAttribute("style","display: none;"),document.body.appendChild(gadgetui.util.textWidthEl));var c,d=a;return d.length>0&&(gadgetui.util.textWidthEl.innerText=d,d=void 0===d?"":d.replace(/\s/g,"&nbsp;")),gadgetui.util.textWidthEl.innertText=d,gadgetui.util.textWidthEl.style.fontFamily=b.fontFamily,gadgetui.util.textWidthEl.style.fontSize=b.fontSize,gadgetui.util.textWidthEl.style.fontWeight=b.fontWeight,gadgetui.util.textWidthEl.style.fontVariant=b.fontVariant,gadgetui.util.textWidthEl.style.display="inline",c=gadgetui.util.textWidthEl.offsetWidth,gadgetui.util.textWidthEl.style.display="none",c},fitText:function(a,b,c){var d,e=gadgetui.util.TextWidth(a,b),f=gadgetui.util.TextWidth("...",b);if(c>e)return a;for(d=Math.floor(a.length/2)-1;e+f>=c;)a=a.slice(0,d)+a.slice(d+1,a.length),d=Math.floor(a.length/2)-1,e=gadgetui.util.TextWidth(a,font);for(d=Math.floor(a.length/2)-1,a=a.slice(0,d)+"..."+a.slice(d,a.length);" "===a.substring(d-1,d);)a=a.slice(0,d-1)+a.slice(d,a.length),d-=1;for(;" "===a.substring(d+3,d+4);)a=a.slice(0,d+3)+a.slice(d+4,a.length),d-=1;return a},createElement:function(a){var b=document.createElement(a);return b.setAttribute("style",""),b},addStyle:function(a,b){var c=a.getAttribute("style"),d=null!==c?c:"";a.setAttribute("style",d+" "+b+";")},isNumeric:function(a){return!isNaN(parseFloat(a))&&isFinite(a)},setStyle:function(a,b,c){var d,e=a.getAttribute("style"),f=null!==e?e:"",g="("+b+")+ *\\:[^\\;]*\\;",h=new RegExp(g,"g");if(gadgetui.util.isNumeric(c)===!0)switch(b){case"opacity":case"z-index":case"font-weight":break;default:c+="px"}d=f.search(h)>=0?f.replace(h,b+": "+c+";"):f+" "+b+": "+c+";",a.setAttribute("style",d)},encode:function(a){return a},trigger:function(a,b,c){a.dispatchEvent(new CustomEvent(b,{detail:c}))},getMaxZIndex:function(){for(var a=document.querySelectorAll("*"),b=0,c=0;c<a.length;c++){var d=gadgetui.util.getStyle(a[c],"z-index");d>b&&"auto"!=d&&(b=d)}return b},grep:function(a,b,c){for(var d,e=[],f=0,g=a.length,h=!c;g>f;f++)d=!b(a[f],f),d!==h&&e.push(a[f]);return e},delay:function(a,b){function c(){return a.apply(d,arguments)}var d=this;return setTimeout(c,b||0)},contains:function(a,b){for(var c=a.parentNode;null!=c;){if(c==b)return!0;c=c.parentNode}return!1}}}();
//# sourceMappingURL=../gadget-ui.min.js.map