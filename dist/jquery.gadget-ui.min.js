"use strict";var gadgetui={keyCode:{BACKSPACE:8,COMMA:188,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,LEFT:37,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SPACE:32,TAB:9,UP:38}};document.addEventListener("mousemove",function(a){a=a||window.event,gadgetui.mousePosition=gadgetui.util.mouseCoords(a)}),gadgetui.model=function(a){function b(a,b){this.data=a,this.elements=[],void 0!==b&&this.bind(b)}var c={};return b.prototype.handleEvent=function(b){var c,d;switch(b.type){case"change":for(c=0;c<this.elements.length;c++)d=this.elements[c],void 0===b.originalSource&&(b.originalSource="BindableObject.handleEvent['change']"),b.target.name===d.prop&&"BindableObject.updateDomElement"!==b.originalSource&&(b.target.type.match(/select/)?this.change({id:a(b.target).val(),text:a(b.target).find("option:selected").text()},b,d.prop):this.change(b.target.value,b,d.prop))}},b.prototype.change=function(a,b,c){var d,e;if(void 0===b.originalSource&&(b.originalSource="BindableObject.change"),console.log("change : Source: "+b.originalSource),void 0===c)this.data=a;else{if("object"!=typeof this.data)throw"Attempt to treat a simple value as an object with properties. Change fails.";if(void 0===this.data[c])throw"Property '"+c+"' of object is undefined.";this.data[c]=a}for(d=0;d<this.elements.length;d++)e=this.elements[d],void 0!==c&&c!==e.prop||void 0===b.target||e.elem[0]===b.target||this.updateDomElement(b,e.elem,a)},b.prototype.updateDom=function(a,b,c){var d,e,f;for(void 0===a.originalSource&&(a.originalSource="BindableObject.updateDom"),d=0;d<this.elements.length;d++)if(e=this.elements[d],void 0===c)if("object"==typeof b)for(f in b)this.elements[d].prop===f&&this.updateDomElement(a,e.elem,b[f]);else this.updateDomElement(a,e.elem,b);else e.prop===c&&this.updateDomElement(a,e.elem,b)},b.prototype.updateDomElement=function(b,c,d){if(void 0===b.originalSource&&(b.originalSource="BindableObject.updateDomElement"),console.log("updateDomElement : selector: { type: "+c[0].nodeName+", name: "+c[0].name+" }"),console.log("updateDomElement : Source: "+b.originalSource),"object"==typeof d?c.is("div")===!0||c.is("span")===!0?c.text(d.text):c.val(d.id):c.is("div")===!0||c.is("span")===!0?c.text(d):c.val(d),"model.set"!==b.originalSource){var e=a.Event("change");e.originalSource="BindableObject.updateDomElement",c.trigger(e)}},b.prototype.bind=function(a,b){var c,d=this;void 0===b?(a.val(this.data),c={elem:a,prop:""}):(a.val(this.data[b]),c={elem:a,prop:b}),a[0].addEventListener?a[0].addEventListener("change",this,!1):a[0].attachEvent("onpropertychange",function(a){if("value"===a.propertyName){var b=a.srcElement,c="SELECT"===b.nodeName?{id:b.value,text:b.options[b.selectedIndex].innerHTML}:b.value;d.change(c,{target:b},b.name)}}),this.elements.push(c)},{BindableObject:b,create:function(a,d,e){c[a]=void 0!==e?new b(d,e):new b(d)},destroy:function(a){delete c[a]},bind:function(a,b){var d=a.split(".");1===d.length?c[a].bind(b):c[d[0]].bind(b,d[1])},exists:function(a){return c.hasOwnProperty(a)?!0:!1},get:function(a){var b=a.split(".");try{if(1===b.length){if(void 0===c[a])throw"Key '"+a+"' does not exist in the model.";return c[a].data}if(void 0===c[b[0]])throw"Key '"+b[0]+"' does not exist in the model.";return c[b[0]].data[b[1]]}catch(d){return void console.log(d)}},set:function(a,b){var d=a.split("."),e={originalSource:"model.set"};if(this.exists(d[0])===!1){if(1!==d.length)throw"Object "+d[0]+"is not yet initialized.";this.create(a,b)}else 1===d.length?(c[a].change(b,e),c[a].updateDom(e,b)):(c[d[0]].change(b,e,d[1]),c[d[0]].updateDom(e,b,d[1]));console.log("model value set: name: "+a+", value: "+b)}}}(jQuery),$.gadgetui={},$.gadgetui.textWidth=function(a,b){$.gadgetui.textWidth.fakeEl||($.gadgetui.textWidth.fakeEl=$('<span id="gadgetui-textWidth">').appendTo(document.body));var c,d=a||$.fn.val()||$.fn.text();return d.length>0&&(d=$.gadgetui.textWidth.fakeEl.text(d).html(),d=void 0===d?"":d.replace(/\s/g,"&nbsp;")),$.gadgetui.textWidth.fakeEl.html(d).css("font",b||$.fn.css("font")),$.gadgetui.textWidth.fakeEl.css("display","inline"),c=$.gadgetui.textWidth.fakeEl.width(),$.gadgetui.textWidth.fakeEl.css("display","none"),c},$.gadgetui.fitText=function(a,b,c){var d,e=$.gadgetui.textWidth(a,b),f=$.gadgetui.textWidth("...",b);if(c>e)return a;for(d=Math.floor(a.length/2)-1;e+f>=c;)a=a.slice(0,d)+a.slice(d+1,a.length),d=Math.floor(a.length/2)-1,e=$.gadgetui.textWidth(a,b);for(d=Math.floor(a.length/2)-1,a=a.slice(0,d)+"..."+a.slice(d,a.length);" "===a.substring(d-1,d);)a=a.slice(0,d-1)+a.slice(d,a.length),d-=1;for(;" "===a.substring(d+3,d+4);)a=a.slice(0,d+3)+a.slice(d+4,a.length),d-=1;return a},String.prototype.trim||(String.prototype.trim=function(){return this.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")}),Array.prototype.forEach||(Array.prototype.forEach=function(a,b){var c,d,e,f,g,h=Object(this),i=h.length,j=i>>>0;if("function"!=typeof a)throw new TypeError;for(c=b?b:void 0,d=0;j>d;)e=d.toString(),f=h.hasOwnProperty(e),f&&(g=h[e],a.call(c,g,d,h)),d+=1;return void 0}),gadgetui.display=function(a){function b(a,b,c){for(var d="undefined"!=typeof c?[c]:document.styleSheets,e=0,f=d.length;f>e;e++){var c=d[e];if(c.cssRules)for(var g=0,h=c.cssRules.length;h>g;g++){var i=c.cssRules[g];if(i.selectorText&&-1!==i.selectorText.split(",").indexOf(b))return i.style[a]}}return null}function c(a,b,c){this.selector=a,this.message=b,this.config(c),this.render(),this.setStyles(),this.setBehaviors(),this.show()}function d(b,c){this.selector=b,void 0!==c&&this.config(c),this.addControl(),this.wrapper=a(this.selector).parent(),this.addCSS(),this.addHeader(),this.icon=a("div div",this.wrapper),this.addBindings(),this.collapse===!0&&this.toggle()}function e(b,c){this.selector=b,void 0!==c&&this.config(c),this.addControl(),this.wrapper=a(this.selector).parent(),this.addHeader(),this.maxmin=a("div div[class~='ui-icon']",this.wrapper),this.addCSS(),this.height=gadgetui.util.getStyle(a(this.selector).parent(),"height"),this.relativeOffsetLeft=gadgetui.util.getRelativeParentOffset(this.selector).left,this.addBindings()}return c.prototype.render=function(){var a='<div class="gadgetui-bubble gadgetui-bubble-'+this.bubbleType+'" id="'+this.id+'">'+this.message;this.closable&&(a+='<span class="ui-icon ui-icon-close"></span>'),a+='<div class="gadgetui-bubble-arrow-outside"></div><div class="gadgetui-bubble-arrow-inside"></div></div>',this.selector.after(a)},c.prototype.show=function(){this.bubbleSelector.show("fade",500)},c.prototype.setStyles=function(){this.setBubbleStyles(),this.calculateArrowPosition(),this.calculateArrowStyle(),this.setBeforeRules(),this.setAfterRules(),this.calculatePosition(),this.bubbleSelector.css("top",this.top).css("left",this.left),a("span",this.bubbleSelector).css("left",this.bubbleWidth-6-this.closeIconSize-2*this.borderWidth).css("position","absolute").css("cursor","pointer").css("top",6)},c.prototype.setBubbleStyles=function(){this.bubbleSelector=a("#"+this.id),this.bubbleSelector.css("margin",0).css("padding",this.padding).css("width",this.width).css("height",this.height).css("line-height",this.lineHeight+"px").css("border-radius",this.borderRadius).css("-moz-border-radius",this.borderRadius).css("-webkit-border-radius",this.borderRadius).css("-webkit-box-shadow",this.shadowSize+"px "+this.shadowSize+"px 4px "+this.boxShadowColor).css("-moz-box-shadow",this.shadowSize+"px "+this.shadowSize+"px 4px "+this.boxShadowColor).css("box-shadow",this.shadowSize+"px "+this.shadowSize+"px 4px "+this.boxShadowColor).css("border",this.borderWidth+"px solid "+this.borderColor).css("background-color",this.backgroundColor).css("position","absolute").css("text-align","left").css("opacity",this.opacity).css("font",this.font).css("z-index",this.zIndex)},c.prototype.setBeforeRules=function(){var b={content:" ",position:"absolute",width:0,height:0,left:this.beforeArrowLeft+"px",top:this.arrowTop+"px",border:this.arrowSize+"px solid",borderColor:this.beforeBorderColor};a("div[class='gadgetui-bubble-arrow-outside']",a("#"+this.id)).addRule(b,0)},c.prototype.setAfterRules=function(){var b={content:" ",position:"absolute",width:0,height:0,left:this.afterArrowLeft+"px",top:this.afterArrowTop+"px",border:this.afterArrowSize+"px solid",borderColor:this.afterBorderColor};a("div[class='gadgetui-bubble-arrow-inside']",a("#"+this.id)).addRule(b,0)},c.prototype.calculatePosition=function(){var b=this;this.relativeOffset=gadgetui.util.getRelativeParentOffset(this.selector),a.each(this.position.split(" "),function(a,c){switch(c){case"top":b.top=b.top-b.relativeOffset.top;break;case"bottom":b.top=b.top+b.selector.outerHeight()-b.relativeOffset.top;break;case"left":break;case"right":b.left=b.left+b.selector.outerWidth()-b.relativeOffset.left;break;case"center":b.left=b.left+b.selector.outerWidth()/2-b.relativeOffset.left}})},c.prototype.calculateArrowPosition=function(){var a,b=2*this.arrowSize,c=2*this.padding,d=this.borderWidth+this.borderRadius+this.arrowSize,e=Math.floor(Math.sqrt(Math.pow(this.borderWidth,2)+Math.pow(this.borderWidth,2)))-1;switch(this.afterArrowSize=this.arrowSize-e,a=(b-2*this.afterArrowSize)/2,this.arrowPositionArray[0]){case"left":this.beforeArrowLeft=-b,this.afterArrowLeft=2*-this.afterArrowSize,this.left=this.left+this.arrowSize-this.borderWidth;break;case"right":this.beforeArrowLeft=this.width+c,this.afterArrowLeft=this.beforeArrowLeft,this.left=this.left-this.bubbleWidth-this.arrowSize+this.borderWidth;break;case"top":this.arrowTop=-b,this.afterArrowTop=-(2*this.afterArrowSize),this.top=this.top+this.arrowSize-this.borderWidth;break;case"bottom":this.arrowTop=this.height+c,this.afterArrowTop=this.arrowTop,this.top=this.top-this.bubbleHeight-this.arrowSize+this.borderWidth}switch(this.arrowPositionArray[1]){case"top":this.arrowTop=this.borderRadius,this.afterArrowTop=this.arrowTop+a,this.top=this.top-d;break;case"bottom":this.arrowTop=this.bubbleHeight-2*this.borderWidth-b-this.borderRadius,this.afterArrowTop=this.arrowTop+a,this.top=this.top-this.bubbleHeight+d;break;case"right":this.beforeArrowLeft=this.bubbleWidth-2*this.borderWidth-b-this.borderRadius,this.afterArrowLeft=this.beforeArrowLeft+e,this.left=this.left-this.bubbleWidth+d;break;case"left":this.beforeArrowLeft=this.borderRadius,this.afterArrowLeft=this.beforeArrowLeft+e,this.left=this.left-d}},c.prototype.calculateArrowStyle=function(){var a=[],b=this.arrowPositionArray[0],c=this.arrowPositionArray[1]+" "+this.arrowDirection;if("middle"===this.arrowDirection)switch(this.arrowPositionArray[0]){case"top":this.beforeBorderColor="transparent transparent "+this.borderColor+" transparent",this.afterBorderColor="transparent transparent #fff transparent";break;case"bottom":this.beforeBorderColor=this.borderColor+" transparent transparent transparent",this.afterBorderColor="#fff transparent transparent transparent";break;case"right":this.beforeBorderColor="transparent transparent transparent "+this.borderColor,this.afterBorderColor="transparent transparent transparent #fff";break;case"left":this.beforeBorderColor="transparent "+this.borderColor+" transparent transparent",this.afterBorderColor="transparent #fff transparent transparent"}else"top"===b||"bottom corner"===c||"top center"===c?(a[0]="transparent",a[2]=this.borderColor):("bottom"===b||"bottom center"===c||"top corner"===c)&&(a[0]=this.borderColor,a[2]="transparent"),"right"===b||"left corner"===c||"right center"===c?(a[1]="transparent",a[3]=this.borderColor):("left"===b||"left center"===c||"right corner"===c)&&(a[1]=this.borderColor,a[3]="transparent"),this.beforeBorderColor=a.toString().replace(/\),/gi,") ").replace(/,transparent/gi," transparent").replace(/transparent,/gi,"transparent "),this.afterBorderColor=this.beforeBorderColor.replace(this.borderColor,"#fff","g")},c.prototype.setBehaviors=function(){var b=this;a("span",this.bubbleSelector).on("click",function(){b.bubbleSelector.hide("fade").remove()}),this.autoClose&&(closeBubble=function(){b.bubbleSelector.hide("fade").remove()},setTimeout(closeBubble,this.autoCloseDelay))},c.prototype.config=function(a){var c=b("color",".ui-state-active");this.bubbleType=void 0===a.bubbleType?"speech":a.bubbleType,this.id="gadgetui-bubble-"+gadgetui.util.Id(),this.height=void 0===a.height?100:a.height,this.position=void 0===a.position?"top right":a.position,this.width=void 0===a.width?200:a.width,this.padding=void 0===a.padding?20:a.padding,this.opacity=void 0===a.opacity?1:a.opacity,this.top=this.selector.offset().top,this.left=this.selector.offset().left,this.shadowColor=void 0===a.shadowColor?c:a.shadowColor,this.shadowSize=2,this.borderColor=void 0===a.borderColor?c:a.borderColor,this.borderWidth=void 0===a.borderWidth?8:a.borderWidth,this.arrowPosition=void 0===a.arrowPosition?"bottom left":a.arrowPosition,this.arrowDirection=void 0===a.arrowDirection?"middle":a.arrowDirection,this.arrowPositionArray=this.arrowPosition.split(" "),this.bubbleWidth=this.width+2*this.padding+2*this.borderWidth,this.bubbleHeight=this.height+2*this.padding+2*this.borderWidth,this.closeIconSize=16,this.arrowSize=void 0===a.arrowSize?25:a.arrowSize,this.backgroundColor=void 0===a.backgroundColor?"#FFFFFF":a.backgroundColor,this.lineHeight=void 0===a.lineHeight?"1.2em":a.lineHeight,this.borderRadius=void 0===a.borderRadius?30:a.borderRadius,this.boxShadowColor=void 0===a.boxShadowColor?c:a.boxShadowColor,this.font=void 0===a.font?"1em Arial sans":a.font,this.zIndex=void 0===a.zIndex?100:a.zIndex,this.closable=void 0===a.closable?!1:a.closable,this.autoClose=void 0===a.autoClose?!1:a.autoClose,this.autoCloseDelay=void 0===a.autoCloseDelay?5e3:a.autoCloseDelay,this.relativeOffset={left:0,top:0}},d.prototype.addBindings=function(){var b=this,c=a("div.gadget-ui-collapsiblePane-header",this.wrapper);c.on("click",function(){b.toggle()})},d.prototype.addHeader=function(){this.wrapper.prepend('<div class="ui-widget-header ui-corner-all gadget-ui-collapsiblePane-header">'+this.title+'<div class="ui-icon ui-icon-triangle-1-n"></div></div>')},d.prototype.addCSS=function(){this.wrapper.css("width",this.width),a(this.selector).css("width",this.interiorWidth).css("padding",this.padding)},d.prototype.addControl=function(){a(this.selector).wrap('<div class="gadget-ui-collapsiblePane ui-corner-all ui-widget-content"></div>')},d.prototype.config=function(b){this.title=void 0===b.title?"":b.title,this.path=void 0===b.path?"/bower_components/gadget-ui/dist/":b.path,this.padding=void 0===b.padding?".5em":b.padding,this.paddingTop=void 0===b.paddingTop?".3em":b.paddingTop,this.width=void 0===b.width?a(this.selector).css("width"):b.width,this.interiorWidth=void 0===b.interiorWidth?"":b.interiorWidth,this.collapse=void 0===b.collapse||b.collapse===!1?!1:!0},d.prototype.toggle=function(){var b,c,d=this,e="ui-icon-triangle-1-s",f="ui-icon-triangle-1-n";"none"===d.selector.css("display")?(b=f,c=e):(b=e,c=f),d.eventName=void 0===d.eventName||"collapse"===d.eventName?"expand":"collapse",d.selector.css("padding",d.padding).css("padding-top",d.paddingTop).toggle("blind",{},200,function(){a(d.icon).addClass(b).removeClass(c),a(this).css("padding",d.padding),d.selector.trigger(d.eventName)})},e.prototype.addBindings=function(){var a=this;this.wrapper.draggable({addClasses:!1}),this.maxmin.on("click",function(){a.minimized?a.expand():a.minimize()})},e.prototype.addHeader=function(){this.wrapper.prepend('<div class="ui-widget-header ui-corner-all gadget-ui-floatingPane-header">'+this.title+'<div class="ui-icon ui-icon-arrow-4"></div></div>')},e.prototype.addCSS=function(){this.wrapper.css("width",this.width).css("minWidth",this.minWidth).css("opacity",this.opacity).css("z-index",this.zIndex),a(this.selector).css("width",this.interiorWidth).css("padding",this.padding),this.maxmin.css("float","right").css("display","inline")},e.prototype.addControl=function(){a(this.selector).wrap('<div class="gadget-ui-floatingPane ui-corner-all ui-widget-content"></div>')},e.prototype.config=function(b){this.title=void 0===b.title?"":b.title,this.path=void 0===b.path?"/bower_components/gadget-ui/dist/":b.path,this.position=void 0===b.position?{my:"right top",at:"right top",of:window}:b.position,this.padding=void 0===b.padding?"15px":b.padding,this.paddingTop=void 0===b.paddingTop?".3em":b.paddingTop,this.width=void 0===b.width?a(this.selector).css("width"):b.width,this.minWidth=this.title.length>0?Math.max(100,10*this.title.length):100,this.height=void 0===b.height?gadgetui.util.getNumberValue(gadgetui.util.getStyle(a(this.selector),"height"))+2*gadgetui.util.getNumberValue(this.padding):b.height,this.interiorWidth=void 0===b.interiorWidth?"":b.interiorWidth,this.opacity=void 0===b.opacity?1:b.opacity,this.zIndex=void 0===b.zIndex?1e5:b.zIndex,this.minimized=!1,this.relativeOffsetLeft=0},e.prototype.expand=function(){var b=this,c=a(this.wrapper).offset(),d=parseInt(new Number(c.left),10)-this.relativeOffsetLeft,e=parseInt(this.width.substr(0,this.width.length-2),10);this.wrapper.animate({left:d-e+b.minWidth},{queue:!1,duration:500},function(){}),this.wrapper.animate({width:this.width},{queue:!1,duration:500},function(){}),this.wrapper.animate({height:this.height},{queue:!1,duration:500,complete:function(){b.maxmin.removeClass("ui-icon-arrow-4-diag").addClass("ui-icon-arrow-4")}}),this.minimized=!1},e.prototype.minimize=function(){var b=this,c=a(this.wrapper).offset(),d=parseInt(new Number(c.left),10)-this.relativeOffsetLeft,e=parseInt(this.width.substr(0,this.width.length-2),10);this.wrapper.animate({left:d+e-b.minWidth},{queue:!1,duration:500},function(){}),this.wrapper.animate({width:b.minWidth},{queue:!1,duration:500,complete:function(){b.maxmin.removeClass("ui-icon-arrow-4").addClass("ui-icon-arrow-4-diag")}}),this.wrapper.animate({height:"50px"},{queue:!1,duration:500},function(){}),this.minimized=!0},{Bubble:c,CollapsiblePane:d,FloatingPane:e}}(jQuery),gadgetui.input=function(a){function b(a,b){this.emitEvents=!0,this.model=gadgetui.model,this.func,this.selector=a,this.config(b),this.setSaveFunc(),this.setDataProviderRefresh(),this.addControl(),this.setCSS(),gadgetui.util.bind(this.selector,this.model),gadgetui.util.bind(this.label,this.model),this.addBehaviors(),this.setStartingValues()}function c(b,c){function d(a){return a.label}this.itemRenderer=d,this.menuItemRenderer=d,this.emitEvents=!0,this.selector=b,void 0!==c&&this.config(c),a(this.selector).wrap('<div class="gadgetui-lookuplist-input-div ui-widget-content ui-corner-all"></div>'),this.addBindings()}function d(a,b){this.selector=a,this.config(b),this.setInitialValue(),this.addControl(),this.addCSS(),this.selector.css("display","none"),gadgetui.util.bind(this.selector,this.model),gadgetui.util.bind(this.label,this.model),this.addBindings()}function e(a,b){this.emitEvents=!0,this.model=gadgetui.model,this.func,this.selector=a,this.config(b),this.setInitialValue(),this.addControl(),this.setLineHeight(),this.setFont(),this.setMaxWidth(),this.setWidth(),this.addCSS(),gadgetui.util.bind(this.selector,this.model),gadgetui.util.bind(this.label,this.model),this.addBindings()}return b.prototype.addControl=function(){a(this.selector).wrap("<div class='gadgetui-combobox'></div>").wrap("<div class='gadgetui-combobox-selectwrapper'></div>").parent().parent().append("<div class='gadgetui-combobox-inputwrapper'><input class='gadgetui-combobox-input' value='' name='custom' type='text' placeholder='"+this.newOption.text+"'/></div>").prepend("<div class='gadgetui-combobox-label' data-id='"+this.id+"'>"+this.text+"</div>"),this.comboBox=a(this.selector).parent().parent(),this.input=a("input[class='gadgetui-combobox-input']",a(this.selector).parent().parent()),this.label=a("div[class='gadgetui-combobox-label']",a(this.selector).parent().parent()),this.label.attr("gadgetui-bind",this.selector.attr("gadgetui-bind")),this.inputWrapper=a("div[class='gadgetui-combobox-inputwrapper']",a(this.selector).parent().parent()),this.selectWrapper=a("div[class='gadgetui-combobox-selectwrapper']",a(this.selector).parent().parent()),this.comboBox.css("opacity",".0"),a.isFunction(this.input.placeholder)&&this.input.placeholder()},b.prototype.setCSS=function(){var a=this,b=new Promise(function(b,c){a.getArrowWidth(b,c)});b.then(function(){a.addCSS()}),b["catch"](function(b){a.arrowWidth=22,console.log(b),a.addCSS()})},b.prototype.getArrowWidth=function(a,b){var c=this,d=new Image;d.onload=function(){c.arrowWidth=this.width,a()},d.onerror=function(){b("Icon was not loaded.")},d.src=this.arrowIcon},b.prototype.addCSS=function(){this.selector.addClass("gadgetui-combobox-select").css("width",this.width).css("border",0).css("display","inline"),this.comboBox.css("position","relative");var a,b,c,d=gadgetui.util.getStyle(this.selector),e=(gadgetui.util.getStyle(this.selectWrapper),this.selector[0].clientWidth),f=0,g=0,h=0,i=0,j=this.borderWidth;c=this.borderWidth+4,this.borderRadius>5&&(h=this.borderRadius-5,c+=h),b=c,a=e-this.arrowWidth-this.borderRadius-4,console.log(navigator.userAgent),navigator.userAgent.match(/(Safari)/)&&!navigator.userAgent.match(/(Chrome)/)?(j=this.borderWidth-2,h=4>h?4:this.borderRadius-1,g=1):navigator.userAgent.match(/Edge/)?(h=1>h?1:this.borderRadius-4,b--):navigator.userAgent.match(/MSIE/)?h=1>h?1:this.borderRadius-4:navigator.userAgent.match(/Trident/)?h=2>h?2:this.borderRadius-3:navigator.userAgent.match(/Chrome/)&&(h=4>h?4:this.borderRadius-1,g=1),this.selector.css("margin-top",g).css("padding-left",h),this.inputWrapper.css("position","absolute").css("top",j).css("left",i),this.input.css("display","inline").css("padding-left",f).css("margin-left",b).css("width",a),this.label.css("position","absolute").css("left",c).css("top",this.borderWidth+1).css("margin-left",0),this.selectWrapper.css("display","inline").css("position","absolute").css("padding-bottom","1px").css("left",0),this.comboBox.css("font-size",d.fontSize),this.selectWrapper.css("background-color",this.backgroundColor).css("border",this.border).css("border-radius",this.borderRadius),this.input.css("border",0).css("font-size",d.fontSize).css("background-color",this.inputBackground),this.label.css("font-family",d.fontFamily).css("font-size",d.fontSize).css("font-weight",d.fontWeight),navigator.userAgent.match(/Firefox/)&&(this.selectWrapper.css("background-image","url("+this.arrowIcon+")").css("background-repeat","no-repeat").css("background-position","right center"),this.scaleIconHeight===!0&&this.selectWrapper.css("background-size",this.arrowWidth+"px "+inputHeight+"px")),this.selector.css("-webkit-appearance","none").css("-moz-appearance","window").css("background-image","url('"+this.arrowIcon+"')").css("background-repeat","no-repeat").css("background-position","right center"),this.scaleIconHeight===!0&&this.selectWrapper.css("background-size",this.arrowWidth+"px "+inputHeight+"px"),this.inputWrapper.hide(),this.selectWrapper.hide(),this.comboBox.css("opacity","1")},b.prototype.setSelectOptions=function(){var b,c,d=this;a(d.selector).empty(),a(d.selector).append("<option value='"+d.newOption.id+"'>"+d.newOption.text+"</option>"),a.each(this.dataProvider.data,function(e,f){b=f.id,c=f.text,void 0===c&&(c=b),a(d.selector).append("<option value="+b+">"+c)})},b.prototype.find=function(a){var b;for(b=0;b<this.dataProvider.data.length;b++)if(this.dataProvider.data[b].text===a)return this.dataProvider.data[b].id},b.prototype.getText=function(a){var b,c=parseInt(a,10);for(isNaN(c)===!0&&(c=a),b=0;b<this.dataProvider.data.length;b++)if(this.dataProvider.data[b].id===c)return this.dataProvider.data[b].text},b.prototype.showLabel=function(){this.label.css("display","inline-block"),this.selectWrapper.hide(),this.inputWrapper.hide()},b.prototype.addBehaviors=function(){var b=this;a(this.comboBox).on(this.activate,function(){setTimeout(function(){"none"!=b.label.css("display")&&(console.log("combo mouseenter "),b.selectWrapper.css("display","inline"),b.label.css("display","none"),b.selector.prop("selectedIndex")<=0&&b.inputWrapper.css("display","inline"))},b.delay)}).on("mouseleave",function(){console.log("combo mouseleave "),b.selector.is(":focus")===!1&&b.input.is(":focus")===!1&&b.showLabel()}),b.input.on("click",function(){console.log("input click ")}).on("keyup",function(a){if(console.log("input keyup"),13===a.which){var c=gadgetui.util.encode(b.input.val());b.handleInput(c)}}).on("blur",function(){console.log("input blur"),gadgetui.util.mouseWithin(b.selector,gadgetui.mousePosition)===!0?(b.inputWrapper.hide(),b.selector.focus()):b.showLabel()}),this.selector.on("mouseenter",function(){b.selector.css("display","inline")}).on("click",function(a){console.log("select click"),a.stopPropagation()}).on("change",function(c){var d=c.target.selectedIndex>=0?c.target.selectedIndex:0;parseInt(c.target[d].value,10)!==parseInt(b.id,10)&&(console.log("select change"),c.target.selectedIndex>0?(b.inputWrapper.hide(),b.setValue(c.target[c.target.selectedIndex].value)):(b.inputWrapper.show(),b.setValue(b.newOption.value),b.input.focus()),a(b.selector).trigger("gadgetui-combobox-change",[{id:c.target[c.target.selectedIndex].value,text:c.target[c.target.selectedIndex].innerHTML}]),console.log("label:"+b.label.text()))}).on("blur",function(a){console.log("select blur "),a.stopPropagation(),setTimeout(function(){b.input.is(":focus")===!1&&b.showLabel()},200)}),a("option",this.selector).on("mouseenter",function(){console.log("option mouseenter"),"inline"!==b.selector.css("display")&&b.selector.css("display","inline")})},b.prototype.handleInput=function(a){var b=this.find(a);void 0!==b?(this.selector.val(b),this.label.text(a),this.selector.focus(),this.input.val(""),this.inputWrapper.hide()):void 0===b&&a.length>0&&this.save(a)},b.prototype.triggerSelectChange=function(){console.log("select change");var a=new Event("change",{view:window,bubbles:!0,cancelable:!0});this.selector[0].dispatchEvent(a)},b.prototype.setSaveFunc=function(){if(a.isFunction(this.save)===!0){var b=this.save;this.save=function(a){var c,d,e=this,f=[a],g=this.find(a);return void 0===g&&(console.log("save: "+a),d=new Promise(function(a,d){f.push(a),f.push(d),c=b.apply(e,f),console.log(c)}),d.then(function(b){function c(){e.selector.trigger("gadgetui-combobox-save",{id:b,text:a}),e.input.val(""),e.inputWrapper.hide(),e.id=b,e.dataProvider.refresh()}e.animate===!0?(e.selectWrapper.animate({boxShadow:"0 0 5px "+e.glowColor,borderColor:e.glowColor},e.animateDelay/2),e.selectWrapper.animate({boxShadow:0,borderColor:e.borderColor},e.animateDelay/2,c)):c()}),d["catch"](function(a){e.input.val(""),e.inputWrapper.hide(),console.log(a),e.dataProvider.refresh()})),c}}},b.prototype.setStartingValues=function(){void 0===this.dataProvider.data?this.dataProvider.refresh():this.setControls()},b.prototype.setControls=function(){console.log(this),this.setSelectOptions(),this.setValue(this.id),this.triggerSelectChange()},b.prototype.setValue=function(a){var b=this.getText(a);console.log("setting id:"+a),this.id=void 0===b?this.newOption.id:a,b=void 0===b?this.newOption.text:b,this.text=b,this.label.text(this.text),this.selector.val(this.id)},b.prototype.setDataProviderRefresh=function(){var b,c,d=this,e=this.dataProvider.refresh;this.dataProvider.refresh=function(){var f=this;return a.isFunction(e)===!0&&(b=new Promise(function(a,b){var d=[f,a,b];c=e.apply(this,d)}),b.then(function(){d.selector.trigger("gadgetui-combobox-refresh"),d.setControls()}),b["catch"](function(){console.log("message"),d.setControls()})),c}},b.prototype.config=function(a){void 0!==a&&(this.model=void 0===a.model?this.model:a.model,this.emitEvents=void 0===a.emitEvents?!0:a.emitEvents,this.dataProvider=void 0===a.dataProvider?void 0:a.dataProvider,this.save=void 0===a.save?void 0:a.save,this.activate=void 0===a.activate?"mouseenter":a.activate,this.delay=void 0===a.delay?10:a.delay,this.inputBackground=void 0===a.inputBackground?"#ffffff":a.inputBackground,this.borderWidth=void 0===a.borderWidth?1:a.borderWidth,this.borderColor=void 0===a.borderColor?"#d0d0d0":a.borderColor,this.borderStyle=void 0===a.borderStyle?"solid":a.borderStyle,this.borderRadius=void 0===a.borderRadius?5:a.borderRadius,this.border=this.borderWidth+"px "+this.borderStyle+" "+this.borderColor,this.width=void 0===a.width?150:a.width,this.newOption=void 0===a.newOption?{text:"...",id:0}:a.newOption,this.id=void 0===a.id?this.newOption.id:a.id,this.arrowIcon=void 0===a.arrowIcon?"/bower_components/gadget-ui/dist/img/arrow.png":a.arrowIcon,this.scaleIconHeight=void 0===a.scaleIconHeight?!1:a.scaleIconHeight,this.animate=void 0===a.animate?!0:a.animate,this.glowColor=void 0===a.glowColor?"rgb(82, 168, 236)":a.glowColor,this.animateDelay=void 0===a.animateDelay?500:a.animateDelay)},c.prototype.addBindings=function(){var b=this;a(this.selector).parent().on("click",function(){a(b).focus()}).on("click","div[class~='gadgetui-lookuplist-input-cancel']",function(c){b.remove(b.selector,a(c.target).attr("gadgetui-lookuplist-input-value"))}),a(this.selector).autocomplete({minLength:b.minLength,source:function(c,d){d(a.ui.autocomplete.filter(b.datasource,gadgetui.util.extractLast(c.term)))},focus:function(){return!1},select:function(a,c){var d=gadgetui.util.split(this.value);return d.pop(),b.add(b.selector,c.item),this.value="",this.focus(),!1}}).on("keydown",function(b){if(a(this).css("width",Math.round(.66*a(this).val().length+3)+"em"),b.keyCode===a.ui.keyCode.TAB&&a(this).data("ui-autocomplete").menu.active&&b.preventDefault(),b.keyCode===a.ui.keyCode.BACKSPACE&&0===a(this).val().length){b.preventDefault();var c=a(this).prev("div[class~='gadgetui-lookuplist-input-item-wrapper']");c.remove()}}),a.ui.autocomplete.prototype._renderItem=function(c,d){return"function"==typeof b.menuItemRenderer?a("<li>").attr("data-value",d.value).append(a("<a>").text(b.menuItemRenderer(d))).appendTo(c):a("<li>").append(a("<a>").text(d.label)).appendTo(c)}},c.prototype.add=function(b,c){var d,e;a("<div class='gadgetui-lookuplist-input-item-wrapper'><div class='gadgetui-lookuplist-input-cancel ui-corner-all ui-widget-content' gadgetui-lookuplist-input-value='"+c.value+"'><div class='gadgetui-lookuplist-input-item'>"+this.itemRenderer(c)+"</div></div></div>").insertBefore(b),a(b).val(""),void 0!==c.title&&a("div[class~='gadgetui-lookuplist-input-cancel']",a(b).parent()).last().attr("title",c.title),this.emitEvents===!0&&a(b).trigger("gadgetui-lookuplist-input-add",[c]),void 0!==this.func&&this.func(c,"add"),void 0!==this.model&&(d=a(b).attr("gadgetui-bind"),e=this.model.get(d),a.isArray(e)===!1&&(e=[]),e.push(c),this.model.set(d,e))},c.prototype.remove=function(b,c){a("div[gadgetui-lookuplist-input-value='"+c+"']",a(b).parent()).parent().remove();var d,e,f=this;void 0!==this.model&&(d=a(b).attr("gadgetui-bind"),e=this.model.get(d),a.each(e,function(g,h){return h.value===c?(e.splice(g,1),void 0!==f.func&&f.func(h,"remove"),f.emitEvents===!0&&a(b).trigger("gadgetui-lookuplist-input-remove",[h]),f.model.set(d,e),!1):void 0}))},c.prototype.reset=function(){a(".gadgetui-lookuplist-input-item-wrapper",a(this.el).parent()).empty(),void 0!==this.model&&(prop=a(this.el).attr("gadget-ui-bind"),list=this.model.get(prop),list.length=0)},c.prototype.config=function(b){return void 0!==a(this.selector).attr("gadgetui-bind")&&(this.model=void 0===b.model?gadgetui.model:b.model),this.func=void 0===b.func?void 0:b.func,this.itemRenderer=void 0===b.itemRenderer?this.itemRenderer:b.itemRenderer,this.menuItemRenderer=void 0===b.menuItemRenderer?this.menuItemRenderer:b.menuItemRenderer,this.emitEvents=void 0===b.emitEvents?!0:b.emitEvents,this.datasource=void 0===b.datasource?void 0!==b.lookupList?b.lookupList:!0:b.datasource,this.width=void 0===b.width?void 0:b.width,this.minLength=void 0===b.minLength?0:b.minLength,this},d.prototype.setInitialValue=function(){this.selector.val(this.value.id)},d.prototype.addControl=function(){a(this.selector).wrap("<div class='gadgetui-selectinput-div'></div>"),a(this.selector).parent().prepend("<div class='gadgetui-selectinput-label'>"+this.value.text+"</div>"),this.label=a("div[class='gadgetui-selectinput-label']",a(this.selector).parent()),this.label.attr("gadgetui-bind",this.selector.attr("gadgetui-bind"))
},d.prototype.addCSS=function(){var b,c,d=gadgetui.util.getStyle(a(this.selector));this.selector.css("min-width","100px"),this.selector.css("font-size",d.fontSize),c=gadgetui.util.getStyle(a(this.selector).parent()),b=gadgetui.util.getNumberValue(c.height)-2,this.label.attr("style",""),this.label.css("padding-top","2px"),this.label.css("height",b+"px"),this.label.css("margin-left","9px"),navigator.userAgent.match(/Edge/)?this.selector.css("margin-left","5px"):navigator.userAgent.match(/MSIE/)&&(this.selector.css("margin-top","0px"),this.selector.css("margin-left","5px"))},d.prototype.addBindings=function(){var a=this;this.label.on(this.activate,function(b){a.label.css("display","none"),a.selector.css("display","inline-block"),b.preventDefault()}),this.selector.on("blur",function(){a.label.css("display","inline-block"),a.selector.css("display","none")}),this.selector.on("change",function(b){setTimeout(function(){var c=b.target.value,d=b.target[b.target.selectedIndex].innerHTML;0===c.trim().length&&(c=0),a.label.text(d),void 0!==a.model&&void 0===a.selector.attr("gadgetui-bind")&&a.model.set(this.name,{id:c,text:d}),a.emitEvents===!0&&gadgetui.util.trigger(a.selector,"gadgetui-input-change",{id:c,text:d}),void 0!==a.func&&a.func({id:c,text:d}),a.value={id:c,text:d}},100)}),this.selector.on("mouseleave",function(){a.selector!==document.activeElement&&(a.label.css("display","inline-block"),a.selector.css("display","none"))})},d.prototype.config=function(b){b=void 0===b?{}:b,this.model=void 0===b.model?void 0:b.model,this.func=void 0===b.func?void 0:b.func,this.emitEvents=void 0===b.emitEvents?!0:b.emitEvents,this.activate=void 0===b.activate?"mouseenter":b.activate,this.value=void 0===b.value?{id:a(this.selector).val(),text:a(this.selector)[0][a(this.selector)[0].selectedIndex].innerHTML}:b.value},e.prototype.addControl=function(){this.selector.wrap("<div class='gadgetui-inputdiv'></div>"),this.inputDiv=this.selector.parent(),this.inputDiv.wrap("<div class='gadgetui-textinput-div'></div>"),this.wrapper=this.selector.parent().parent(),this.wrapper.prepend("<div class='gadgetui-inputlabel'><input type='text' data-active='false' class='gadgetui-inputlabelinput' readonly='true' style='border:0;background:none;' value='"+this.value+"'></div>"),this.labelDiv=a("div[class='gadgetui-inputlabel']",this.wrapper),this.label=a("input[class='gadgetui-inputlabelinput']",this.wrapper),this.label.attr("gadgetui-bind",this.selector.attr("gadgetui-bind"))},e.prototype.setInitialValue=function(){var a=this.selector.val(),b=this.selector.attr("placeholder");0===a.length&&(a=null!==b&&void 0!==b&&b.length>0?b:" ... "),this.value=a},e.prototype.setLineHeight=function(){var a=this.selector.outerHeight();this.lineHeight=a},e.prototype.setFont=function(){var a=gadgetui.util.getStyle(this.selector),b=a.fontFamily+" "+a.fontSize+" "+a.fontWeight+" "+a.fontVariant;this.font=b},e.prototype.setWidth=function(){this.width=a.gadgetui.textWidth(this.selector.val(),this.font)+10,10===this.width&&(this.width=this.maxWidth)},e.prototype.setMaxWidth=function(){var a=gadgetui.util.getStyle(this.selector.parent().parent());this.maxWidth=gadgetui.util.getNumberValue(a.width)},e.prototype.addCSS=function(){var b=gadgetui.util.getStyle(this.selector);this.selector.addClass("gadgetui-textinput"),this.label.css("background","none").css("padding-left","4px").css("border"," 1px solid transparent").css("width",this.width).css("font-family",b.fontFamily).css("font-size",b.fontSize).css("font-weight",b.fontWeight).css("font-variant",b.fontVariant).css("max-width","").css("min-width",this.minWidth),this.lineHeight>20&&(this.wrapper.css("min-height",this.lineHeight),this.labelDiv.css("min-height",this.lineHeight),this.inputDiv.css("min-height",this.lineHeight)),this.labelDiv.css("height",this.lineHeight).css("font-size",b.fontSize).css("display","block"),this.inputDiv.css("height",this.lineHeight).css("font-size",b.fontSize).css("display","block"),this.selector.css("padding-left","4px").css("border","1px solid "+this.borderColor).css("font-family",b.fontFamily).css("font-size",b.fontSize).css("font-weight",b.fontWeight).css("font-variant",b.fontVariant).css("width",this.width).css("min-width",this.minWidth),this.selector.attr("placeholder",this.value),this.inputDiv.css("display","none"),this.maxWidth>10&&this.enforceMaxWidth===!0&&(this.label.css("max-width",this.maxWidth),this.selector.css("max-width",this.maxWidth),this.maxWidth<this.width&&this.label.val(a.gadgetui.fitText(this.value,this.font,this.maxWidth)))},e.prototype.setControlWidth=function(b){var c=parseInt(a.gadgetui.textWidth(b,this.font),10);c<this.minWidth&&(c=this.minWidth),this.selector.css("width",c+30),this.label.css("width",c+30)},e.prototype.addBindings=function(){var b=this;this.label.on(b.activate,function(){!b.useActive||"false"!==b.label.attr("data-active")&&void 0!==b.label.attr("data-active")?setTimeout(function(){gadgetui.util.setStyle;b.labelDiv.css("display","none"),b.inputDiv.css("display","block"),b.setControlWidth(b.selector.val()),"click"===b.activate&&b.selector.focus(),b.emitEvents===!0&&b.selector.trigger("gadgetui-input-show",b.selector)},b.delay):b.label.attr("data-active","true")}),this.selector.on("focus",function(a){a.preventDefault()}),this.selector.on("keyup",function(a){13===parseInt(a.keyCode,10)&&this.blur(),b.setControlWidth(this.value)}),this.selector.on("change",function(c){setTimeout(function(){var d,e=c.target.value;0===e.length&&void 0!==b.selector.attr("placeholder")&&(e=b.selector.attr("placeholder")),d=a.gadgetui.textWidth(e,b.font),b.maxWidth<d&&(e=a.gadgetui.fitText(e,b.font,b.maxWidth)),b.label.val(e),void 0!==b.model&&void 0===b.selector.attr("gadgetui-bind")&&b.model.set(b.selector.name,c.target.value),b.emitEvents===!0&&b.selector.trigger("gadgetui-input-change",{text:c.target.value}),void 0!==b.func&&b.func({text:c.target.value})},200)}),this.selector.on("mouseleave",function(){this!==document.activeElement&&(b.labelDiv.css("display","block"),b.inputDiv.css("display","none"),b.label.css("maxWidth",b.maxWidth))}),this.selector.on("blur",function(){b.inputDiv.css("display","none"),b.labelDiv.css("display","block"),b.label.attr("data-active","false"),b.selector.css("maxWidth",b.maxWidth),b.label.css("maxWidth",b.maxWidth)})},e.prototype.config=function(a){a=void 0===a?{}:a,this.borderColor=void 0===a.borderColor?"#d0d0d0":a.borderColor,this.useActive=void 0===a.useActive?!1:a.useActive,this.model=void 0===a.model?this.model:a.model,this.func=void 0===a.func?void 0:a.func,this.emitEvents=void 0===a.emitEvents?!0:a.emitEvents,this.activate=void 0===a.activate?"mouseenter":a.activate,this.delay=void 0===a.delay?10:a.delay,this.enforceMaxWidth=void 0===a.enforceMaxWidth?!1:a.enforceMaxWidth},{ComboBox:b,TextInput:e,SelectInput:d,LookupListInput:c}}(jQuery),gadgetui.util=function(){return{split:function(a){return a.split(/,\s*/)},extractLast:function(a){return this.split(a).pop()},getNumberValue:function(a){return Number(a.substring(0,a.length-2))},addClass:function(a,b){a.classList?a.classList.add(b):a.className+=" "+b},getOffset:function(a){var b=a.getBoundingClientRect();return{top:b.top+document.body.scrollTop,left:b.left+document.body.scrollLeft}},getRelativeParentOffset:function(a){var b,c=a.parentsUntil("body"),d=0,e=0;for(b=0;b<c.length;b++)if("relative"===c[b].style.position){var f=gadgetui.util.getOffset(c[b]);f.left>d&&(d=f.left),f.top>e&&(e=f.top)}return{left:d,top:e}},Id:function(){return(100*Math.random()).toString().replace(/\./g,"")},bind:function(a,b){var c=a[0].getAttribute("gadgetui-bind");void 0!==c&&void 0!==b&&b.bind(c,a)},encode:function(a,b){var c,d=!0,e=!0,f="html";if(void 0!==b&&(d=void 0===b.canon?!0:b.canon,e=void 0===b.encode?!0:b.encode,f=void 0===b.encodeType?"html":b.encodeType),d&&(c=$.encoder.canonicalize(a)),e)switch(f){case"html":c=$.encoder.encodeForHTML(c);break;case"css":c=$.encoder.encodeForCSS(c);break;case"attr":c=$.encoder.encodeForHTMLAttribute(c);break;case"js":c=$.encoder.encodeForJavascript(c);break;case"url":c=$.encoder.encodeForURL(c)}return c},mouseCoords:function(a){return a.pageX||a.pageY?{x:a.pageX,y:a.pageY}:{x:a.clientX+document.body.scrollLeft-document.body.clientLeft,y:a.clientY+document.body.scrollTop-document.body.clientTop}},mouseWithin:function(a,b){var c=a[0].getBoundingClientRect();return b.x>=c.left&&b.x<=c.right&&b.y>=c.top&&b.y<=c.bottom?!0:!1},getStyle:function(a,b){return void 0!==window.getComputedStyle?void 0!==b?window.getComputedStyle(a[0],null).getPropertyValue(b):window.getComputedStyle(a[0],null):void 0!==b?a[0].currentStyle[b]:a[0].currentStyle}}}();