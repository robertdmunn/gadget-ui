var gadgetui={};gadgetui.model=function(a){"use strict";function b(a,b){this.data=a,this.elements=[],void 0!==b&&this.bind(b)}var c={};return b.prototype.handleEvent=function(b){var c=this;switch(b.type){case"change":a.each(this.elements,function(a,d){b.target.name===d.prop&&c.change(b.target.value,d.prop)})}},b.prototype.change=function(b,c){if(void 0===c)this.data=b;else{if("object"!=typeof this.data)throw"Attempt to treat a simple value as an object with properties. Change fails.";this.data[c]=b}a.each(this.elements,function(a,d){if(0===d.prop.length&&"object"!=typeof b)d.elem.val(b);else if(void 0!==c&&"object"==typeof b)d.elem.val(b[c.prop]);else{if(void 0!==c&&"object"!=typeof b)return!0;if("object"!=typeof b)return console.log("No change conditions met for "+d+" to change."),!0;d.elem.val(b[d.prop])}d.elem.trigger("change")})},b.prototype.bind=function(a,b){var c;void 0===b?(a.val(this.data),c={elem:a,prop:""}):(a.val(this.data[b]),c={elem:a,prop:b}),a[0].addEventListener("change",this,!1),this.elements.push(c)},{BindableObject:b,create:function(a,d,e){c[a]=void 0!==e?new b(d,e):new b(d)},destroy:function(a){delete c[a]},bind:function(a,b){var d=a.split(".");1===d.length?c[a].bind(b):c[d[0]].bind(b,d[1])},exists:function(a){return c.hasOwnProperty(a)?!0:!1},get:function(a){var b=a.split(".");try{if(1===b.length){if(void 0===c[a])throw"Key '"+a+"' does not exist in the model.";return c[a].data}if(void 0===c[b[0]])throw"Key '"+b[0]+"' does not exist in the model.";return c[b[0]].data[b[1]]}catch(d){return void console.log(d)}},set:function(a,b){var d=a.split(".");if(this.exists(d[0])===!1){if(1!==d.length)throw"Object "+d[0]+"is not yet initialized.";this.create(a,b)}else 1===d.length?c[a].change(b):c[d[0]].change(b,d[1])}}}(jQuery),gadgetui.input=function(a){function b(b){function c(b,c){var d=c;a(b).parent().on("click",function(){a(b).focus()}).on("click","div[class~='gadgetui-lookuplist-input-cancel']",function(c){d.remove(b,a(c.target).attr("gadgetui-lookuplist-input-value"))}),a(b).on("keydown",function(b){b.keyCode===a.ui.keyCode.TAB&&a(this).data("ui-autocomplete").menu.active&&b.preventDefault()}).autocomplete({minLength:d.minLength,source:function(b,c){c(a.ui.autocomplete.filter(d.lookupList,gadgetui.util.extractLast(b.term)))},focus:function(){return!1},select:function(a,b){var c=gadgetui.util.split(this.value);return c.pop(),d.add(this,b.item),this.value="",this.focus(),!1}}).on("keydown",function(b){if(a(this).css("width",Math.round(.66*a(this).val().length+3)+"em"),b.keyCode===a.ui.keyCode.TAB&&a(this).data("ui-autocomplete").menu.active&&b.preventDefault(),b.keyCode===a.ui.keyCode.BACKSPACE&&0===a(this).val().length){b.preventDefault();var c=a(this).prev("div[class~='gadgetui-lookuplist-input-item-wrapper']");c.remove()}}).autocomplete("instance")._renderItem=function(b,c){return a("<li>").attr("data-value",c.value).append(a("<a>").text(d.labelRenderer(c))).appendTo(b)}}var d,f=this;_renderLabel=function(a){return a.label},this.labelRenderer=_renderLabel,this.lookupList,this.emitEvents=!0,this.model,this.el=void 0===b.el?a("input[gadgetui-lookuplist-input='true']",document):b.el,1===el.length&&void 0!==b.object&&(d=b.object),void 0!==b.config&&f.config(b.config),a.each(this.el,function(b,g){val=a(g).val(),e(g,f.model),a(g).wrap('<div class="gadgetui-lookuplistinput-div ui-widget-content ui-corner-all" style="width:100%;"></div>'),c(g,f,d)})}function c(b){function c(b,c,d){var e,f=this;e=void 0===d?{}:d,a("span",a(b)).on(c.activate,function(){f=this,a(a(f)).hide(),a(a(this).parent()).on("mouseleave",function(){a("select",a(this)).is(":focus")===!1&&a("input",a(this).parent().parent()).is(":focus")===!1&&(a("span",a(this)).css("display","inline"),a("select",a(this)).hide())}),a("select",a(f).parent()).css("min-width","10em").css("display","inline").on("blur",function(){var b,d=this;setTimeout(function(){b=a(d).val(),e.isDirty===!0&&(0===b.trim().length&&(b=" ... "),e[d.name]=a(d).val(),a("span",a(d).parent()).text(b),void 0!==c.model&&void 0===a(d).attr("gadgetui-bind")&&c.model.set(d.name,e[d.name]),e.isDirty=!1,emitEvents===!0&&a(d).trigger("gadgetui-input-change",[e]),void 0!==c.func&&c.func(e)),a("span",a(d).parent()).css("display","inline"),a(d).hide()},100)}).on("keyup",function(b){var c=this;13===parseInt(b.keyCode,10)&&a(c).blur()})}),a(b).on("change",function(b){var c=this,d=b.target.value;0===d.trim().length&&(d=" ... "),e.isDirty=!0,a("span",a(c).parent()).text(d)})}var d,f,g,h=this;return h.emitEvents=!0,h.model,h.func,el=void 0===b.el?a("select[gadgetui-selectinput='true']",document):b.el,1===el.length&&void 0!==b.object&&(g=b.object),void 0!==b.config&&h.config(b.config),a.each(el,function(b,i){d=a(i).val(),f=a(i).attr("placeholder"),e(i,h.model),0===d.length&&(d=void 0!==f&&f.length>0?f:" ... "),a(i).wrap("<div class='gadgetui-selectinput-div'></div>"),a(i).parent().prepend("<span>"+d+"</span>"),a(i).hide(),c(a(i).parent(),h,g)}),this}function d(b){function c(b,c,d){var e,f=this;e=void 0===d?{}:d,a("span",a(b)).on(c.activate,function(){f=this,a(a(f)).hide(),a(a(f).parent()).on("mouseleave",function(){var b=this;a("input",a(b)).is(":focus")===!1&&(a("span",a(b)).css("display","inline"),a("input",a(b)).hide())}),a("input",a(f).parent()).css("min-width","10em").css("width",Math.round(.66*a("input",a(f).parent()).val().length)+"em").css("display","inline").on("blur",function(){var b,d=this;setTimeout(function(){b=a(d).val(),e.isDirty===!0&&(0===b.length&&void 0!==a(d).attr("placeholder")&&(b=a(d).attr("placeholder")),e[d.name]=a(d).val(),a("span",a(d).parent()).text(b),void 0!==c.model&&void 0===a(d).attr("gadgetui-bind")&&c.model.set(d.name,e[d.name]),e.isDirty=!1,c.emitEvents===!0&&a(d).trigger("gadgetui-input-change",[e]),void 0!==c.func&&c.func(e)),a("span",a(d).parent()).css("display","inline"),a("img",a(d).parent()).hide(),a(d).hide()},200)}).on("keyup",function(b){var c=this;13===parseInt(b.keyCode,10)&&a(c).blur(),a(c).css("width",Math.round(.66*a("input",a(c).parent()).val().length)+"em")}),"click"===c.activate&&a("input",a(f).parent()).focus()}),a(b).on("change",function(b){var c=this,d=b.target.value;0===d.trim().length&&(d=" ... "),e.isDirty=!0,a("span",a(c).parent()).text(d)})}var d,f,g,h=this;return h.emitEvents=!0,h.model,h.func,el=void 0===b.el?a("input[gadgetui-textinput='true']",document):b.el,1===el.length&&void 0!==b.object&&(g=b.object),void 0!==b.config&&h.config(b.config),a.each(el,function(b,i){d=a(i).val(),f=a(i).attr("placeholder"),e(i,h.model),0===d.length&&(d=void 0!==f&&f.length>0?f:" ... "),a(i).wrap("<div class='gadgetui-textinput-div'></div>"),a(i).parent().prepend("<span>"+d+"</span>"),a(i).hide(),c(a(i).parent(),h,g)}),this}var e=function(b,c){var d=a(b).attr("gadgetui-bind");void 0!==d&&void 0!==c&&c.bind(d,a(b))};return b.prototype.add=function(b,c){var d,e;a("<div class='gadgetui-lookuplist-input-item-wrapper'><div class='gadgetui-lookuplist-input-cancel ui-corner-all ui-widget-content' gadgetui-lookuplist-input-value='"+c.value+"'><div class='gadgetui-lookuplist-input-item'>"+this.labelRenderer(c)+"</div></div></div>").insertBefore(b),this.emitEvents===!0&&a(b).trigger("gadgetui-lookuplistinput-add",[c]),void 0!==this.func&&this.func(c,"add"),void 0!==this.model&&(d=a(b).attr("gadget-ui-bind"),e=this.model.get(d),e.push(c))},b.prototype.remove=function(b,c){a("div[gadgetui-lookuplist-input-value='"+c+"']",a(b).parent()).remove();var d,e,f=this;d=a(b).attr("gadget-ui-bind"),e=this.model.get(d),a.each(e,function(a,b){return b.value===c?(e.splice(a,1),void 0!==f.func&&f.func(b,"remove"),!1):void 0})},b.prototype.config=function(a){var b=this;return b.model=void 0===a.model?b.model:a.model,b.func=void 0===a.func?void 0:a.func,b.labelRenderer=void 0===a.labelRenderer?b.labelRenderer:a.labelRenderer,b.emitEvents=void 0===a.emitEvents?!0:a.emitEvents,b.lookupList=void 0===a.lookupList?!0:a.lookupList,b.minLength=void 0===a.minLength?0:a.minLength,b},c.prototype.config=function(a){var b=this;return b.model=void 0===a.model?b.model:a.model,b.func=void 0===a.func?void 0:a.func,b.emitEvents=void 0===a.emitEvents?!0:a.emitEvents,b.activate=void 0===a.activate?"mouseenter":a.activate,b},d.prototype.config=function(a){var b=this;b.model=void 0===a.model?b.model:a.model,b.func=void 0===a.func?void 0:a.func,b.emitEvents=void 0===a.emitEvents?!0:a.emitEvents,b.activate=void 0===a.activate?"mouseenter":a.activate},{TextInput:d,SelectInput:c,LookupListInput:b}}(jQuery),gadgetui.display=function(a){function b(b){var c,d,e,f=this;f.selector=b.selector,void 0!==b.config&&f.config(b.config),a(f.selector).wrap('<div class="gadget-ui-collapsiblePane ui-corner-all ui-widget-content"></div>'),c=a(f.selector).parent(),c.css("width",f.width),a(f.selector).css("width",f.interiorWidth).css("padding",f.padding),c.prepend('<div class="ui-widget-header ui-corner-all gadget-ui-collapsiblePane-header">'+f.title+'<div><img src="'+f.path+'img/collapse.png"/></div></div>'),e=a("div.gadget-ui-collapsiblePane-header",c),d=a("div div img",c),e.on("click",function(){f.toggle(d)}),f.collapse===!0&&f.toggle(d)}return b.prototype.config=function(b){this.title=void 0===b.title?"":b.title,this.path=void 0===b.path?"/bower_components/gadget-ui/dist/":b.path,this.padding=void 0===b.padding?".5em":b.padding,this.paddingTop=void 0===b.paddingTop?".3em":b.paddingTop,this.width=void 0===b.width?a(this.selector).css("width"):b.width,this.interiorWidth=void 0===b.interiorWidth?"100%":b.interiorWidth,this.collapse=void 0===b.collapse||b.collapse===!1?!1:!0},b.prototype.toggle=function(b){var c=this,d="none"===c.selector.css("display")?"collapse":"expand";c.eventName=void 0===c.eventName||"collapse"===c.eventName?"expand":"collapse",c.selector.css("padding",c.padding).css("padding-top",c.paddingTop).toggle("blind",{},200,function(){a(b).attr("src",c.path+"img/"+d+".png"),a(this).css("padding",c.padding),c.selector.trigger(c.eventName)})},{CollapsiblePane:b}}(jQuery),gadgetui.util=function(){return{split:function(a){return a.split(/,\s*/)},extractLast:function(a){return this.split(a).pop()}}}();