"use strict";var gadgetui={keyCode:{BACKSPACE:8,COMMA:188,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,LEFT:37,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SPACE:32,TAB:9,UP:38}};document.addEventListener("mousemove",function(t){t=t||window.event,gadgetui.mousePosition=gadgetui.util.mouseCoords(t)}),gadgetui.model=function(){var t={};function e(t,e){this.data=t,this.elements=[],void 0!==e&&this.bind(e)}return e.prototype.handleEvent=function(t){var e,i;switch(t.type){case"change":for(e=0;e<this.elements.length;e++)i=this.elements[e],void 0===t.originalSource&&(t.originalSource="BindableObject.handleEvent['change']"),t.target.name===i.prop&&"BindableObject.updateDomElement"!==t.originalSource&&(t.target.type.match(/select/)?this.change({id:t.target.value,text:t.target.options[t.target.selectedIndex].innerHTML},t,i.prop):this.change(t.target.value,t,i.prop))}},e.prototype.change=function(t,e,i){var o,s;if(void 0===e.originalSource&&(e.originalSource="BindableObject.change"),console.log("change : Source: "+e.originalSource),void 0===i)this.data=t;else{if("object"!=typeof this.data)throw"Attempt to treat a simple value as an object with properties. Change fails.";if(void 0===this.data[i])throw"Property '"+i+"' of object is undefined.";this.data[i]=t}for(o=0;o<this.elements.length;o++)s=this.elements[o],void 0!==i&&i!==s.prop||void 0===e.target||s.elem==e.target||this.updateDomElement(e,s.elem,t)},e.prototype.updateDom=function(t,e,i){var o,s,r;for(void 0===t.originalSource&&(t.originalSource="BindableObject.updateDom"),o=0;o<this.elements.length;o++)if(s=this.elements[o],void 0===i)if("object"==typeof e)for(r in e)this.elements[o].prop===r&&this.updateDomElement(t,s.elem,e[r]);else this.updateDomElement(t,s.elem,e);else s.prop===i&&this.updateDomElement(t,s.elem,e)},e.prototype.updateDomElement=function(t,e,i){var o=function(){switch(e.tagName){case"SELECT":for(;e.firstChild;)e.removeChild(e.firstChild);i.forEach(function(t){var i=document.createElement("option");"object"==typeof t?(i.value=t.id,i.text=t.text):i.text=t,e.appendChild(i),0});break;case"UL":case"OL":for(;e.firstChild;)e.removeChild(e.firstChild);i.forEach(function(t){var i=document.createElement("li");i.textContent=t,e.appendChild(i)})}};if(void 0===t.originalSource&&(t.originalSource="BindableObject.updateDomElement"),"object"==typeof i?"INPUT".indexOf(e.tagName)>=0?e.value=i.id:"OL,UL,SELECT".indexOf(e.tagName)>=0?o():e.textContent=i.text:"INPUT".indexOf(e.tagName)>=0?e.value=i:"OL,UL,SELECT".indexOf(e.tagName)>=0?o():e.textContent=i,"model.set"!==t.originalSource){var s=new Event("change");s.originalSource="model.updateDomElement",e.dispatchEvent(s)}},e.prototype.bind=function(t,e){var i,o=this;void 0===e?(t.value=this.data,i={elem:t,prop:""}):(t.value=this.data[e],i={elem:t,prop:e}),t.addEventListener?t.addEventListener("change",this,!1):t.attachEvent("onpropertychange",function(t){if("value"===t.propertyName){var e=t.srcElement,i="SELECT"===e.nodeName?{id:e.value,text:e.options[e.selectedIndex].innerHTML}:e.value;o.change(i,{target:e},e.name)}}),this.elements.push(i)},{BindableObject:e,create:function(i,o,s){t[i]=void 0!==s?new e(o,s):new e(o)},destroy:function(e){delete t[e]},bind:function(e,i){var o=e.split(".");1===o.length?t[e].bind(i):t[o[0]].bind(i,o[1])},exists:function(e){return!!t.hasOwnProperty(e)},get:function(e){if(null!==e&&void 0!==e){var i=e.split(".");try{if(1===i.length){if(void 0===t[e])throw"Key '"+e+"' does not exist in the model.";return t[e].data}if(void 0===t[i[0]])throw"Key '"+i[0]+"' does not exist in the model.";return t[i[0]].data[i[1]]}catch(t){return void console.log(t)}}else console.log("Expected parameter [name] is not defined.")},set:function(e,i){if(null!==e&&void 0!==e){var o=e.split("."),s={originalSource:"model.set"};if(!1===this.exists(o[0])){if(1!==o.length)throw"Object "+o[0]+"is not yet initialized.";this.create(e,i)}else 1===o.length?(t[e].change(i,s),t[e].updateDom(s,i)):(t[o[0]].change(i,s,o[1]),t[o[0]].updateDom(s,i,o[1]))}else console.log("Expected parameter [name] is not defined.")}}}(),String.prototype.trim||(String.prototype.trim=function(){return this.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")}),Array.prototype.forEach||(Array.prototype.forEach=function(t,e){var i,o,s,r,a=Object(this),n=a.length>>>0;if("function"!=typeof t)throw new TypeError;for(i=e||void 0,o=0;o<n;)s=o.toString(),a.hasOwnProperty(s)&&(r=a[s],t.call(i,r,o,a)),o+=1}),gadgetui.display=function(){function t(t,e,i){this.selector=t,this.message=e,this.config(i),this.render(),this.setStyles(),this.setBehaviors(),this.show()}function e(t,e){this.selector=t,this.config(e),this.addControl(),this.addCSS(),this.addHeader(),this.icon=this.wrapper.querySelector("div.oi"),this.addBindings(),this.height=this.wrapper.offsetHeight,this.headerHeight=this.header.offsetHeight,this.selectorHeight=this.selector.offsetHeight,this.toggle()}function i(t,e){this.selector=t,void 0!==e&&(this.config(e),this.buttons=void 0!==e.buttons?e.buttons:[]),this.setup(e),this.addButtons()}function o(t,e){var i,o,s,r=gadgetui.objects.EventBindings.getAll();for(s={id:o=gadgetui.util.Id(),filename:t.name,width:gadgetui.util.getStyle(e,"width")},this.file=t,this.id=o,this.progressbar=new gadgetui.display.ProgressBar(e,s),this.progressbar.render(),i=0;i<r.length;i++)this[r[i].name]=r[i].func}function s(t,e){this.selector=t,void 0!==e&&this.config(e),this.setup(e)}function r(t,e){this.selector=t,this.configure(e)}return t.prototype.render=function(){var t,e,i,o=document.createElement("div");gadgetui.util.addClass(o,"gadgetui-bubble"),gadgetui.util.addClass(o,"gadgetui-bubble-"+this.bubbleType),o.setAttribute("id",this.id),o.innerHTML=this.message,this.closable&&(t=document.createElement("span"),gadgetui.util.addClass(t,"oi"),t.setAttribute("data-glyph","circle-x")),e=document.createElement("div"),gadgetui.util.addClass(e,"gadgetui-bubble-arrow-outside"),this.selector.parentNode.insertBefore(o,this.selector.nextSibling),this.bubbleSelector=document.getElementById(this.id),this.closable&&this.bubbleSelector.appendChild(t),this.bubbleSelector.appendChild(e),i=document.createElement("div"),gadgetui.util.addClass(i,"gadgetui-bubble-arrow-inside"),this.bubbleSelector.appendChild(i)},t.prototype.show=function(){this.bubbleSelector.style.display="block"},t.prototype.setStyles=function(){this.setBubbleStyles(),this.calculateArrowPosition(),this.calculateArrowStyle(),this.setBeforeRules(),this.setAfterRules(),this.calculatePosition(),this.bubbleSelector.style.top=this.top+"px",this.bubbleSelector.style.left=this.left+"px",this.spanElement=this.bubbleSelector.getElementsByTagName("span");var t=this.bubbleWidth-6-this.closeIconSize-2*this.borderWidth,e=gadgetui.util.setStyle;e(this.spanElement[0],"left",t+"px"),e(this.spanElement[0],"position","absolute"),e(this.spanElement[0],"cursor","pointer"),e(this.spanElement[0],"top","6px"),e(this.spanElement[0],"color",this.borderColor)},t.prototype.setBubbleStyles=function(){var t=gadgetui.util.setStyle;t(this.bubbleSelector,"margin",0),t(this.bubbleSelector,"padding",this.padding+"px"),t(this.bubbleSelector,"width",this.width+"px"),t(this.bubbleSelector,"height",this.height+"px"),t(this.bubbleSelector,"line-height",this.lineHeight+"px"),t(this.bubbleSelector,"border-radius",this.borderRadius+"px"),t(this.bubbleSelector,"-moz-border-radius",this.borderRadius+"px"),t(this.bubbleSelector,"-webkit-border-radius",this.borderRadius+"px"),t(this.bubbleSelector,"-webkit-box-shadow",this.shadowSize+"px "+this.shadowSize+"px 4px "+this.boxShadowColor),t(this.bubbleSelector,"-moz-box-shadow",this.shadowSize+"px "+this.shadowSize+"px 4px "+this.boxShadowColor),t(this.bubbleSelector,"box-shadow",this.shadowSize+"px "+this.shadowSize+"px 4px "+this.boxShadowColor),t(this.bubbleSelector,"border",this.borderWidth+"px solid "+this.borderColor),t(this.bubbleSelector,"background-color",this.backgroundColor),t(this.bubbleSelector,"position","absolute"),t(this.bubbleSelector,"text-align","left"),t(this.bubbleSelector,"opacity",this.opacity),t(this.bubbleSelector,"font",this.font),t(this.bubbleSelector,"z-index",this.zIndex)},t.prototype.setBeforeRules=function(){var t=gadgetui.util.setStyle,e=this.bubbleSelector.getElementsByClassName("gadgetui-bubble-arrow-outside");t(e[0],"content"," "),t(e[0],"position","absolute"),t(e[0],"width",0),t(e[0],"height",0),t(e[0],"left",this.beforeArrowLeft+"px"),t(e[0],"top",this.arrowTop+"px"),t(e[0],"border",this.arrowSize+"px solid"),t(e[0],"border-color",this.beforeBorderColor)},t.prototype.setAfterRules=function(){var t=gadgetui.util.setStyle,e=this.bubbleSelector.getElementsByClassName("gadgetui-bubble-arrow-inside");t(e[0],"content"," "),t(e[0],"position","absolute"),t(e[0],"width",0),t(e[0],"height",0),t(e[0],"left",this.afterArrowLeft+"px"),t(e[0],"top",this.afterArrowTop+"px"),t(e[0],"border",this.afterArrowSize+"px solid"),t(e[0],"border-color",this.afterBorderColor)},t.prototype.calculatePosition=function(){var t=this;this.relativeOffset=gadgetui.util.getRelativeParentOffset(this.selector),this.position.split(" ").forEach(function(e){switch(e){case"top":t.top=t.top-t.relativeOffset.top;break;case"bottom":t.top=t.top+t.selector.offsetHeight-t.relativeOffset.top;break;case"left":break;case"right":t.left=t.left+t.selector.offsetWidth-t.relativeOffset.left;break;case"center":t.left=t.left+t.selector.offsetWidth/2-t.relativeOffset.left}})},t.prototype.calculateArrowPosition=function(){var t,e=2*this.arrowSize,i=2*this.padding,o=this.borderWidth+this.borderRadius+this.arrowSize,s=Math.floor(Math.sqrt(Math.pow(this.borderWidth,2)+Math.pow(this.borderWidth,2)))-1;switch(this.afterArrowSize=this.arrowSize-s,t=(e-2*this.afterArrowSize)/2,this.arrowPositionArray[0]){case"left":this.beforeArrowLeft=-e,this.afterArrowLeft=2*-this.afterArrowSize,this.left=this.left+this.arrowSize-this.borderWidth;break;case"right":this.beforeArrowLeft=this.width+i,this.afterArrowLeft=this.beforeArrowLeft,this.left=this.left-this.bubbleWidth-this.arrowSize+this.borderWidth;break;case"top":this.arrowTop=-e,this.afterArrowTop=-2*this.afterArrowSize,this.top=this.top+this.arrowSize-this.borderWidth;break;case"bottom":this.arrowTop=this.height+i,this.afterArrowTop=this.arrowTop,this.top=this.top-this.bubbleHeight-this.arrowSize+this.borderWidth}switch(this.arrowPositionArray[1]){case"top":this.arrowTop=this.borderRadius,this.afterArrowTop=this.arrowTop+t,this.top=this.top-o;break;case"bottom":this.arrowTop=this.bubbleHeight-2*this.borderWidth-e-this.borderRadius,this.afterArrowTop=this.arrowTop+t,this.top=this.top-this.bubbleHeight+o;break;case"right":this.beforeArrowLeft=this.bubbleWidth-2*this.borderWidth-e-this.borderRadius,this.afterArrowLeft=this.beforeArrowLeft+s,this.left=this.left-this.bubbleWidth+o;break;case"left":this.beforeArrowLeft=this.borderRadius,this.afterArrowLeft=this.beforeArrowLeft+s,this.left=this.left-o}},t.prototype.calculateArrowStyle=function(){var t=[],e=this.arrowPositionArray[0],i=this.arrowPositionArray[1]+" "+this.arrowDirection;if("middle"===this.arrowDirection)switch(this.arrowPositionArray[0]){case"top":this.beforeBorderColor="transparent transparent "+this.borderColor+" transparent",this.afterBorderColor="transparent transparent #fff transparent";break;case"bottom":this.beforeBorderColor=this.borderColor+" transparent transparent transparent",this.afterBorderColor="#fff transparent transparent transparent";break;case"right":this.beforeBorderColor="transparent transparent transparent "+this.borderColor,this.afterBorderColor="transparent transparent transparent #fff";break;case"left":this.beforeBorderColor="transparent "+this.borderColor+" transparent transparent",this.afterBorderColor="transparent #fff transparent transparent"}else"top"===e||"bottom corner"===i||"top center"===i?(t[0]="transparent",t[2]=this.borderColor):"bottom"!==e&&"bottom center"!==i&&"top corner"!==i||(t[0]=this.borderColor,t[2]="transparent"),"right"===e||"left corner"===i||"right center"===i?(t[1]="transparent",t[3]=this.borderColor):"left"!==e&&"left center"!==i&&"right corner"!==i||(t[1]=this.borderColor,t[3]="transparent"),this.beforeBorderColor=t.toString().replace(/\),/gi,") ").replace(/,transparent/gi," transparent").replace(/transparent,/gi,"transparent "),this.afterBorderColor=this.beforeBorderColor.replace(this.borderColor,"#fff","g")},t.prototype.setBehaviors=function(){var t=this,e=gadgetui.util.setStyle;this.spanElement[0].addEventListener("click",function(){e(t.bubbleSelector,"display","none"),t.bubbleSelector.parentNode.removeChild(t.bubbleSelector)}),this.autoClose&&(closeBubble=function(){e(t.bubbleSelector,"display","none"),t.bubbleSelector.parentNode.removeChild(t.bubbleSelector)},setTimeout(closeBubble,this.autoCloseDelay))},t.prototype.config=function(t){t=void 0===t?{}:t;this.bubbleType=void 0===t.bubbleType?"speech":t.bubbleType,this.id="gadgetui-bubble-"+gadgetui.util.Id(),this.height=void 0===t.height?100:t.height,this.position=void 0===t.position?"top right":t.position,this.width=void 0===t.width?200:t.width,this.padding=void 0===t.padding?20:t.padding,this.opacity=void 0===t.opacity?1:t.opacity,this.top=gadgetui.util.getOffset(this.selector).top,this.left=gadgetui.util.getOffset(this.selector).left,this.shadowColor=void 0===t.shadowColor?"silver":t.shadowColor,this.shadowSize=2,this.borderColor=void 0===t.borderColor?"silver":t.borderColor,this.borderWidth=void 0===t.borderWidth?8:t.borderWidth,this.arrowPosition=void 0===t.arrowPosition?"bottom left":t.arrowPosition,this.arrowDirection=void 0===t.arrowDirection?"middle":t.arrowDirection,this.arrowPositionArray=this.arrowPosition.split(" "),this.bubbleWidth=this.width+2*this.padding+2*this.borderWidth,this.bubbleHeight=this.height+2*this.padding+2*this.borderWidth,this.closeIconSize=13,this.arrowSize=void 0===t.arrowSize?25:t.arrowSize,this.backgroundColor=void 0===t.backgroundColor?"#FFFFFF":t.backgroundColor,this.lineHeight=void 0===t.lineHeight?"1.2em":t.lineHeight,this.borderRadius=void 0===t.borderRadius?30:t.borderRadius,this.boxShadowColor=void 0===t.boxShadowColor?"silver":t.boxShadowColor,this.font=void 0===t.font?"1em Arial sans":t.font,this.zIndex=void 0===t.zIndex?gadgetui.util.getMaxZIndex()+1:t.zIndex,this.closable=void 0!==t.closable&&t.closable,this.autoClose=void 0!==t.autoClose&&t.autoClose,this.autoCloseDelay=void 0===t.autoCloseDelay?5e3:t.autoCloseDelay,this.relativeOffset={left:0,top:0}},e.prototype.addControl=function(){var t=document.createElement("div");this.class?gadgetui.util.addClass(t,this.class):gadgetui.util.addClass(t,"gadget-ui-collapsiblePane"),this.selector.parentNode.insertBefore(t,this.selector),this.wrapper=this.selector.previousSibling,this.selector.parentNode.removeChild(this.selector),t.appendChild(this.selector)},e.prototype.addHeader=function(){gadgetui.util.setStyle;var t,e=document.createElement("div");this.headerClass?gadgetui.util.addClass(e,this.headerClass):gadgetui.util.addClass(e,"gadget-ui-collapsiblePane-header"),e.innerHTML=this.title,this.wrapper.insertBefore(e,this.selector),this.header=this.headerClass?this.wrapper.querySelector("div."+this.headerClass):this.wrapper.querySelector("div.gadget-ui-collapsiblePane-header"),t=document.createElement("div"),this.header.appendChild(t)},e.prototype.addCSS=function(){var t=this.width,e=gadgetui.util.setStyle;e(this.wrapper,"width",t),e(this.wrapper,"overflow","hidden")},e.prototype.addBindings=function(){var t=this;(this.headerClass?this.wrapper.querySelector("div."+this.headerClass):this.wrapper.querySelector("div.gadget-ui-collapsiblePane-header")).addEventListener("click",function(){t.toggle()})},e.prototype.toggle=function(){var t,e,i,o=gadgetui.util.setStyle;!0===this.collapsed?("",e="block",t=this.height,i=this.selectorHeight,this.collapsed=!1):("",e="none",t=this.headerHeight,i=0,this.collapsed=!0),this.eventName=this.collapsed?"collapse":"expand";var s=new Event(this.eventName);this.selector.dispatchEvent(s),"undefined"!=typeof Velocity&&this.animate?(Velocity(this.wrapper,{height:t},{queue:!1,duration:300,complete:function(){}}),Velocity(this.selector,{height:i},{queue:!1,duration:300,complete:function(){}})):o(this.selector,"display",e)},e.prototype.config=function(t){t=void 0===t?{}:t,this.animate=void 0===t.animate||t.animate,this.title=void 0===t.title?"":t.title,this.width=gadgetui.util.getStyle(this.selector,"width"),this.collapse=void 0!==t.collapse&&t.collapse,this.collapsed=void 0===t.collapse||!t.collapse,this.class=void 0!==t.class&&t.class,this.headerClass=void 0!==t.headerClass&&t.headerClass},i.prototype=s.prototype,i.prototype.addButtons=function(){var t=this,e=gadgetui.util.setStyle;this.buttonDiv=document.createElement("div"),e(this.buttonDiv,"text-align","center"),e(this.buttonDiv,"padding",".5em"),this.buttons.forEach(function(i){var o=document.createElement("button");o.innerText=i.label,e(o,"margin",".5em"),o.addEventListener("click",i.click),t.buttonDiv.appendChild(o)}),this.wrapper.appendChild(this.buttonDiv)},o.prototype.events=["uploadComplete"],o.prototype.completeUpload=function(t){this.progressbar.destroy(),this.fireEvent("uploadComplete",t)},s.prototype.setup=function(t){this.addControl(),this.addHeader(),this.enableShrink&&(this.maxmin=this.wrapper.querySelector("div.oi[name='maxmin']")),this.minWidth=this.title.length>0?gadgetui.util.textWidth(this.title,this.header.style)+50:100;var e=2*parseInt(gadgetui.util.getNumberValue(gadgetui.util.getStyle(this.selector,"padding")),10),i=gadgetui.util.getNumberValue(gadgetui.util.getStyle(this.header,"height"))+6;gadgetui.util.setStyle(this.selector,"width",this.width-e),this.height=void 0===t.height?gadgetui.util.getNumberValue(gadgetui.util.getStyle(this.selector,"height"))+e+i+10:t.height,this.addCSS(),this.height=gadgetui.util.getStyle(this.wrapper,"height"),this.relativeOffsetLeft=gadgetui.util.getRelativeParentOffset(this.selector).left,this.addBindings(),this.enableShrink&&(this.minimize(),this.expand())},s.prototype.addBindings=function(){var t=this;gadgetui.util.draggable(this.wrapper);this.wrapper.addEventListener("drag_end",function(e){t.top=e.detail.top,t.left=e.detail.left,t.relativeOffsetLeft=gadgetui.util.getRelativeParentOffset(t.selector).left,console.log(t)}),this.enableShrink&&this.maxmin.addEventListener("click",function(e){t.minimized?t.expand():t.minimize()}),this.enableClose&&this.closeIcon.addEventListener("click",function(){t.close.apply(t)})},s.prototype.close=function(){this.wrapper.parentNode.removeChild(this.wrapper)},s.prototype.addHeader=function(){var t=gadgetui.util.setStyle;this.header=document.createElement("div"),this.header.innerHTML=this.title,this.headerClass?gadgetui.util.addClass(header,this.headerClass):gadgetui.util.addClass(this.header,"gadget-ui-floatingPane-header"),this.enableShrink?(this.icon=document.createElement("div"),gadgetui.util.addClass(this.icon,"oi"),this.icon.setAttribute("name","maxmin"),this.header.insertBefore(this.icon,void 0),this.wrapper.insertBefore(this.header,this.selector),this.icon.setAttribute("data-glyph","fullscreen-exit"),this.header.appendChild(this.icon)):this.wrapper.insertBefore(this.header,this.selector),this.enableClose&&(this.closeIcon=document.createElement("div"),this.closeIcon.setAttribute("name","closeIcon"),t(this.closeIcon,"float","right"),t(this.closeIcon,"display","inline-block"),t(this.closeIcon,"margin-right","3px"),gadgetui.util.addClass(this.closeIcon,"oi"),this.header.appendChild(this.closeIcon),this.closeIcon.setAttribute("data-glyph","circle-x"))},s.prototype.addCSS=function(){var t=gadgetui.util.setStyle;t(this.wrapper,"width",this.width),this.enableShrink&&(t(this.maxmin,"float","left"),t(this.maxmin,"display","inline"))},s.prototype.addControl=function(){var t=document.createElement("div");this.class?gadgetui.util.addClass(pane,this.class):gadgetui.util.addClass(t,"gadget-ui-floatingPane"),t.draggable=!0,this.selector.parentNode.insertBefore(t,this.selector),this.wrapper=this.selector.previousSibling,this.selector.parentNode.removeChild(this.selector),t.appendChild(this.selector)},s.prototype.expand=function(){var t=this,e=gadgetui.util.setStyle,i=gadgetui.util.getOffset(this.wrapper),o=parseInt(gadgetui.util.getNumberValue(gadgetui.util.getStyle(this.wrapper.parentElement,"padding-left")),10);parseInt(new Number(i.left),10),this.relativeOffsetLeft;"undefined"!=typeof Velocity&&this.animate?(Velocity(this.wrapper,{width:this.width},{queue:!1,duration:500},function(){}),Velocity(this.selector,{height:this.height},{queue:!1,duration:500,complete:function(){t.icon.setAttribute("data-glyph","fullscreen-exit"),e(t.selector,"overflow","scroll")}})):(e(this.wrapper,"width",this.width),e(this.selector,"height",this.height),this.icon.setAttribute("data-glyph","fullscreen-exit"),e(this.selector,"overflow","scroll")),this.minimized=!1},s.prototype.minimize=function(){var t=this,e=gadgetui.util.setStyle,i=gadgetui.util.getOffset(this.wrapper),o=parseInt(gadgetui.util.getNumberValue(gadgetui.util.getStyle(this.wrapper.parentElement,"padding-left")),10);parseInt(new Number(i.left),10),this.relativeOffsetLeft,parseInt(gadgetui.util.getNumberValue(this.width),10);e(this.selector,"overflow","hidden"),"undefined"!=typeof Velocity&&this.animate?(Velocity(this.wrapper,{width:t.minWidth},{queue:!1,duration:500,complete:function(){t.icon.setAttribute("data-glyph","fullscreen-enter")}}),Velocity(this.selector,{height:"50px"},{queue:!1,duration:500},function(){})):(e(this.wrapper,"width",this.minWidth),e(this.selector,"height","50px"),this.icon.setAttribute("data-glyph","fullscreen-enter")),this.minimized=!0},s.prototype.config=function(t){t=void 0===t?{}:t,this.animate=void 0===t.animate||t.animate,this.title=void 0===t.title?"":t.title,this.width=gadgetui.util.getStyle(this.selector,"width"),this.class=void 0!==t.class&&t.class,this.headerClass=void 0!==t.headerClass&&t.headerClass,this.minimized=!1,this.relativeOffsetLeft=0,this.enableShrink=void 0===t.enableShrink||t.enableShrink,this.enableClose=void 0===t.enableClose||t.enableClose},r.prototype.configure=function(t){this.id=t.id,this.filename=t.filename,this.width=t.width},r.prototype.render=function(){var t=gadgetui.util.setStyle,e=document.createElement("div");e.setAttribute("name","progressbox_"+this.id),gadgetui.util.addClass(e,"gadgetui-progressbar-progressbox"),t(e,"display","none");var i=document.createElement("div");i.setAttribute("name","filename"),gadgetui.util.addClass(i,"gadgetui-progressbar-filename"),i.innerText=this.filename,e.appendChild(i);var o=document.createElement("div");gadgetui.util.addClass(o,"progressbar"),o.setAttribute("name","progressbar_"+this.id),e.appendChild(o);var s=document.createElement("div");s.setAttribute("name","statustxt"),gadgetui.util.addClass(s,"statustxt"),s.innertText="0%",e.appendChild(s),this.selector.appendChild(e),this.progressbox=document.querySelector("div[name='progressbox_"+this.id+"']",this.selector),this.progressbar=document.querySelector("div[name='progressbar_"+this.id+"']",this.selector),this.statustxt=document.querySelector("div[name='statustxt']",document.querySelector("div[name='progressbox_"+this.id+"']",this.selector)),t(this.progressbox,"display","inline-block"),t(this.progressbox,"width",this.width)},r.prototype.start=function(){(0,gadgetui.util.setStyle)(this.progressbar,"width","0"),this.statustxt.innerHTML="0%"},r.prototype.updatePercent=function(t){var e=gadgetui.util.setStyle,i=t+"%";this.percent=t,e(this.progressbar,"width",i),this.statustxt.innerHTML=i,t>50&&e(this.statustxt,"color","#fff")},r.prototype.update=function(t){this.statustxt.innerHTML=t},r.prototype.destroy=function(){this.progressbox.parentNode.removeChild(this.progressbox)},{Bubble:t,CollapsiblePane:e,Dialog:i,FloatingPane:s,FileUploadWrapper:o,ProgressBar:r}}(),gadgetui.input=function(){function t(t,e){this.emitEvents=!0,this.model=gadgetui.model,this.func,this.selector=t,this.config(e),this.setSaveFunc(),this.setDataProviderRefresh(),this.addControl(),this.setCSS(),gadgetui.util.bind(this.selector,this.model),gadgetui.util.bind(this.label,this.model),this.addBehaviors(),this.setStartingValues()}function e(t,e){this.selector=t,this.droppedFiles=[],this.configure(e),this.render(e.title),this.setEventHandlers(),this.setDimensions()}function i(t,e){this.selector=t,this.items=[],this.config(e),this.setIsMultiLine(),this.addControl(),this.initSource(),this.addMenu(),this.addBindings()}function o(t,e){this.selector=t,this.config(e),this.setSelectOptions(),this.setInitialValue(e),this.addControl(),this.addCSS(),this.selector.style.display="none",gadgetui.util.bind(this.selector,this.model),gadgetui.util.bind(this.label,this.model),this.addBindings()}function s(t,e){this.emitEvents=!0,this.model=gadgetui.model,this.func,this.selector=t,this.config(e),this.setInitialValue(),this.addControl(),this.setLineHeight(),this.setFont(),this.setMaxWidth(),this.setWidth(),this.addCSS(),gadgetui.util.bind(this.selector,this.model),gadgetui.util.bind(this.label,this.model),this.addBindings()}return t.prototype.addControl=function(){var t=gadgetui.util.setStyle;this.comboBox=gadgetui.util.createElement("div"),this.input=gadgetui.util.createElement("input"),this.label=gadgetui.util.createElement("div"),this.inputWrapper=gadgetui.util.createElement("div"),this.selectWrapper=gadgetui.util.createElement("div"),gadgetui.util.addClass(this.comboBox,"gadgetui-combobox"),gadgetui.util.addClass(this.input,"gadgetui-combobox-input"),gadgetui.util.addClass(this.label,"gadgetui-combobox-label"),gadgetui.util.addClass(this.inputWrapper,"gadgetui-combobox-inputwrapper"),gadgetui.util.addClass(this.selectWrapper,"gadgetui-combobox-selectwrapper"),this.selector.parentNode.insertBefore(this.comboBox,this.selector),this.selector.parentNode.removeChild(this.selector),this.comboBox.appendChild(this.label),this.selectWrapper.appendChild(this.selector),this.comboBox.appendChild(this.selectWrapper),this.inputWrapper.appendChild(this.input),this.comboBox.appendChild(this.inputWrapper),this.label.setAttribute("data-id",this.id),this.label.setAttribute("gadgetui-bind",this.selector.getAttribute("gadgetui-bind")),this.label.innerHTML=this.text,this.input.setAttribute("placeholder",this.newOption.text),this.input.setAttribute("type","text"),this.input.setAttribute("name","custom"),t(this.comboBox,"opacity",".0")},t.prototype.setCSS=function(){var t=this,e=new Promise(function(e,i){t.getArrowWidth(e,i)});e.then(function(){t.addCSS()}),e.catch(function(e){t.arrowWidth=22,console.log(e),t.addCSS()})},t.prototype.getArrowWidth=function(t,e){var i=this,o=new Image;o.onload=function(){i.arrowWidth=this.width,t()},o.onerror=function(){e("Icon was not loaded.")},o.src=this.arrowIcon},t.prototype.addCSS=function(){var t=gadgetui.util.setStyle;gadgetui.util.addClass(this.selector,"gadgetui-combobox-select"),t(this.selector,"width",this.width),t(this.selector,"border",0),t(this.selector,"display","inline"),t(this.comboBox,"position","relative");var e,i,o,s=gadgetui.util.getStyle(this.selector),r=this.selector.clientWidth,a=0,n=0,l=this.borderWidth;o=this.borderWidth+4,this.borderRadius>5&&(o+=n=this.borderRadius-5),i=o,e=r-this.arrowWidth-this.borderRadius-4,console.log(navigator.userAgent),navigator.userAgent.match(/(Safari)/)&&!navigator.userAgent.match(/(Chrome)/)?(l=this.borderWidth-2,n=n<4?4:this.borderRadius-1,a=1):navigator.userAgent.match(/Edge/)?(n=n<1?1:this.borderRadius-4,i--):navigator.userAgent.match(/MSIE/)?n=n<1?1:this.borderRadius-4:navigator.userAgent.match(/Trident/)?n=n<2?2:this.borderRadius-3:navigator.userAgent.match(/Chrome/)&&(n=n<4?4:this.borderRadius-1,a=1),t(this.selector,"margin-top",a),t(this.selector,"padding-left",n),t(this.inputWrapper,"position","absolute"),t(this.inputWrapper,"top",l),t(this.inputWrapper,"left",0),t(this.input,"display","inline"),t(this.input,"padding-left",0),t(this.input,"margin-left",i),t(this.input,"width",e),t(this.label,"position","absolute"),t(this.label,"left",o),t(this.label,"top",this.borderWidth+1),t(this.label,"margin-left",0),t(this.selectWrapper,"display","inline"),t(this.selectWrapper,"position","absolute"),t(this.selectWrapper,"padding-bottom","1px"),t(this.selectWrapper,"left",0),t(this.comboBox,"font-size",s.fontSize),t(this.selectWrapper,"background-color",this.backgroundColor),t(this.selectWrapper,"border-color",this.borderColor),t(this.selectWrapper,"border-style",this.borderStyle),t(this.selectWrapper,"border-width",this.borderWidth),t(this.selectWrapper,"border-radius",this.borderRadius),t(this.input,"border",0),t(this.input,"font-size",s.fontSize),t(this.input,"background-color",this.inputBackground),t(this.label,"font-family",s.fontFamily),t(this.label,"font-size",s.fontSize),t(this.label,"font-weight",s.fontWeight),navigator.userAgent.match(/Firefox/)&&(t(this.selectWrapper,"background-image","url('"+this.arrowIcon+"')"),t(this.selectWrapper,"background-repeat","no-repeat"),t(this.selectWrapper,"background-position","right center"),!0===this.scaleIconHeight&&t(this.selectWrapper,"background-size",this.arrowWidth+"px "+inputHeight+"px")),t(this.selector,"-webkit-appearance","none"),t(this.selector,"-moz-appearance","window"),t(this.selector,"background-image","url('"+this.arrowIcon+"')"),t(this.selector,"background-repeat","no-repeat"),t(this.selector,"background-position","right center"),!0===this.scaleIconHeight&&t(this.selector,"background-size",this.arrowWidth+"px "+inputHeight+"px"),t(this.inputWrapper,"display","none"),t(this.selectWrapper,"display","none"),t(this.comboBox,"opacity",1)},t.prototype.setSelectOptions=function(){for(var t,e,i,o=this;o.selector.options.length>0;)o.selector.remove(0);(i=gadgetui.util.createElement("option")).value=o.newOption.id,i.text=o.newOption.text,o.selector.add(i),this.dataProvider.data.forEach(function(s){t=s.id,void 0===(e=s.text)&&(e=t),(i=gadgetui.util.createElement("option")).value=t,i.text=e,o.selector.add(i)})},t.prototype.find=function(t){var e;for(e=0;e<this.dataProvider.data.length;e++)if(this.dataProvider.data[e].text===t)return this.dataProvider.data[e].id},t.prototype.getText=function(t){var e,i=parseInt(t,10);for(!0===isNaN(i)&&(i=t),e=0;e<this.dataProvider.data.length;e++)if(this.dataProvider.data[e].id===i)return this.dataProvider.data[e].text},t.prototype.showLabel=function(){var t=gadgetui.util.setStyle;t(this.label,"display","inline-block"),t(this.selectWrapper,"display","none"),t(this.inputWrapper,"display","none")},t.prototype.addBehaviors=function(t){var e=this;this.comboBox.addEventListener(this.activate,function(){setTimeout(function(){"none"!=e.label.style.display&&(console.log("combo mouseenter "),e.selectWrapper.style.display="inline",e.label.style.display="none",e.selector.selectedIndex<=0&&(e.inputWrapper.style.display="inline"))},e.delay)}),this.comboBox.addEventListener("mouseleave",function(){console.log("combo mouseleave "),e.selector!=document.activeElement&&e.input!=document.activeElement&&e.showLabel()}),e.input.addEventListener("click",function(t){console.log("input click ")}),e.input.addEventListener("keyup",function(t){if(console.log("input keyup"),13===t.which){var i=gadgetui.util.encode(e.input.value);e.handleInput(i)}}),e.input.addEventListener("blur",function(){console.log("input blur"),!0===gadgetui.util.mouseWithin(e.selector,gadgetui.mousePosition)?(e.inputWrapper.style.display="none",e.selector.focus()):e.showLabel()}),this.selector.addEventListener("mouseenter",function(t){e.selector.style.display="inline"}),this.selector.addEventListener("click",function(t){console.log("select click"),t.stopPropagation()}),this.selector.addEventListener("change",function(t){var i=t.target.selectedIndex>=0?t.target.selectedIndex:0;parseInt(t.target[i].value,10)!==parseInt(e.id,10)&&(console.log("select change"),t.target.selectedIndex>0?(e.inputWrapper.style.display="none",e.setValue(t.target[t.target.selectedIndex].value)):(e.inputWrapper.style.display="block",e.setValue(e.newOption.value),e.input.focus()),gadgetui.util.trigger(e.selector,"gadgetui-combobox-change",{id:t.target[t.target.selectedIndex].value,text:t.target[t.target.selectedIndex].innerHTML}))}),this.selector.addEventListener("blur",function(t){console.log("select blur "),t.stopPropagation(),setTimeout(function(){e.input!==document.activeElement&&e.showLabel()},200)})},t.prototype.handleInput=function(t){var e=this.find(t),i=gadgetui.util.setStyle;void 0!==e?(this.selector.value=e,this.label.innerText=t,this.selector.focus(),this.input.value="",i(this.inputWrapper,"display","none")):void 0===e&&t.length>0&&this.save(t)},t.prototype.triggerSelectChange=function(){console.log("select change");var t=new Event("change",{view:window,bubbles:!0,cancelable:!0});this.selector.dispatchEvent(t)},t.prototype.setSaveFunc=function(){if(void 0!==this.save){var t=this.save;this.save=function(e){var i,o,s=this,r=[e];return void 0===this.find(e)&&(console.log("save: "+e),(o=new Promise(function(e,o){r.push(e),r.push(o),i=t.apply(s,r),console.log(i)})).then(function(t){function i(){gadgetui.util.trigger(s.selector,"gadgetui-combobox-save",{id:t,text:e}),s.input.value="",s.inputWrapper.style.display="none",s.id=t,s.dataProvider.refresh()}!0===s.animate&&"undefined"!=typeof Velocity?(Velocity(s.selectWrapper,{boxShadow:"0 0 5px "+s.glowColor,borderColor:s.glowColor},s.animateDelay/2,function(){s.selectWrapper.style.borderColor=s.glowColor}),Velocity(s.selectWrapper,{boxShadow:0,borderColor:s.borderColor},s.animateDelay/2,i)):i()}),o.catch(function(t){s.input.value="",s.inputWrapper.hide(),console.log(t),s.dataProvider.refresh()})),i}}},t.prototype.setStartingValues=function(){void 0===this.dataProvider.data?this.dataProvider.refresh():this.setControls()},t.prototype.setControls=function(){console.log(this),this.setSelectOptions(),this.setValue(this.id),this.triggerSelectChange()},t.prototype.setValue=function(t){var e=this.getText(t);console.log("setting id:"+t),this.id=void 0===e?this.newOption.id:t,e=void 0===e?this.newOption.text:e,this.text=e,this.label.innerText=this.text,this.selector.value=this.id},t.prototype.setDataProviderRefresh=function(){var t,e,i=this,o=this.dataProvider.refresh;this.dataProvider.refresh=function(){var s=this;return void 0!==o&&((t=new Promise(function(t,i){var r=[s,t,i];e=o.apply(this,r)})).then(function(){gadgetui.util.trigger(i.selector,"gadgetui-combobox-refresh"),i.setControls()}),t.catch(function(t){console.log("message"),i.setControls()})),e}},t.prototype.config=function(t){t=void 0===t?{}:t,this.model=void 0===t.model?this.model:t.model,this.emitEvents=void 0===t.emitEvents||t.emitEvents,this.dataProvider=void 0===t.dataProvider?void 0:t.dataProvider,this.save=void 0===t.save?void 0:t.save,this.activate=void 0===t.activate?"mouseenter":t.activate,this.delay=void 0===t.delay?10:t.delay,this.inputBackground=void 0===t.inputBackground?"#ffffff":t.inputBackground,this.borderWidth=void 0===t.borderWidth?1:t.borderWidth,this.borderColor=void 0===t.borderColor?"#d0d0d0":t.borderColor,this.borderStyle=void 0===t.borderStyle?"solid":t.borderStyle,this.borderRadius=void 0===t.borderRadius?5:t.borderRadius,this.width=void 0===t.width?150:t.width,this.newOption=void 0===t.newOption?{text:"...",id:0}:t.newOption,this.id=void 0===t.id?this.newOption.id:t.id,this.arrowIcon=void 0===t.arrowIcon?"/bower_components/gadget-ui/dist/img/arrow.png":t.arrowIcon,this.scaleIconHeight=void 0!==t.scaleIconHeight&&t.scaleIconHeight,this.animate=void 0===t.animate||t.animate,this.glowColor=void 0===t.glowColor?"rgb(82, 168, 236)":t.glowColor,this.animateDelay=void 0===t.animateDelay?500:t.animateDelay,this.border=this.borderWidth+"px "+this.borderStyle+" "+this.borderColor,this.saveBorder=this.borderWidth+"px "+this.borderStyle+" "+this.glowColor},e.prototype.render=function(t){var e=this;!function(){var t=gadgetui.util.setStyle,i=(e.addFileMessage,e.dropMessage),o="";e.selector.innerHTML='<div style="padding:10px;" class="gadgetui-fileuploader-wrapper"><div name="dropzone" class="gadgetui-fileuploader-dropzone" id="dropzone"><div class="gadgetui-fileuploader-dropmessage" name="dropMessageDiv">'+i+'</span></div></div><div name="filedisplay" class="gadgetui-fileuploader-filedisplay" style="display:none;"></div><div class="buttons full"><div class="fileUpload" name="fileUpload"><input type="file" name="fileselect" class="upload" title="'+o+'"></div></div>',!1===e.showUploadButton&&t(document.querySelector("div[name='fileUpload']",e.selector),"display","none");var s=gadgetui.util.getNumberValue(gadgetui.util.getStyle(e.selector,"width"))-gadgetui.util.textWidth(document.querySelector("div[name='dropMessageDiv']",e.selector).innerText,e.selector.style),r=gadgetui.util.getNumberValue(gadgetui.util.getStyle(e.selector,"height"))/2;t(document.querySelector("div[name='dropMessageDiv']",e.selector),"left",s),t(document.querySelector("div[name='dropMessageDiv']",e.selector),"top",r),e.renderDropZone()}()},e.prototype.configure=function(t){this.message=t.message,this.tags=t.tags,this.uploadURI=t.uploadURI,this.onUploadComplete=t.onUploadComplete,this.willGenerateThumbnails=void 0!==t.willGenerateThumbnails&&null!==t.willGenerateThumbnails&&t.willGenerateThumbnails,this.showUploadButton=void 0===t.showUploadButton||t.showUploadButton,this.addFileMessage=void 0!==t.addFileMessage?t.addFileMessage:"Add a File",this.dropMessage=void 0!==t.dropMessage?t.dropMessage:"Drop Files Here"},e.prototype.setDimensions=function(){var t=gadgetui.util.setStyle,e=gadgetui.util.getNumberValue(gadgetui.util.getStyle(this.selector,"height")),i=gadgetui.util.getNumberValue(gadgetui.util.getStyle(this.selector,"width")),o=document.querySelector("div[class='gadgetui-fileuploader-dropzone']",this.selector),s=document.querySelector("div[class='gadgetui-fileuploader-filedisplay']",this.selector),r=document.querySelector("div[class~='buttons']",this.selector);t(o,"height",e-gadgetui.util.getNumberValue(gadgetui.util.getStyle(r,"height"))-100),t(o,"width",i),t(s,"height",e-gadgetui.util.getNumberValue(gadgetui.util.getStyle(r,"height"))-100),t(s,"width",i)},e.prototype.setEventHandlers=function(){var t=this;document.querySelector("input[name='fileselect']",t.selector).addEventListener("change",function(e){var i=document.querySelector("div[name='dropzone']",t.selector),o=document.querySelector("div[name='filedisplay']",t.selector);t.processUpload(e,e.target.files,i,o)})},e.prototype.renderDropZone=function(){var t=document.querySelector("div[name='dropzone']",this.selector),e=document.querySelector("div[name='filedisplay']",this.selector),i=this;document.addEventListener("dragstart",function(t){t.dataTransfer.setData("text","data"),t.dataTransfer.effectAllowed="copy"}),t.addEventListener("dragenter",function(e){gadgetui.util.addClass(t,"highlighted"),e.preventDefault(),e.stopPropagation()}),t.addEventListener("dragleave",function(e){e.stopPropagation(),e.preventDefault(),gadgetui.util.removeClass(t,"highlighted")}),t.addEventListener("dragover",function(t){i.handleDragOver(t),t.dataTransfer.dropEffect="copy"}),t.addEventListener("drop",function(o){o.stopPropagation(),o.preventDefault(),i.processUpload(o,o.dataTransfer.files,t,e)})},e.prototype.processUpload=function(t,e,i,o){var s,r=this,a=gadgetui.util.setStyle;r.uploadingFiles=[];for(var n=0;n<e.length;n++)s=gadgetui.objects.Constructor(gadgetui.display.FileUploadWrapper,[e[n],o,!0]),r.uploadingFiles.push(s),s.on("uploadComplete",function(t){var e;for(e=0;e<r.uploadingFiles.length;e++)r.uploadingFiles[e].id===t.id&&r.uploadingFiles.splice(e,1);0===r.uploadingFiles.length&&(r.show("dropzone"),r.setDimensions())});gadgetui.util.removeClass(i,"highlighted"),a(i,"display","none"),a(o,"display","table-cell"),r.handleFileSelect(r.uploadingFiles,t)},e.prototype.handleFileSelect=function(t,e){e.stopPropagation(),e.preventDefault();this.willGenerateThumbnails?this.generateThumbnails(t):this.upload(t)},e.prototype.generateThumbnails=function(t){this.upload(t)},e.prototype.upload=function(t){t.forEach(function(t){t.progressbar.start()}),this.uploadFile(t)},e.prototype.uploadFile=function(t){var e=this;!function(){var i,o,s,r,a,n,l,d,h=[];for(d=0;d<t.length;d++){for(h=[],o=1048576,s=(i=t[d].file).size,r=Math.ceil(s/o),a=0,n=o;a<s;)l=i.hasOwnProperty("mozSlice")?i.mozSlice(a,n):i.hasOwnProperty("webkitSlice")?i.webkitSlice(a,n):i.slice(a,n),h.push(l),n=(a=n)+o;e.uploadChunk(t[d],h,1,r)}}()},e.prototype.uploadChunk=function(t,e,i,o){var s,r=new XMLHttpRequest,a=this,n=void 0===a.tags?"":a.tags;"image"===t.file.type.substr(0,5)&&(n="image "+n),r.onreadystatechange=function(){var n;if(4===r.readyState)if(s=r.response,i<=o&&t.progressbar.updatePercent(parseInt(i/o*100,10)),i<o)t.id=r.getResponseHeader("X-Id"),i++,a.uploadChunk(t,e,i,o);else{try{n={data:JSON.parse(s)}}catch(t){n={}}a.handleUploadResponse(n,t)}},r.open("POST",a.uploadURI,!0),1===i&&r.setRequestHeader("X-Tags",n),r.setRequestHeader("X-Id",t.id),r.setRequestHeader("X-FileName",t.file.name),r.setRequestHeader("X-FileSize",t.file.size),r.setRequestHeader("X-FilePart",i),r.setRequestHeader("X-Parts",o),r.setRequestHeader("X-MimeType",t.file.type||"application/octet-stream"),r.setRequestHeader("X-HasTile",void 0!==t.tile&&t.tile.length>0),r.setRequestHeader("Content-Type","application/octet-stream"),r.send(e[i-1])},e.prototype.handleUploadResponse=function(t,e){var i=gadgetui.objects.Constructor(gadgetui.objects.FileItem,[{mimetype:t.data.mimetype,fileid:t.data.fileId,filename:t.data.filename,filesize:t.data.filesize,tags:t.data.tags,created:t.data.created,createdStr:t.data.created,disabled:t.data.disabled,path:t.data.path}],!1);e.completeUpload(i),void 0!==this.onUploadComplete&&this.onUploadComplete(i)},e.prototype.show=function(t){var e=gadgetui.util.setStyle,i=document.querySelector("div[class='gadgetui-fileuploader-dropzone']",this.selector),o=document.querySelector("div[class='gadgetui-fileuploader-filedisplay']",this.selector);"dropzone"===t?(e(i,"display","table-cell"),e(o,"display","none")):(e(o,"display","table-cell"),e(i,"display","none"))},e.prototype.handleDragOver=function(t){t.stopPropagation(),t.preventDefault(),t.dataTransfer.dropEffect="copy"},i.prototype.addControl=function(){this.wrapper=document.createElement("div"),void 0!==this.width&&gadgetui.util.setStyle(this.wrapper,"width",this.width),gadgetui.util.addClass(this.wrapper,"gadgetui-lookuplist-input"),this.selector.parentNode.insertBefore(this.wrapper,this.selector),this.selector.parentNode.removeChild(this.selector),this.wrapper.appendChild(this.selector)},i.prototype.addMenu=function(){var t=document.createElement("div");gadgetui.util.addClass(t,"gadgetui-lookuplist-menu"),gadgetui.util.setStyle(t,"display","none"),this.menu={element:t},this.wrapper.appendChild(this.menu.element)},i.prototype.initSource=function(){var t,e,i=this;this.datasource.constructor===Array?(t=this.datasource,this.source=function(e,o){o(i.filter(t,e.term))}):"string"==typeof this.datasource?(e=this.datasource,this.source=function(t,o){i.xhr&&i.xhr.abort(),i.xhr=fetch({url:e,data:t,dataType:"json",success:function(t){o(t)},error:function(){o([])}})}):this.source=this.datasource},i.prototype.escapeRegex=function(t){return t.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")},i.prototype._filter=function(t,e){var i=new RegExp(this.escapeRegex(e),"i");return gadgetui.util.grep(t,function(t){return i.test(t.label||t.value||t)})},i.prototype.checkForDuplicate=function(t){var e,i=!1;for(e=0;e<this.items.length;e++)if(this.items[e].value===t.value){i=!0;break}return i},i.prototype.makeUnique=function(t){var e,i=[];for(e=0;e<t.length;e++)this.checkForDuplicate(t[e])||i.push(t[e]);return i},i.prototype.setIsMultiLine=function(){var t=this.selector.nodeName.toLowerCase(),e="textarea"===t,i="input"===t;this.isMultiLine=!!e||!i&&this.selector.getAttribute("isContentEditable")},i.prototype.addBindings=function(){var t,e,i,o=this,s=this.selector.nodeName.toLowerCase();this.isTextarea="textarea"===s,this.isInput="input"===s,this.wrapper.addEventListener("click",function(){o.selector.focus()}),this.valueMethod=this.selector[this.isTextarea||this.isInput?"value":"innerText"],this.isNewMenu=!0,this.selector.setAttribute("autocomplete","off"),this.selector.addEventListener("keydown",function(s){if(this.getAttribute("readOnly"))return t=!0,i=!0,void(e=!0);t=!1,i=!1,e=!1;var r=gadgetui.keyCode;switch(s.keyCode){case r.PAGE_UP:t=!0,this._move("previousPage",s);break;case r.PAGE_DOWN:t=!0,this._move("nextPage",s);break;case r.UP:t=!0,this._keyEvent("previous",s);break;case r.DOWN:t=!0,this._keyEvent("next",s);break;case r.ENTER:o.menu.active&&(t=!0,s.preventDefault(),o.menu.select(s));break;case r.BACKSPACE:if(!this.value.length&&o.items.length){var a=this.previousSibling;o.remove(a)}break;case r.TAB:o.menu.active&&o.menu.select(s);break;case r.ESCAPE:"none"!==o.menu.element.style.display&&(this.isMultiLine||this._value(this.term),this.close(s),s.preventDefault());break;default:e=!0,o._searchTimeout(s)}}),this.selector.addEventListener("keypress",function(i){if(t)return t=!1,void(this.isMultiLine&&"none"===o.menu.element.style.display||i.preventDefault());if(!e){var s=gadgetui.keyCode;switch(i.keyCode){case s.PAGE_UP:this._move("previousPage",i);break;case s.PAGE_DOWN:this._move("nextPage",i);break;case s.UP:this._keyEvent("previous",i);break;case s.DOWN:this._keyEvent("next",i)}}}),this.selector.addEventListener("input",function(t){if(i)return i=!1,void t.preventDefault();o._searchTimeout(t)}),this.selector.addEventListener("focus",function(t){this.selectedItem=null,this.previous=this.value}),this.selector.addEventListener("blur",function(t){this.cancelBlur?delete this.cancelBlur:(clearTimeout(this.searching),o.close(t),o._change(t))}),this.menu.element.addEventListener("mousedown",function(t){t.preventDefault(),this.cancelBlur=!0,gadgetui.util.delay(function(){delete this.cancelBlur});o.menu.element}),this.menu.element.addEventListener("menuselect",function(t){var e=t.detail,i=o.previous;o.menu.element!==document.activeElement&&(o.menu.element.focus(),o.previous=i,gadgetui.util.delay(function(){o.previous=i,o.selectedItem=e})),o._value(e.value),o.term=o._value(),o.close(t),o.selectedItem=e,o.checkForDuplicate(e)||o.add(e)})},i.prototype._renderItem=function(t){var e,i=document.createElement("div");return gadgetui.util.addClass(i,"gadgetui-lookuplist-input-item-wrapper"),e=document.createElement("div"),gadgetui.util.addClass(e,"gadgetui-lookuplist-input-item"),e.innerHTML=this.labelRenderer(t),i.appendChild(e),i},i.prototype._renderItemCancel=function(t,e){var i=gadgetui.util.setStyle,o=document.createElement("span"),s=gadgetui.util.getNumberValue(gadgetui.util.getStyle(e,"width"))+6;return gadgetui.util.addClass(o,"oi"),o.setAttribute("data-glyph","circle-x"),i(o,"font-size",12),i(o,"opacity",".5"),i(o,"left",s),i(o,"position","absolute"),i(o,"cursor","pointer"),i(o,"top",3),o},i.prototype.add=function(t){var e,i,o,s,r=this;(o=this.itemRenderer(t)).setAttribute("data-value",t.value),this.wrapper.insertBefore(o,this.selector),void 0!==(s=this.itemCancelRenderer(t,o))&&(o.appendChild(s),s.addEventListener("click",function(t){r.remove(this.parentNode)})),this.selector.value="",this.items.push(t),!0===this.emitEvents&&gadgetui.util.trigger(this.selector,"gadgetui-lookuplist-input-add",t),void 0!==this.func&&this.func(t,"add"),void 0!==this.model&&null!==(e=this.selector.getAttribute("gadgetui-bind"))&&void 0!==e&&(typeof(i=this.model.get(e))===Array&&(i=[]),i.push(t),this.model.set(e,i))},i.prototype.remove=function(t){var e,i,o,s=this,r=t.getAttribute("data-value");for(t.parentNode.removeChild(t),e=0;e<this.items.length;e++)this.items[e].value===r&&this.items.splice(e,1);void 0!==this.model&&null!==(i=this.selector.getAttribute("gadgetui-bind"))&&void 0!==i&&(o=this.model.get(i)).forEach(function(t,e){if(t.value===r)return o.splice(e,1),void 0!==s.func&&s.func(t,"remove"),!0===s.emitEvents&&gadgetui.util.trigger(s.selector,"gadgetui-lookuplist-input-remove",t),s.model.set(i,o),!1})},i.prototype.reset=function(){for(;this.wrapper.firstChild&&this.wrapper.firstChild!==this.selector;)this.wrapper.removeChild(this.wrapper.firstChild);if(this.items=[],void 0!==this.model){var t=this.selector.getAttribute("gadgetui-bind");this.model.set(t,[])}},i.prototype.destroy=function(){clearTimeout(this.searching),this.menu.element.remove(),this.liveRegion.remove()},i.prototype._setOption=function(t,e){this._super(t,e),"source"===t&&this._initSource(),"appendTo"===t&&this.menu.element.appendTo(this._appendTo()),"disabled"===t&&e&&this.xhr&&this.xhr.abort()},i.prototype._appendTo=function(){var t=this.options.appendTo;return t&&(t=t.jquery||t.nodeType?$(t):this.document.find(t).eq(0)),t&&t[0]||(t=this.element.closest(".ui-front")),t.length||(t=this.document[0].body),t},i.prototype._searchTimeout=function(t){var e=this;clearTimeout(this.searching),this.searching=gadgetui.util.delay(function(){var i=this.term===e.selector.value,o="none"!==e.menu.element.style.display,s=t.altKey||t.ctrlKey||t.metaKey||t.shiftKey;i&&(!i||o||s)||(e.selectedItem=null,e.search(null,t))},this.delay)},i.prototype.search=function(t,e){return t=null!=t?t:this.selector.value,this.term=this._value(),t.length<this.minLength?this.close(e):this._search(t)},i.prototype._search=function(t){this.pending++,this.cancelSearch=!1,this.source({term:t},this._response())},i.prototype._response=function(){var t=this;++this.requestIndex;return function(){return function(e){t.__response(e),t.pending--}.apply(t,arguments)}},i.prototype.__response=function(t){(t=this.makeUnique(t))&&t.length&&(t=this._normalize(t)),this.selector.dispatchEvent(new CustomEvent("response",{content:t})),!this.disabled&&t&&t.length&&!this.cancelSearch?(this._suggest(t),this.selector.dispatchEvent(new Event("open"))):this._close()},i.prototype.close=function(t){this.cancelSearch=!0,this._close(t)},i.prototype._close=function(t){"none"!==this.menu.element.style.display&&(this.menu.element.style.display="none",this.menu.element.blur(),this.isNewMenu=!0)},i.prototype._change=function(t){},i.prototype._normalize=function(t){return t.length&&t[0].label&&t[0].value?t:t.map(function(t){return"string"==typeof t?{label:t,value:t}:(t.label=t.label||t.value,t.value=t.value||t.label,t)})},i.prototype._suggest=function(t){for(var e=this.menu.element;e.firstChild;)e.removeChild(e.firstChild);this._renderMenu(t),this.isNewMenu=!0,e.style.display="block",this._resizeMenu(),this.position.of=this.element},i.prototype._resizeMenu=function(){this.menu.element},i.prototype._renderMenu=function(t){var e,i=Math.min(this.maxSuggestions,t.length);for(e=0;e<i;e++)this._renderItemData(t[e])},i.prototype._renderItemData=function(t){var e=this,i=this.menuItemRenderer(t);i.addEventListener("click",function(i){var o=new CustomEvent("menuselect",{detail:t});e.menu.element.dispatchEvent(o)}),this.menu.element.appendChild(i)},i.prototype._renderMenuItem=function(t){var e=document.createElement("div");return gadgetui.util.addClass(e,"gadgetui-lookuplist-item"),e.setAttribute("value",t.value),e.innerText=this.labelRenderer(t),e},i.prototype._renderLabel=function(t){return t.label},i.prototype._move=function(t,e){if("none"===!this.menu.element.style.display)return this.menu.element.isFirstItem()&&/^previous/.test(t)||this.menu.element.isLastItem()&&/^next/.test(t)?(this.isMultiLine||this._value(this.term),void this.menu.blur()):void this.menu[t](e);this.search(null,e)},i.prototype.widget=function(){return this.menu.element},i.prototype._value=function(){return this.isInput?this.selector.value:this.selector.innerText},i.prototype._keyEvent=function(t,e){this.isMultiLine&&"none"===this.menu.element.style.display||(this._move(t,e),e.preventDefault())},i.prototype.config=function(t){t=void 0===t?{}:t,void 0!==this.selector.getAttribute("gadgetui-bind")&&(this.model=void 0===t.model?gadgetui.model:t.model),this.width=void 0===t.width?void 0:t.width,this.func=void 0===t.func?void 0:t.func,this.filter=void 0===t.filter?this._filter:t.filter,this.labelRenderer=void 0===t.labelRenderer?this._renderLabel:t.labelRenderer,this.itemRenderer=void 0===t.itemRenderer?this._renderItem:t.itemRenderer,this.menuItemRenderer=void 0===t.menuItemRenderer?this._renderMenuItem:t.menuItemRenderer,this.itemCancelRenderer=void 0===t.itemCancelRenderer?this._renderItemCancel:t.itemCancelRenderer,this.emitEvents=void 0===t.emitEvents||t.emitEvents,this.datasource=void 0===t.datasource?void 0===t.lookupList||t.lookupList:t.datasource,this.minLength=void 0===t.minLength?0:t.minLength,this.disabled=void 0!==t.disabled&&t.disabled,this.maxSuggestions=void 0===t.maxSuggestions?20:t.maxSuggestions,this.position=void 0===t.position?{my:"left top",at:"left bottom",collision:"none"}:t.position,this.autoFocus=void 0!==t.autoFocus&&t.autoFocus,this.requestIndex=0},o.prototype.setInitialValue=function(t){this.value=t.value||{id:this.selector.options[this.selector.selectedIndex||0].value,text:this.selector.options[this.selector.selectedIndex||0].innerHTML},this.selector.value=this.value.id},o.prototype.addControl=function(){this.wrapper=document.createElement("div"),this.label=document.createElement("div"),gadgetui.util.addClass(this.wrapper,"gadgetui-selectinput-div"),gadgetui.util.addClass(this.label,"gadgetui-selectinput-label"),this.label.setAttribute("gadgetui-bind",this.selector.getAttribute("gadgetui-bind")),this.label.innerHTML=this.value.text,this.selector.parentNode.insertBefore(this.wrapper,this.selector),this.wrapper=this.selector.previousSibling,this.selector.parentNode.removeChild(this.selector),this.wrapper.appendChild(this.selector),this.selector.parentNode.insertBefore(this.label,this.selector)},o.prototype.setSelectOptions=function(){var t,e,i,o=this;if(null!==this.selector.getAttribute("gadgetui-bind-options")||void 0!==this.dataProvider){for(;o.selector.options.length>0;)o.selector.remove(0);if(null!==this.selector.getAttribute("gadgetui-bind-options"))this.model.get(this.selector.getAttribute("gadgetui-bind-options")).forEach(function(t){var e=document.createElement("option");"object"==typeof t?(e.value=t.id,e.text=t.text):e.text=t,o.selector.add(e)});else void 0!==this.dataProvider&&this.dataProvider.data.forEach(function(s){t=s.id,void 0===(e=s.text)&&(e=t),(i=gadgetui.util.createElement("option")).value=t,i.text=e,o.selector.add(i)})}},o.prototype.addCSS=function(){var t,e,i=gadgetui.util.setStyle,o=gadgetui.util.getStyle(this.selector);i(this.selector,"min-width","100px"),i(this.selector,"font-size",o.fontSize),e=gadgetui.util.getStyle(this.selector.parentNode),t=gadgetui.util.getNumberValue(e.height)-2,this.label.setAttribute("style",""),i(this.label,"padding-top","2px"),i(this.label,"height",t+"px"),i(this.label,"margin-left","9px"),navigator.userAgent.match(/Edge/)?i(this.selector,"margin-left","5px"):navigator.userAgent.match(/MSIE/)&&(i(this.selector,"margin-top","0px"),i(this.selector,"margin-left","5px"))},o.prototype.addBindings=function(){var t=this,e=gadgetui.util.setStyle;this.label.addEventListener(this.activate,function(i){e(t.label,"display","none"),e(t.selector,"display","inline-block"),i.preventDefault()}),this.selector.addEventListener("blur",function(i){e(t.label,"display","inline-block"),e(t.selector,"display","none")}),this.selector.addEventListener("change",function(e){setTimeout(function(){var i=e.target.value,o=e.target[e.target.selectedIndex].innerHTML;0===i.trim().length&&(i=0),t.label.innerText=o,void 0!==t.model&&void 0===t.selector.getAttribute("gadgetui-bind")&&t.model.set(this.name,{id:i,text:o}),!0===t.emitEvents&&gadgetui.util.trigger(t.selector,"gadgetui-input-change",{id:i,text:o}),void 0!==t.func&&t.func({id:i,text:o}),t.value={id:i,text:o}},100)}),this.selector.addEventListener("mouseleave",function(){t.selector!==document.activeElement&&(e(t.label,"display","inline-block"),e(t.selector,"display","none"))})},o.prototype.config=function(t){t=void 0===t?{}:t,this.model=void 0===t.model?void 0:t.model,this.dataProvider=void 0===t.dataProvider?void 0:t.dataProvider,this.func=void 0===t.func?void 0:t.func,this.emitEvents=void 0===t.emitEvents||t.emitEvents,this.activate=void 0===t.activate?"mouseenter":t.activate},s.prototype.addControl=function(){this.wrapper=document.createElement("div"),this.labelDiv=document.createElement("div"),this.inputDiv=document.createElement("div"),this.label=document.createElement("input"),this.label.setAttribute("type","text"),this.label.setAttribute("data-active","false"),this.label.setAttribute("readonly","true"),this.label.setAttribute("value",this.value),this.label.setAttribute("gadgetui-bind",this.selector.getAttribute("gadgetui-bind")),this.labelDiv.appendChild(this.label),this.selector.parentNode.insertBefore(this.wrapper,this.selector),this.selector.parentNode.removeChild(this.selector),this.inputDiv.appendChild(this.selector),this.wrapper.appendChild(this.inputDiv),this.selector.parentNode.parentNode.insertBefore(this.labelDiv,this.inputDiv),this.wrapper=this.selector.parentNode.parentNode,this.labelDiv=this.wrapper.childNodes[0],this.label=this.labelDiv.childNodes[0],this.inputDiv=this.wrapper.childNodes[1]},s.prototype.setInitialValue=function(){var t=this.selector.value,e=this.selector.getAttribute("placeholder");0===t.length&&(t=null!==e&&void 0!==e&&e.length>0?e:" ... "),this.value=t},s.prototype.setLineHeight=function(){var t=this.selector.offsetHeight;this.lineHeight=t},s.prototype.setFont=function(){var t=gadgetui.util.getStyle(this.selector),e=t.fontFamily+" "+t.fontSize+" "+t.fontWeight+" "+t.fontVariant;this.font=e},s.prototype.setWidth=function(){this.width=gadgetui.util.textWidth(this.selector.value,this.font)+10,10===this.width&&(this.width=this.maxWidth)},s.prototype.setMaxWidth=function(){var t=gadgetui.util.getStyle(this.selector.parentNode.parentNode);this.maxWidth=gadgetui.util.getNumberValue(t.width)},s.prototype.addCSS=function(){var t=gadgetui.util.getStyle(this.selector),e=gadgetui.util.setStyle;gadgetui.util.addClass(this.selector,"gadgetui-textinput"),gadgetui.util.addClass(this.wrapper,"gadgetui-textinput-div"),gadgetui.util.addClass(this.labelDiv,"gadgetui-inputlabel"),gadgetui.util.addClass(this.label,"gadgetui-inputlabelinput"),gadgetui.util.addClass(this.inputDiv,"gadgetui-inputdiv"),e(this.label,"background","none"),e(this.label,"padding-left","4px"),e(this.label,"border"," 1px solid transparent"),e(this.label,"width",this.width+"px"),e(this.label,"font-family",t.fontFamily),e(this.label,"font-size",t.fontSize),e(this.label,"font-weight",t.fontWeight),e(this.label,"font-variant",t.fontVariant),e(this.label,"max-width",""),e(this.label,"min-width",this.minWidth+"px"),this.lineHeight>20&&(e(this.wrapper,"min-height",this.lineHeight+"px"),e(this.labelDiv,"min-height",this.lineHeight+"px"),e(this.inputDiv,"min-height",this.lineHeight+"px")),e(this.labelDiv,"height",this.lineHeight+"px"),e(this.labelDiv,"font-size",t.fontSize),e(this.labelDiv,"display","block"),e(this.inputDiv,"height",this.lineHeight+"px"),e(this.inputDiv,"font-size",t.fontSize),e(this.inputDiv,"display","block"),e(this.selector,"padding-left","4px"),e(this.selector,"border","1px solid "+this.borderColor),e(this.selector,"font-family",t.fontFamily),e(this.selector,"font-size",t.fontSize),e(this.selector,"font-weight",t.fontWeight),e(this.selector,"font-variant",t.fontVariant),e(this.selector,"width",this.width+"px"),e(this.selector,"min-width",this.minWidth+"px"),this.selector.setAttribute("placeholder",this.value),e(this.inputDiv,"display","none"),this.maxWidth>10&&!0===this.enforceMaxWidth&&(e(this.label,"max-width",this.maxWidth),e(this.selector,"max-width",this.maxWidth),this.maxWidth<this.width&&(this.label.value=gadgetui.util.fitText(this.value,this.font,this.maxWidth)))},s.prototype.setControlWidth=function(t){var e=parseInt(gadgetui.util.textWidth(t,this.font),10),i=gadgetui.util.setStyle;e<this.minWidth&&(e=this.minWidth),i(this.selector,"width",e+30+"px"),i(this.label,"width",e+30+"px")},s.prototype.addBindings=function(){var t=this;this.label.addEventListener(t.activate,function(){!t.useActive||"false"!==t.label.getAttribute("data-active")&&void 0!==t.label.getAttribute("data-active")?setTimeout(function(){var e,i=gadgetui.util.setStyle;!0===gadgetui.util.mouseWithin(t.label,gadgetui.mousePosition)&&(i(t.labelDiv,"display","none"),i(t.inputDiv,"display","block"),t.setControlWidth(t.selector.value),"click"===t.activate&&t.selector.focus(),!0===t.emitEvents&&(e=new Event("gadgetui-input-show"),t.selector.dispatchEvent(e)))},t.delay):t.label.setAttribute("data-active","true")}),this.selector.addEventListener("focus",function(t){t.preventDefault()}),this.selector.addEventListener("keyup",function(e){13===parseInt(e.keyCode,10)&&this.blur(),t.setControlWidth(this.value)}),this.selector.addEventListener("change",function(e){setTimeout(function(){var i,o=e.target.value;0===o.length&&void 0!==t.selector.getAttribute("placeholder")&&(o=t.selector.getAttribute("placeholder")),i=gadgetui.util.textWidth(o,t.font),t.maxWidth<i&&(o=gadgetui.util.fitText(o,t.font,t.maxWidth)),t.label.value=o,void 0!==t.model&&void 0===t.selector.getAttribute("gadgetui-bind")&&t.model.set(t.selector.name,e.target.value),!0===t.emitEvents&&gadgetui.util.trigger(t.selector,"gadgetui-input-change",{text:e.target.value}),void 0!==t.func&&t.func({text:e.target.value})},200)}),this.selector.addEventListener("mouseleave",function(){var e=gadgetui.util.setStyle;this!==document.activeElement&&(e(t.labelDiv,"display","block"),e(t.inputDiv,"display","none"),e(t.label,"maxWidth",t.maxWidth))}),this.selector.addEventListener("blur",function(){var e=gadgetui.util.setStyle;e(t.inputDiv,"display","none"),e(t.labelDiv,"display","block"),t.label.setAttribute("data-active","false"),e(t.selector,"maxWidth",t.maxWidth),e(t.label,"maxWidth",t.maxWidth)})},s.prototype.config=function(t){t=void 0===t?{}:t,this.borderColor=void 0===t.borderColor?"#d0d0d0":t.borderColor,this.useActive=void 0!==t.useActive&&t.useActive,this.model=void 0===t.model?this.model:t.model,this.func=void 0===t.func?void 0:t.func,this.emitEvents=void 0===t.emitEvents||t.emitEvents,this.activate=void 0===t.activate?"mouseenter":t.activate,this.delay=void 0===t.delay?10:t.delay,this.minWidth=void 0===t.minWidth?100:t.minWidth,this.enforceMaxWidth=void 0!==t.enforceMaxWidth&&t.enforceMaxWidth},{FileUploader:e,TextInput:s,SelectInput:o,ComboBox:t,LookupListInput:i}}(),gadgetui.objects=function(){var t={on:function(t,e){return void 0===this.events[t]&&(this.events[t]=[]),this.events[t].push(e),this},off:function(t){return this.events[t]=[],this},fireEvent:function(t,e){var i=this;this.events[t].forEach(function(t){t(i,e)})},getAll:function(){return[{name:"on",func:this.on},{name:"off",func:this.off},{name:"fireEvent",func:this.fireEvent}]}};function e(t){this.set(t)}return e.prototype.set=function(t){this.fileid=void 0!==t.fileid?t.fileid:"",this.filename=void 0!==t.filename?t.filename:"",void 0!==t.filename?(this.filenameabbr=t.filename.substr(0,25),t.filename.length>25&&(this.filenameabbr=this.filenameabbr+"...")):this.filenameabbr="",this.filesize=void 0!==t.filesize?t.filesize:"",this.tags=void 0!==t.tags?t.tags:"",this.path=void 0!==t.path?t.path:"",this.created=void 0!==t.created?t.created:"",this.createdStr=void 0!==t.created?t.createdStr:"",this.disabled=void 0!==t.disabled?t.disabled:0,this.mimetype=void 0!==t.mimetype?t.mimetype:"application/x-unknown",this.tile=void 0!==t.tile?t.tile:""},{Constructor:function(e,i,o){var s,r,a,n;if(!0===o)for(n=t.getAll(),s=0;s<n.length;s++)void 0===e.prototype[n[s].name]&&(e.prototype[n[s].name]=n[s].func);if(a=Object.create(e.prototype),void 0===(r=e.apply(a,i))&&(r=a),!0===o)for(r.events={},s=0;s<e.prototype.events.length;s++)r.events[e.prototype.events[s]]=[];return r},EventBindings:t,FileItem:e}}(),gadgetui.util={split:function(t){return t.split(/,\s*/)},extractLast:function(t){return this.split(t).pop()},getNumberValue:function(t){return isNaN(Number(t))?Number(t.substring(0,t.length-2)):t},addClass:function(t,e){t.classList?t.classList.add(e):t.className+=" "+e},removeClass:function(t,e){if(t.classList)t.classList.remove(e);else{var i=t.className,o=new RegExp(e,"g");i.replace(o,""),t.className=i}},getOffset:function(t){var e=t.getBoundingClientRect();return{top:e.top+document.body.scrollTop,left:e.left+document.body.scrollLeft}},getParentsUntil:function(t,e,i){var o=[];if(e)var s=e.charAt(0);if(i)var r=i.charAt(0);for(;t&&t!==document;t=t.parentNode){if(e){if("."===s&&t.classList.contains(e.substr(1)))break;if("#"===s&&t.id===e.substr(1))break;if("["===s&&t.hasAttribute(e.substr(1,e.length-1)))break;if(t.tagName.toLowerCase()===e)break}i?("."===r&&t.classList.contains(i.substr(1))&&o.push(t),"#"===r&&t.id===i.substr(1)&&o.push(t),"["===r&&t.hasAttribute(i.substr(1,i.length-1))&&o.push(t),t.tagName.toLowerCase()===i&&o.push(t)):o.push(t)}return 0===o.length?null:o},getRelativeParentOffset:function(t){var e,i,o=gadgetui.util.getParentsUntil(t,"body"),s=0,r=0;for(e=0;e<o.length;e++)"relative"===o[e].style.position&&((i=gadgetui.util.getOffset(o[e])).left>s&&(s=i.left),i.top>r&&(r=i.top));return{left:s,top:r}},Id:function(){return(100*Math.random()).toString().replace(/\./g,"")},bind:function(t,e){var i=t.getAttribute("gadgetui-bind");void 0!==i&&void 0!==e&&e.bind(i,t)},mouseCoords:function(t){return t.pageX||t.pageY?{x:t.pageX,y:t.pageY}:{x:t.clientX+document.body.scrollLeft-document.body.clientLeft,y:t.clientY+document.body.scrollTop-document.body.clientTop}},mouseWithin:function(t,e){var i=t.getBoundingClientRect();return e.x>=i.left&&e.x<=i.right&&e.y>=i.top&&e.y<=i.bottom},getStyle:function(t,e){return void 0!==window.getComputedStyle?void 0!==e?window.getComputedStyle(t,null).getPropertyValue(e):window.getComputedStyle(t,null):void 0!==e?t.currentStyle[e]:t.currentStyle},draggable:function(t){var e=null,i=0,o=0,s=0,r=0;t.onmousedown=function(){return s=i-(e=this).offsetLeft,r=o-e.offsetTop,!1},document.onmousemove=function(t){i=document.all?window.event.clientX:t.pageX,o=document.all?window.event.clientY:t.pageY,null!==e&&(e.style.left=i-s+"px",e.style.top=o-r+"px")},document.onmouseup=function(i){console.log(i);var o=new CustomEvent("drag_end",{detail:{top:gadgetui.util.getStyle(t,"top"),left:gadgetui.util.getStyle(t,"left")}});t.dispatchEvent(o),e=null}},textWidth:function(t,e){gadgetui.util.textWidthEl||(gadgetui.util.textWidthEl=document.createElement("div"),gadgetui.util.textWidthEl.setAttribute("id","gadgetui-textWidth"),gadgetui.util.textWidthEl.setAttribute("style","display: none;"),document.body.appendChild(gadgetui.util.textWidthEl));var i,o=t;return o.length>0&&(gadgetui.util.textWidthEl.innerText=o,o=void 0===o?"":o.replace(/\s/g,"&nbsp;")),gadgetui.util.textWidthEl.innertText=o,gadgetui.util.textWidthEl.style.fontFamily=e.fontFamily,gadgetui.util.textWidthEl.style.fontSize=e.fontSize,gadgetui.util.textWidthEl.style.fontWeight=e.fontWeight,gadgetui.util.textWidthEl.style.fontVariant=e.fontVariant,gadgetui.util.textWidthEl.style.display="inline",i=gadgetui.util.textWidthEl.offsetWidth,gadgetui.util.textWidthEl.style.display="none",i},fitText:function(t,e,i){var o,s=gadgetui.util.TextWidth(t,e),r=gadgetui.util.TextWidth("...",e);if(s<i)return t;for(o=Math.floor(t.length/2)-1;s+r>=i;)t=t.slice(0,o)+t.slice(o+1,t.length),o=Math.floor(t.length/2)-1,s=gadgetui.util.TextWidth(t,font);for(o=Math.floor(t.length/2)-1,t=t.slice(0,o)+"..."+t.slice(o,t.length);" "===t.substring(o-1,o);)t=t.slice(0,o-1)+t.slice(o,t.length),o-=1;for(;" "===t.substring(o+3,o+4);)t=t.slice(0,o+3)+t.slice(o+4,t.length),o-=1;return t},createElement:function(t){var e=document.createElement(t);return e.setAttribute("style",""),e},addStyle:function(t,e){var i=t.getAttribute("style"),o=null!==i?i:"";t.setAttribute("style",o+" "+e+";")},isNumeric:function(t){return!isNaN(parseFloat(t))&&isFinite(t)},setStyle:function(t,e,i){var o,s=t.getAttribute("style"),r=null!==s?s:"",a=new RegExp("("+e+")+ *\\:[^\\;]*\\;","g");if(!0===gadgetui.util.isNumeric(i))switch(e){case"opacity":case"z-index":case"font-weight":break;default:i+="px"}o=r.search(a)>=0?r.replace(a,e+": "+i+";"):r+" "+e+": "+i+";",t.setAttribute("style",o)},encode:function(t){return t},trigger:function(t,e,i){t.dispatchEvent(new CustomEvent(e,{detail:i}))},getMaxZIndex:function(){for(var t=document.querySelectorAll("*"),e=0,i=0;i<t.length;i++){var o=gadgetui.util.getStyle(t[i],"z-index");o>e&&"auto"!=o&&(e=o)}return e},grep:function(t,e,i){for(var o=[],s=0,r=t.length,a=!i;s<r;s++)!e(t[s],s)!==a&&o.push(t[s]);return o},delay:function(t,e){var i=this;return setTimeout(function(){return t.apply(i,arguments)},e||0)},contains:function(t,e){for(var i=t.parentNode;null!=i;){if(i==e)return!0;i=i.parentNode}return!1}};export gadgetui=gadgetui;export var model=gadgetui.model;export var display=gadgetui.display;export var input=gadgetui.input;export var bubble=gadgetui.display.Bubble;export var collapsiblepane=gadgetui.display.CollapsiblePane;export var dialog=gadgetui.display.Dialog;export var fileuploadwrapper=gadgetui.display.FileUploadWrapper;export var floatingpane=gadgetui.display.FloatingPane;export var overlay=gadgetui.display.Overlay;export var progressbar=gadgetui.display.ProgressBar;export var combobox=gadgetui.input.ComboxBox;export var fileuploader=gadgetui.input.FileUploader;export var lookuplistinput=gadgetui.input.LookupListInput;export var selectinput=gadgetui.input.SelectInput;export var textinput=gadgetui.input.TextInput;export var constructor=gadgetui.objects.Constructor;export var util=gadgetui.util;
//# sourceMappingURL=../gadget-ui.es6.min.js.map